<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Game Tìm Vị Trí Con Giáp Theo Bước Nhảy</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }
        
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }
        
        header {
            background: linear-gradient(to right, #8B4513, #A0522D);
            color: white;
            padding: 25px;
            text-align: center;
        }
        
        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }
        
        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .content {
            padding: 25px;
        }
        
        .info-box {
            background-color: #e6f7ff;
            border-left: 4px solid #1890ff;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 25px;
        }
        
        .reference-section {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
            margin-bottom: 25px;
        }
        
        @media (max-width: 768px) {
            .reference-section {
                grid-template-columns: 1fr;
            }
        }
        
        .input-group {
            margin-bottom: 15px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #555;
        }
        
        select, input {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        select:focus, input:focus {
            border-color: #8B4513;
            outline: none;
            box-shadow: 0 0 0 2px rgba(139, 69, 19, 0.2);
        }
        
        button {
            background: linear-gradient(to right, #8B4513, #A0522D);
            color: white;
            border: none;
            padding: 14px 20px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            font-weight: bold;
            width: 100%;
            transition: all 0.3s;
            margin-top: 10px;
        }
        
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(139, 69, 19, 0.3);
        }
        
        .search-section {
            margin-top: 30px;
        }
        
        .search-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }
        
        .search-item {
            background-color: #f9f9f9;
            padding: 20px;
            border-radius: 10px;
            border: 1px solid #eee;
        }
        
        .search-item h3 {
            color: #8B4513;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }
        
        .result {
            margin-top: 15px;
            padding: 15px;
            border-radius: 8px;
            background-color: #f0f8ff;
            border-left: 4px solid #1890ff;
            min-height: 120px;
        }
        
        .result.found {
            background-color: #f0fff0;
            border-left: 4px solid #28a745;
        }
        
        .result.not-found {
            background-color: #fff0f0;
            border-left: 4px solid #dc3545;
        }
        
        .result-number {
            font-size: 1.5rem;
            font-weight: bold;
            color: #8B4513;
            text-align: center;
            margin: 10px 0;
        }
        
        footer {
            text-align: center;
            padding: 20px;
            margin-top: 30px;
            color: #666;
            border-top: 1px solid #eee;
        }
        
        .instructions {
            background-color: #f0f8ff;
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 20px;
        }
        
        .instructions h3 {
            color: #8B4513;
            margin-bottom: 10px;
        }
        
        .instructions ol {
            padding-left: 20px;
        }
        
        .instructions li {
            margin-bottom: 8px;
        }
        
        .reference-result {
            background-color: #fff8dc;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            border-left: 4px solid #ffd700;
        }
        
        .step-info {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
        }
        
        .step-result {
            margin-top: 10px;
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 5px;
            border-left: 3px solid #6c757d;
        }
        
        .step-highlight {
            background-color: #e7f3ff;
            border-left: 3px solid #007bff;
        }
        
        .steps-input {
            margin-top: 20px;
        }
        
        .steps-input h3 {
            color: #8B4513;
            margin-bottom: 10px;
        }
        
        .steps-input p {
            color: #666;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Game Tìm Vị Trí Con Giáp Theo Bước Nhảy</h1>
            <p class="subtitle">Tìm vị trí của con giáp trong các chu kỳ với bước nhảy khác nhau</p>
        </header>
        
        <div class="content">
            <div class="info-box">
                <p><strong>Chuẩn ngày:</strong> 1/1/1900 - Giáp Tuất, Tháng Đinh Sửu, Năm Kỷ Hợi</p>
                <p>Nhập con giáp bắt đầu, năm dương lịch và các bước nhảy. Sau đó nhập các con giáp cần tìm vị trí trong các chu kỳ khác nhau.</p>
            </div>
            
            <div class="instructions">
                <h3>Hướng dẫn sử dụng:</h3>
                <ol>
                    <li>Chọn con giáp bắt đầu và nhập năm dương lịch của nó</li>
                    <li>Nhập các bước nhảy cần kiểm tra (phân cách bằng dấu phẩy, ví dụ: 3,7,10)</li>
                    <li>Nhấn nút "Thiết lập tham chiếu" để xác định chu kỳ</li>
                    <li>Nhập các con giáp cần tìm vị trí trong các ô bên dưới</li>
                    <li>Nhấn nút "Tìm vị trí" để xem kết quả với các bước nhảy đã chọn</li>
                </ol>
            </div>
            
            <div class="reference-section">
                <div class="input-group">
                    <label for="reference-zodiac">Con giáp bắt đầu:</label>
                    <select id="reference-zodiac">
                        <option value="0">Giáp Tuất</option>
                        <option value="1">Ất Hợi</option>
                        <option value="2">Bính Tý</option>
                        <option value="3">Đinh Sửu</option>
                        <option value="4">Mậu Dần</option>
                        <option value="5">Kỷ Mão</option>
                        <option value="6">Canh Thìn</option>
                        <option value="7">Tân Tỵ</option>
                        <option value="8">Nhâm Ngọ</option>
                        <option value="9">Quý Mùi</option>
                        <option value="10">Giáp Thân</option>
                        <option value="11">Ất Dậu</option>
                        <option value="12">Bính Tuất</option>
                        <option value="13">Đinh Hợi</option>
                        <option value="14">Mậu Tý</option>
                        <option value="15">Kỷ Sửu</option>
                        <option value="16">Canh Dần</option>
                        <option value="17">Tân Mão</option>
                        <option value="18">Nhâm Thìn</option>
                        <option value="19">Quý Tỵ</option>
                        <option value="20">Giáp Ngọ</option>
                        <option value="21">Ất Mùi</option>
                        <option value="22">Bính Thân</option>
                        <option value="23">Đinh Dậu</option>
                        <option value="24">Mậu Tuất</option>
                        <option value="25">Kỷ Hợi</option>
                        <option value="26">Canh Tý</option>
                        <option value="27">Tân Sửu</option>
                        <option value="28">Nhâm Dần</option>
                        <option value="29">Quý Mão</option>
                        <option value="30">Giáp Thìn</option>
                        <option value="31">Ất Tỵ</option>
                        <option value="32">Bính Ngọ</option>
                        <option value="33">Đinh Mùi</option>
                        <option value="34">Mậu Thân</option>
                        <option value="35">Kỷ Dậu</option>
                        <option value="36">Canh Tuất</option>
                        <option value="37">Tân Hợi</option>
                        <option value="38">Nhâm Tý</option>
                        <option value="39">Quý Sửu</option>
                        <option value="40">Giáp Dần</option>
                        <option value="41">Ất Mão</option>
                        <option value="42">Bính Thìn</option>
                        <option value="43">Đinh Tỵ</option>
                        <option value="44">Mậu Ngọ</option>
                        <option value="45">Kỷ Mùi</option>
                        <option value="46">Canh Thân</option>
                        <option value="47">Tân Dậu</option>
                        <option value="48">Nhâm Tuất</option>
                        <option value="49">Quý Hợi</option>
                        <option value="50">Giáp Tý</option>
                        <option value="51">Ất Sửu</option>
                        <option value="52">Bính Dần</option>
                        <option value="53">Đinh Mão</option>
                        <option value="54">Mậu Thìn</option>
                        <option value="55">Kỷ Tỵ</option>
                        <option value="56">Canh Ngọ</option>
                        <option value="57">Tân Mùi</option>
                        <option value="58">Nhâm Thân</option>
                        <option value="59">Quý Dậu</option>
                    </select>
                </div>
                
                <div class="input-group">
                    <label for="reference-year">Năm dương lịch của con giáp bắt đầu:</label>
                    <input type="number" id="reference-year" min="1900" max="2100" value="2023">
                </div>
            </div>

            <div class="steps-input">
                <h3>Nhập các bước nhảy cần kiểm tra</h3>
                <p>Nhập các bước nhảy phân cách bằng dấu phẩy (ví dụ: 3,7,10,15)</p>
                <input type="text" id="step-sizes" value="3,7,10" placeholder="Nhập các bước nhảy...">
            </div>
            
            <button id="set-reference">Thiết lập tham chiếu</button>
            
            <div class="reference-result" id="reference-result">
                <!-- Kết quả tham chiếu sẽ hiển thị ở đây -->
            </div>
            
            <div class="search-section">
                <h2>Tìm vị trí các con giáp với các bước nhảy đã chọn</h2>
                <div class="search-grid" id="search-grid">
                    <!-- Các ô tìm kiếm sẽ được tạo tự động ở đây -->
                </div>
                
                <button id="find-positions" style="margin-top: 20px;">Tìm vị trí tất cả</button>
            </div>
        </div>
        
        <footer>
            <p>Game Tìm Vị Trí Con Giáp Theo Bước Nhảy - Chu kỳ 60 năm | Dựa trên ngày chuẩn 1/1/1900 (Giáp Tuất)</p>
        </footer>
    </div>

    <script>
        // Danh sách con giáp theo thứ tự (60 con giáp)
        const zodiacList = [
            "Giáp Tuất", "Ất Hợi", "Bính Tý", "Đinh Sửu", "Mậu Dần", "Kỷ Mão",
            "Canh Thìn", "Tân Tỵ", "Nhâm Ngọ", "Quý Mùi", "Giáp Thân", "Ất Dậu",
            "Bính Tuất", "Đinh Hợi", "Mậu Tý", "Kỷ Sửu", "Canh Dần", "Tân Mão",
            "Nhâm Thìn", "Quý Tỵ", "Giáp Ngọ", "Ất Mùi", "Bính Thân", "Đinh Dậu",
            "Mậu Tuất", "Kỷ Hợi", "Canh Tý", "Tân Sửu", "Nhâm Dần", "Quý Mão",
            "Giáp Thìn", "Ất Tỵ", "Bính Ngọ", "Đinh Mùi", "Mậu Thân", "Kỷ Dậu",
            "Canh Tuất", "Tân Hợi", "Nhâm Tý", "Quý Sửu", "Giáp Dần", "Ất Mão",
            "Bính Thìn", "Đinh Tỵ", "Mậu Ngọ", "Kỷ Mùi", "Canh Thân", "Tân Dậu",
            "Nhâm Tuất", "Quý Hợi", "Giáp Tý", "Ất Sửu", "Bính Dần", "Đinh Mão",
            "Mậu Thìn", "Kỷ Tỵ", "Canh Ngọ", "Tân Mùi", "Nhâm Thân", "Quý Dậu"
        ];

        // Biến lưu thông tin tham chiếu
        let referenceData = {
            zodiacIndex: 0,
            year: 2023,
            stepSizes: [3, 7, 10]
        };

        // Tạo các ô tìm kiếm
        function createSearchItems() {
            const searchGrid = document.getElementById('search-grid');
            searchGrid.innerHTML = '';
            
            for (let i = 1; i <= 10; i++) {
                const searchItem = document.createElement('div');
                searchItem.className = 'search-item';
                searchItem.innerHTML = `
                    <h3>Con giáp cần tìm ${i}</h3>
                    <div class="input-group">
                        <label for="search-zodiac-${i}">Chọn con giáp:</label>
                        <select id="search-zodiac-${i}">
                            ${zodiacList.map((zodiac, index) => 
                                `<option value="${index}">${zodiac}</option>`
                            ).join('')}
                        </select>
                    </div>
                    <div class="result" id="result-${i}">
                        <p>Kết quả sẽ hiển thị ở đây</p>
                    </div>
                `;
                searchGrid.appendChild(searchItem);
            }
        }

        // Tìm vị trí của con giáp với các bước nhảy đã chọn
        function findPositionsWithSteps(targetZodiacIndex) {
            const results = [];
            
            // Duyệt qua tất cả các bước nhảy đã chọn
            for (let step of referenceData.stepSizes) {
                let currentIndex = referenceData.zodiacIndex;
                let currentYear = referenceData.year;
                let position = 1;
                let found = false;
                
                // Tìm vị trí của con giáp với bước nhảy hiện tại
                while (position <= 60) {
                    if (currentIndex === targetZodiacIndex) {
                        results.push({
                            step: step,
                            position: position,
                            year: currentYear,
                            found: true
                        });
                        found = true;
                        break;
                    }
                    
                    // Di chuyển đến con giáp tiếp theo với bước nhảy hiện tại
                    currentIndex = (currentIndex + step) % 60;
                    currentYear += step;
                    position++;
                }
                
                // Nếu không tìm thấy với bước nhảy này
                if (!found) {
                    results.push({
                        step: step,
                        position: null,
                        year: null,
                        found: false
                    });
                }
            }
            
            return results;
        }

        // Xử lý chuỗi bước nhảy từ input
        function parseStepSizes(input) {
            // Tách chuỗi bằng dấu phẩy và chuyển thành số
            const steps = input.split(',')
                .map(step => parseInt(step.trim()))
                .filter(step => !isNaN(step) && step > 0 && step <= 60);
            
            // Loại bỏ các giá trị trùng lặp
            return [...new Set(steps)];
        }

        // Thiết lập tham chiếu
        document.getElementById('set-reference').addEventListener('click', function() {
            referenceData.zodiacIndex = parseInt(document.getElementById('reference-zodiac').value);
            referenceData.year = parseInt(document.getElementById('reference-year').value);
            
            // Lấy và xử lý các bước nhảy từ input
            const stepInput = document.getElementById('step-sizes').value;
            referenceData.stepSizes = parseStepSizes(stepInput);
            
            if (referenceData.stepSizes.length === 0) {
                alert('Vui lòng nhập ít nhất một bước nhảy hợp lệ (từ 1 đến 60)');
                return;
            }
            
            const referenceResult = document.getElementById('reference-result');
            referenceResult.innerHTML = `
                <p><strong>Tham chiếu đã thiết lập:</strong> ${zodiacList[referenceData.zodiacIndex]} - Năm ${referenceData.year}</p>
                <p><strong>Bước nhảy đã chọn:</strong> ${referenceData.stepSizes.join(', ')}</p>
                <p>Bây giờ bạn có thể tìm vị trí của các con giáp khác với các bước nhảy đã chọn.</p>
            `;
        });

        // Tìm vị trí tất cả các con giáp
        document.getElementById('find-positions').addEventListener('click', function() {
            for (let i = 1; i <= 10; i++) {
                const targetZodiacIndex = parseInt(document.getElementById(`search-zodiac-${i}`).value);
                const targetZodiacName = zodiacList[targetZodiacIndex];
                const results = findPositionsWithSteps(targetZodiacIndex);
                
                // Lọc ra các kết quả tìm thấy
                const foundResults = results.filter(r => r.found);
                
                const resultElement = document.getElementById(`result-${i}`);
                
                if (foundResults.length > 0) {
                    let resultHTML = `
                        <p><strong>Con giáp:</strong> ${targetZodiacName}</p>
                        <p><strong>Tìm thấy ở ${foundResults.length}/${results.length} bước nhảy:</strong></p>
                    `;
                    
                    // Hiển thị tất cả kết quả
                    foundResults.forEach(result => {
                        resultHTML += `
                            <div class="step-result step-highlight">
                                <p><strong>Bước nhảy ${result.step}:</strong> Vị trí ${result.position}, Năm ${result.year}</p>
                            </div>
                        `;
                    });
                    
                    // Hiển thị các bước nhảy không tìm thấy
                    const notFoundResults = results.filter(r => !r.found);
                    if (notFoundResults.length > 0) {
                        resultHTML += `<p class="step-info">Không tìm thấy với bước nhảy: ${notFoundResults.map(r => r.step).join(', ')}</p>`;
                    }
                    
                    resultElement.innerHTML = resultHTML;
                    resultElement.className = 'result found';
                } else {
                    resultElement.innerHTML = `
                        <p><strong>Con giáp:</strong> ${targetZodiacName}</p>
                        <p>Không tìm thấy trong bất kỳ bước nhảy nào đã chọn</p>
                        <p class="step-info">Bước nhảy đã kiểm tra: ${results.map(r => r.step).join(', ')}</p>
                    `;
                    resultElement.className = 'result not-found';
                }
            }
        });

        // Khởi tạo trang
        window.addEventListener('DOMContentLoaded', function() {
            createSearchItems();
            document.getElementById('set-reference').click();
        });
    </script>
</body>
</html>
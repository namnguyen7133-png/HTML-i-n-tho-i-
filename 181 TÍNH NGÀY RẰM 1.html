<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tra C·ª©u Ng√†y R·∫±m v√† M√πng 1</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f5f5f5;
        }
        
        .container {
            background-color: white;
            padding: 30px;
            border-radius: 10px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 30px;
            border-bottom: 3px solid #3498db;
            padding-bottom: 10px;
        }
        
        .input-section {
            display: flex;
            flex-direction: column;
            gap: 15px;
            margin-bottom: 30px;
        }
        
        label {
            font-weight: bold;
            color: #34495e;
        }
        
        input[type="date"] {
            padding: 10px;
            border: 2px solid #bdc3c7;
            border-radius: 5px;
            font-size: 16px;
            transition: border-color 0.3s;
        }
        
        input[type="date"]:focus {
            outline: none;
            border-color: #3498db;
        }
        
        button {
            background-color: #3498db;
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 5px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        
        button:hover {
            background-color: #2980b9;
        }
        
        .result-section {
            margin-top: 30px;
            padding: 20px;
            border-radius: 5px;
            background-color: #ecf0f1;
        }
        
        .result-item {
            margin: 15px 0;
            padding: 10px;
            background-color: white;
            border-left: 4px solid #3498db;
            border-radius: 3px;
        }
        
        .highlight {
            color: #e74c3c;
            font-weight: bold;
        }
        
        .mung1 {
            border-left-color: #2ecc71;
        }
        
        .ram {
            border-left-color: #e74c3c;
        }
        
        .info {
            background-color: #f8f9fa;
            padding: 15px;
            border-radius: 5px;
            margin-top: 20px;
            font-size: 14px;
            color: #7f8c8d;
        }
        
        .year-info {
            display: flex;
            gap: 15px;
            margin: 10px 0;
            flex-wrap: wrap;
        }
        
        .year-item {
            padding: 5px 10px;
            background-color: #3498db;
            color: white;
            border-radius: 3px;
            font-size: 14px;
        }
        
        .error {
            color: #e74c3c;
            background-color: #fadbd8;
            padding: 10px;
            border-radius: 5px;
            margin: 10px 0;
        }
        
        .special-calculation {
            background-color: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }
        
        .special-calculation h4 {
            color: #856404;
            margin-top: 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üîç Tra C·ª©u Ng√†y R·∫±m v√† M√πng 1 √Çm L·ªãch</h1>
        
        <div class="input-section">
            <label for="dateInput">Ch·ªçn ng√†y mu·ªën tra c·ª©u:</label>
            <input type="date" id="dateInput" value="2025-12-31">
            <button onclick="lookup()">Tra C·ª©u</button>
        </div>
        
        <div class="result-section" id="resultSection" style="display: none;">
            <h3>K·∫øt qu·∫£ tra c·ª©u:</h3>
            <div id="result"></div>
        </div>
    </div>

    <script>
        // D·ªØ li·ªáu b·∫£ng m·∫´u (2005-2025)
        const lunarData = {
            "2005": {
                year: 2005,
                months: [
                    { month: 1, mung1: "09/02/2005", ram: "23/02/2005" },
                    { month: 2, mung1: "10/03/2005", ram: "24/03/2005" },
                    { month: 3, mung1: "09/04/2005", ram: "23/04/2005" },
                    { month: 4, mung1: "09/05/2005", ram: "23/05/2005" },
                    { month: 5, mung1: "08/06/2005", ram: "22/06/2005" },
                    { month: 6, mung1: "07/07/2005", ram: "21/07/2005" },
                    { month: 7, mung1: "06/08/2005", ram: "20/08/2005" },
                    { month: 8, mung1: "05/09/2005", ram: "19/09/2005" },
                    { month: 9, mung1: "04/10/2005", ram: "18/10/2005" },
                    { month: 10, mung1: "03/11/2005", ram: "17/11/2005" },
                    { month: 11, mung1: "03/12/2005", ram: "17/12/2005" },
                    { month: 12, mung1: "02/01/2006", ram: "16/01/2006" }
                ]
            },
            "2006": {
                year: 2006,
                months: [
                    { month: 1, mung1: "29/01/2006", ram: "12/02/2006" },
                    { month: 2, mung1: "28/02/2006", ram: "14/03/2006" },
                    { month: 3, mung1: "29/03/2006", ram: "12/04/2006" },
                    { month: 4, mung1: "28/04/2006", ram: "12/05/2006" },
                    { month: 5, mung1: "27/05/2006", ram: "11/06/2006" },
                    { month: 6, mung1: "26/06/2006", ram: "11/07/2006" },
                    { month: 7, mung1: "26/07/2006", ram: "09/08/2006" },
                    { month: 8, mung1: "24/08/2006", ram: "08/09/2006" },
                    { month: 9, mung1: "23/09/2006", ram: "07/10/2006" },
                    { month: 10, mung1: "23/10/2006", ram: "06/11/2006" },
                    { month: 11, mung1: "22/11/2006", ram: "06/12/2006" },
                    { month: 12, mung1: "22/12/2006", ram: "05/01/2007" }
                ]
            },
            "2007": {
                year: 2007,
                months: [
                    { month: 1, mung1: "18/02/2007", ram: "03/03/2007" },
                    { month: 2, mung1: "18/03/2007", ram: "02/04/2007" },
                    { month: 3, mung1: "17/04/2007", ram: "01/05/2007" },
                    { month: 4, mung1: "17/05/2007", ram: "31/05/2007" },
                    { month: 5, mung1: "15/06/2007", ram: "30/06/2007" },
                    { month: 6, mung1: "15/07/2007", ram: "29/07/2007" },
                    { month: 7, mung1: "13/08/2007", ram: "27/08/2007" },
                    { month: 8, mung1: "12/09/2007", ram: "26/09/2007" },
                    { month: 9, mung1: "11/10/2007", ram: "25/10/2007" },
                    { month: 10, mung1: "10/11/2007", ram: "24/11/2007" },
                    { month: 11, mung1: "09/12/2007", ram: "23/12/2007" },
                    { month: 12, mung1: "08/01/2008", ram: "22/01/2008" }
                ]
            },
            "2008": {
                year: 2008,
                months: [
                    { month: 1, mung1: "07/02/2008", ram: "21/02/2008" },
                    { month: 2, mung1: "08/03/2008", ram: "22/03/2008" },
                    { month: 3, mung1: "07/04/2008", ram: "21/04/2008" },
                    { month: 4, mung1: "06/05/2008", ram: "20/05/2008" },
                    { month: 5, mung1: "05/06/2008", ram: "19/06/2008" },
                    { month: 6, mung1: "05/07/2008", ram: "19/07/2008" },
                    { month: 7, mung1: "03/08/2008", ram: "17/08/2008" },
                    { month: 8, mung1: "02/09/2008", ram: "16/09/2008" },
                    { month: 9, mung1: "01/10/2008", ram: "15/10/2008" },
                    { month: 10, mung1: "31/10/2008", ram: "14/11/2008" },
                    { month: 11, mung1: "30/11/2008", ram: "14/12/2008" },
                    { month: 12, mung1: "30/12/2008", ram: "13/01/2009" }
                ]
            },
            "2009": {
                year: 2009,
                months: [
                    { month: 1, mung1: "26/01/2009", ram: "09/02/2009" },
                    { month: 2, mung1: "25/02/2009", ram: "11/03/2009" },
                    { month: 3, mung1: "26/03/2009", ram: "09/04/2009" },
                    { month: 4, mung1: "25/04/2009", ram: "09/05/2009" },
                    { month: 5, mung1: "24/05/2009", ram: "08/06/2009" },
                    { month: 6, mung1: "23/06/2009", ram: "07/07/2009" },
                    { month: 7, mung1: "23/07/2009", ram: "06/08/2009" },
                    { month: 8, mung1: "21/08/2009", ram: "05/09/2009" },
                    { month: 9, mung1: "20/09/2009", ram: "04/10/2009" },
                    { month: 10, mung1: "20/10/2009", ram: "03/11/2009" },
                    { month: 11, mung1: "19/11/2009", ram: "03/12/2009" },
                    { month: 12, mung1: "19/12/2009", ram: "02/01/2010" }
                ]
            },
            "2010": {
                year: 2010,
                months: [
                    { month: 1, mung1: "14/02/2010", ram: "28/02/2010" },
                    { month: 2, mung1: "15/03/2010", ram: "29/03/2010" },
                    { month: 3, mung1: "14/04/2010", ram: "28/04/2010" },
                    { month: 4, mung1: "14/05/2010", ram: "28/05/2010" },
                    { month: 5, mung1: "12/06/2010", ram: "26/06/2010" },
                    { month: 6, mung1: "12/07/2010", ram: "26/07/2010" },
                    { month: 7, mung1: "10/08/2010", ram: "24/08/2010" },
                    { month: 8, mung1: "09/09/2010", ram: "23/09/2010" },
                    { month: 9, mung1: "09/10/2010", ram: "23/10/2010" },
                    { month: 10, mung1: "07/11/2010", ram: "21/11/2010" },
                    { month: 11, mung1: "07/12/2010", ram: "21/12/2010" },
                    { month: 12, mung1: "06/01/2011", ram: "20/01/2011" }
                ]
            },
            "2011": {
                year: 2011,
                months: [
                    { month: 1, mung1: "03/02/2011", ram: "18/02/2011" },
                    { month: 2, mung1: "04/03/2011", ram: "19/03/2011" },
                    { month: 3, mung1: "03/04/2011", ram: "18/04/2011" },
                    { month: 4, mung1: "03/05/2011", ram: "18/05/2011" },
                    { month: 5, mung1: "01/06/2011", ram: "16/06/2011" },
                    { month: 6, mung1: "01/07/2011", ram: "16/07/2011" },
                    { month: 7, mung1: "31/07/2011", ram: "15/08/2011" },
                    { month: 8, mung1: "30/08/2011", ram: "14/09/2011" },
                    { month: 9, mung1: "29/09/2011", ram: "14/10/2011" },
                    { month: 10, mung1: "29/10/2011", ram: "13/11/2011" },
                    { month: 11, mung1: "28/11/2011", ram: "13/12/2011" },
                    { month: 12, mung1: "28/12/2011", ram: "11/01/2012" }
                ]
            },
            "2012": {
                year: 2012,
                months: [
                    { month: 1, mung1: "23/01/2012", ram: "07/02/2012" },
                    { month: 2, mung1: "22/02/2012", ram: "08/03/2012" },
                    { month: 3, mung1: "23/03/2012", ram: "07/04/2012" },
                    { month: 4, mung1: "22/04/2012", ram: "06/05/2012" },
                    { month: 5, mung1: "22/05/2012", ram: "05/06/2012" },
                    { month: 6, mung1: "20/06/2012", ram: "05/07/2012" },
                    { month: 7, mung1: "20/07/2012", ram: "03/08/2012" },
                    { month: 8, mung1: "18/08/2012", ram: "02/09/2012" },
                    { month: 9, mung1: "17/09/2012", ram: "01/10/2012" },
                    { month: 10, mung1: "17/10/2012", ram: "31/10/2012" },
                    { month: 11, mung1: "15/11/2012", ram: "30/11/2012" },
                    { month: 12, mung1: "15/12/2012", ram: "29/12/2012" }
                ]
            },
            "2013": {
                year: 2013,
                months: [
                    { month: 1, mung1: "10/02/2013", ram: "24/02/2013" },
                    { month: 2, mung1: "12/03/2013", ram: "27/03/2013" },
                    { month: 3, mung1: "11/04/2013", ram: "25/04/2013" },
                    { month: 4, mung1: "10/05/2013", ram: "24/05/2013" },
                    { month: 5, mung1: "08/06/2013", ram: "22/06/2013" },
                    { month: 6, mung1: "08/07/2013", ram: "22/07/2013" },
                    { month: 7, mung1: "07/08/2013", ram: "21/08/2013" },
                    { month: 8, mung1: "05/09/2013", ram: "19/09/2013" },
                    { month: 9, mung1: "05/10/2013", ram: "19/10/2013" },
                    { month: 10, mung1: "04/11/2013", ram: "18/11/2013" },
                    { month: 11, mung1: "03/12/2013", ram: "17/12/2013" },
                    { month: 12, mung1: "02/01/2014", ram: "16/01/2014" }
                ]
            },
            "2014": {
                year: 2014,
                months: [
                    { month: 1, mung1: "31/01/2014", ram: "14/02/2014" },
                    { month: 2, mung1: "01/03/2014", ram: "16/03/2014" },
                    { month: 3, mung1: "31/03/2014", ram: "14/04/2014" },
                    { month: 4, mung1: "30/04/2014", ram: "14/05/2014" },
                    { month: 5, mung1: "30/05/2014", ram: "13/06/2014" },
                    { month: 6, mung1: "28/06/2014", ram: "12/07/2014" },
                    { month: 7, mung1: "28/07/2014", ram: "11/08/2014" },
                    { month: 8, mung1: "26/08/2014", ram: "10/09/2014" },
                    { month: 9, mung1: "25/09/2014", ram: "09/10/2014" },
                    { month: 10, mung1: "25/10/2014", ram: "08/11/2014" },
                    { month: 11, mung1: "23/11/2014", ram: "08/12/2014" },
                    { month: 12, mung1: "23/12/2014", ram: "07/01/2015" }
                ]
            },
            "2015": {
                year: 2015,
                months: [
                    { month: 1, mung1: "19/02/2015", ram: "05/03/2015" },
                    { month: 2, mung1: "20/03/2015", ram: "04/04/2015" },
                    { month: 3, mung1: "19/04/2015", ram: "03/05/2015" },
                    { month: 4, mung1: "18/05/2015", ram: "02/06/2015" },
                    { month: 5, mung1: "17/06/2015", ram: "01/07/2015" },
                    { month: 6, mung1: "16/07/2015", ram: "30/07/2015" },
                    { month: 7, mung1: "14/08/2015", ram: "29/08/2015" },
                    { month: 8, mung1: "13/09/2015", ram: "28/09/2015" },
                    { month: 9, mung1: "13/10/2015", ram: "27/10/2015" },
                    { month: 10, mung1: "11/11/2015", ram: "26/11/2015" },
                    { month: 11, mung1: "11/12/2015", ram: "25/12/2015" },
                    { month: 12, mung1: "10/01/2016", ram: "24/01/2016" }
                ]
            },
            "2016": {
                year: 2016,
                months: [
                    { month: 1, mung1: "08/02/2016", ram: "22/02/2016" },
                    { month: 2, mung1: "09/03/2016", ram: "23/03/2016" },
                    { month: 3, mung1: "08/04/2016", ram: "22/04/2016" },
                    { month: 4, mung1: "08/05/2016", ram: "22/05/2016" },
                    { month: 5, mung1: "06/06/2016", ram: "20/06/2016" },
                    { month: 6, mung1: "06/07/2016", ram: "20/07/2016" },
                    { month: 7, mung1: "04/08/2016", ram: "18/08/2016" },
                    { month: 8, mung1: "03/09/2016", ram: "17/09/2016" },
                    { month: 9, mung1: "02/10/2016", ram: "16/10/2016" },
                    { month: 10, mung1: "01/11/2016", ram: "15/11/2016" },
                    { month: 11, mung1: "30/11/2016", ram: "15/12/2016" },
                    { month: 12, mung1: "30/12/2016", ram: "14/01/2017" }
                ]
            },
            "2017": {
                year: 2017,
                months: [
                    { month: 1, mung1: "28/01/2017", ram: "11/02/2017" },
                    { month: 2, mung1: "27/02/2017", ram: "13/03/2017" },
                    { month: 3, mung1: "28/03/2017", ram: "11/04/2017" },
                    { month: 4, mung1: "26/04/2017", ram: "10/05/2017" },
                    { month: 5, mung1: "26/05/2017", ram: "09/06/2017" },
                    { month: 6, mung1: "24/06/2017", ram: "08/07/2017" },
                    { month: 7, mung1: "24/07/2017", ram: "07/08/2017" },
                    { month: 8, mung1: "22/08/2017", ram: "06/09/2017" },
                    { month: 9, mung1: "21/09/2017", ram: "05/10/2017" },
                    { month: 10, mung1: "20/10/2017", ram: "03/11/2017" },
                    { month: 11, mung1: "19/11/2017", ram: "03/12/2017" },
                    { month: 12, mung1: "18/12/2017", ram: "02/01/2018" }
                ]
            },
            "2018": {
                year: 2018,
                months: [
                    { month: 1, mung1: "16/02/2018", ram: "02/03/2018" },
                    { month: 2, mung1: "17/03/2018", ram: "31/03/2018" },
                    { month: 3, mung1: "16/04/2018", ram: "30/04/2018" },
                    { month: 4, mung1: "15/05/2018", ram: "29/05/2018" },
                    { month: 5, mung1: "14/06/2018", ram: "28/06/2018" },
                    { month: 6, mung1: "13/07/2018", ram: "27/07/2018" },
                    { month: 7, mung1: "11/08/2018", ram: "25/08/2018" },
                    { month: 8, mung1: "10/09/2018", ram: "24/09/2018" },
                    { month: 9, mung1: "09/10/2018", ram: "23/10/2018" },
                    { month: 10, mung1: "08/11/2018", ram: "22/11/2018" },
                    { month: 11, mung1: "07/12/2018", ram: "21/12/2018" },
                    { month: 12, mung1: "06/01/2019", ram: "20/01/2019" }
                ]
            },
            "2019": {
                year: 2019,
                months: [
                    { month: 1, mung1: "05/02/2019", ram: "19/02/2019" },
                    { month: 2, mung1: "06/03/2019", ram: "20/03/2019" },
                    { month: 3, mung1: "05/04/2019", ram: "19/04/2019" },
                    { month: 4, mung1: "05/05/2019", ram: "19/05/2019" },
                    { month: 5, mung1: "03/06/2019", ram: "17/06/2019" },
                    { month: 6, mung1: "03/07/2019", ram: "17/07/2019" },
                    { month: 7, mung1: "02/08/2019", ram: "16/08/2019" },
                    { month: 8, mung1: "01/09/2019", ram: "15/09/2019" },
                    { month: 9, mung1: "30/09/2019", ram: "14/10/2019" },
                    { month: 10, mung1: "29/10/2019", ram: "13/11/2019" },
                    { month: 11, mung1: "28/11/2019", ram: "13/12/2019" },
                    { month: 12, mung1: "28/12/2019", ram: "11/01/2020" }
                ]
            },
            "2020": {
                year: 2020,
                months: [
                    { month: 1, mung1: "25/01/2020", ram: "08/02/2020" },
                    { month: 2, mung1: "24/02/2020", ram: "09/03/2020" },
                    { month: 3, mung1: "24/03/2020", ram: "07/04/2020" },
                    { month: 4, mung1: "23/04/2020", ram: "07/05/2020" },
                    { month: 5, mung1: "23/05/2020", ram: "06/06/2020" },
                    { month: 6, mung1: "21/06/2020", ram: "05/07/2020" },
                    { month: 7, mung1: "21/07/2020", ram: "04/08/2020" },
                    { month: 8, mung1: "19/08/2020", ram: "03/09/2020" },
                    { month: 9, mung1: "18/09/2020", ram: "02/10/2020" },
                    { month: 10, mung1: "17/10/2020", ram: "01/11/2020" },
                    { month: 11, mung1: "16/11/2020", ram: "30/11/2020" },
                    { month: 12, mung1: "16/12/2020", ram: "30/12/2020" }
                ]
            },
            "2021": {
                year: 2021,
                months: [
                    { month: 1, mung1: "12/02/2021", ram: "26/02/2021" },
                    { month: 2, mung1: "13/03/2021", ram: "28/03/2021" },
                    { month: 3, mung1: "12/04/2021", ram: "26/04/2021" },
                    { month: 4, mung1: "12/05/2021", ram: "26/05/2021" },
                    { month: 5, mung1: "10/06/2021", ram: "24/06/2021" },
                    { month: 6, mung1: "10/07/2021", ram: "24/07/2021" },
                    { month: 7, mung1: "08/08/2021", ram: "22/08/2021" },
                    { month: 8, mung1: "07/09/2021", ram: "21/09/2021" },
                    { month: 9, mung1: "06/10/2021", ram: "20/10/2021" },
                    { month: 10, mung1: "05/11/2021", ram: "19/11/2021" },
                    { month: 11, mung1: "04/12/2021", ram: "18/12/2021" },
                    { month: 12, mung1: "03/01/2022", ram: "17/01/2022" }
                ]
            },
            "2022": {
                year: 2022,
                months: [
                    { month: 1, mung1: "31/01/2022", ram: "15/02/2022" },
                    { month: 2, mung1: "01/03/2022", ram: "16/03/2022" },
                    { month: 3, mung1: "31/03/2022", ram: "14/04/2022" },
                    { month: 4, mung1: "30/04/2022", ram: "14/05/2022" },
                    { month: 5, mung1: "30/05/2022", ram: "13/06/2022" },
                    { month: 6, mung1: "29/06/2022", ram: "13/07/2022" },
                    { month: 7, mung1: "29/07/2022", ram: "12/08/2022" },
                    { month: 8, mung1: "27/08/2022", ram: "11/09/2022" },
                    { month: 9, mung1: "26/09/2022", ram: "11/10/2022" },
                    { month: 10, mung1: "26/10/2022", ram: "10/11/2022" },
                    { month: 11, mung1: "25/11/2022", ram: "10/12/2022" },
                    { month: 12, mung1: "25/12/2022", ram: "08/01/2023" }
                ]
            },
            "2023": {
                year: 2023,
                months: [
                    { month: 1, mung1: "22/01/2023", ram: "06/02/2023" },
                    { month: 2, mung1: "21/02/2023", ram: "07/03/2023" },
                    { month: 3, mung1: "23/03/2023", ram: "06/04/2023" },
                    { month: 4, mung1: "22/04/2023", ram: "06/05/2023" },
                    { month: 5, mung1: "22/05/2023", ram: "05/06/2023" },
                    { month: 6, mung1: "21/06/2023", ram: "05/07/2023" },
                    { month: 7, mung1: "21/07/2023", ram: "04/08/2023" },
                    { month: 8, mung1: "19/08/2023", ram: "03/09/2023" },
                    { month: 9, mung1: "18/09/2023", ram: "02/10/2023" },
                    { month: 10, mung1: "18/10/2023", ram: "01/11/2023" },
                    { month: 11, mung1: "17/11/2023", ram: "01/12/2023" },
                    { month: 12, mung1: "17/12/2023", ram: "31/12/2023" }
                ]
            },
            "2024": {
                year: 2024,
                months: [
                    { month: 1, mung1: "10/02/2024", ram: "24/02/2024" },
                    { month: 2, mung1: "10/03/2024", ram: "24/03/2024" },
                    { month: 3, mung1: "09/04/2024", ram: "23/04/2024" },
                    { month: 4, mung1: "08/05/2024", ram: "22/05/2024" },
                    { month: 5, mung1: "06/06/2024", ram: "20/06/2024" },
                    { month: 6, mung1: "06/07/2024", ram: "20/07/2024" },
                    { month: 7, mung1: "04/08/2024", ram: "18/08/2024" },
                    { month: 8, mung1: "03/09/2024", ram: "17/09/2024" },
                    { month: 9, mung1: "03/10/2024", ram: "17/10/2024" },
                    { month: 10, mung1: "01/11/2024", ram: "15/11/2024" },
                    { month: 11, mung1: "01/12/2024", ram: "15/12/2024" },
                    { month: 12, mung1: "31/12/2024", ram: "14/01/2025" }
                ]
            },
            "2025": {
                year: 2025,
                months: [
                    { month: 1, mung1: "29/01/2025", ram: "12/02/2025" },
                    { month: 2, mung1: "28/02/2025", ram: "14/03/2025" },
                    { month: 3, mung1: "29/03/2025", ram: "13/04/2025" },
                    { month: 4, mung1: "28/04/2025", ram: "12/05/2025" },
                    { month: 5, mung1: "27/05/2025", ram: "11/06/2025" },
                    { month: 6, mung1: "25/06/2025", ram: "11/07/2025" },
                    { month: 7, mung1: "25/07/2025", ram: "09/08/2025" },
                    { month: 8, mung1: "23/08/2025", ram: "08/09/2025" },
                    { month: 9, mung1: "22/09/2025", ram: "07/10/2025" },
                    { month: 10, mung1: "21/10/2025", ram: "05/11/2025" },
                    { month: 11, mung1: "20/11/2025", ram: "05/12/2025" },
                    { month: 12, mung1: "20/12/2025", ram: "03/01/2026" }
                ]
            }
        };

        // H√†m t√¨m nƒÉm tra c·ª©u d·ª±a tr√™n chu k·ª≥ 19 nƒÉm
        function findReferenceYear(targetYear) {
            const baseYear = 2005;
            const cycle = 19;
            
            // N·∫øu nƒÉm m·ª•c ti√™u n·∫±m trong kho·∫£ng 2005-2025
            if (targetYear >= 2005 && targetYear <= 2025) {
                return targetYear.toString();
            }
            
            // T√≠nh s·ªë d∆∞ khi chia cho 19
            const remainder = ((targetYear - baseYear) % cycle + cycle) % cycle;
            
            // N·∫øu nƒÉm l·ªõn h∆°n 2025
            if (targetYear > 2025) {
                let refYear = baseYear + remainder;
                
                // ƒêi·ªÅu ch·ªânh ƒë·ªÉ refYear ‚â§ 2025
                while (refYear > 2025) {
                    refYear -= cycle;
                }
                
                // ƒê·∫£m b·∫£o refYear ‚â• 2005
                if (refYear < 2005) {
                    refYear += cycle;
                }
                
                return refYear.toString();
            }
            
            // N·∫øu nƒÉm nh·ªè h∆°n 2005
            if (targetYear < 2005) {
                let refYear = baseYear - (cycle - remainder);
                
                // ƒêi·ªÅu ch·ªânh ƒë·ªÉ refYear ‚â• 2005
                while (refYear < 2005) {
                    refYear += cycle;
                }
                
                // ƒê·∫£m b·∫£o refYear ‚â§ 2025
                if (refYear > 2025) {
                    refYear -= cycle;
                }
                
                return refYear.toString();
            }
        }

        // H√†m chuy·ªÉn ƒë·ªïi chu·ªói ng√†y DD/MM/YYYY sang ƒë·ªëi t∆∞·ª£ng Date
        function parseDate(dateStr) {
            const parts = dateStr.split('/');
            const day = parseInt(parts[0]);
            const month = parseInt(parts[1]) - 1;
            const year = parseInt(parts[2]);
            return new Date(year, month, day);
        }

        // H√†m ƒë·ªãnh d·∫°ng ng√†y th√†nh chu·ªói DD/MM/YYYY
        function formatDate(date) {
            const day = date.getDate().toString().padStart(2, '0');
            const month = (date.getMonth() + 1).toString().padStart(2, '0');
            const year = date.getFullYear();
            return `${day}/${month}/${year}`;
        }

        // H√†m t√≠nh s·ªë ng√†y ch√™nh l·ªách
        function getDaysDiff(date1, date2) {
            const diffTime = Math.abs(date2.getTime() - date1.getTime());
            return Math.ceil(diffTime / (1000 * 60 * 60 * 24));
        }

        // H√†m t√≠nh to√°n ƒë·∫∑c bi·ªát theo y√™u c·∫ßu
        function calculateSpecialDate(targetDate, nearestLunarDate, eventName) {
            const daysDiff = getDaysDiff(targetDate, nearestLunarDate.date);
            const targetDay = targetDate.getDate();
            const lunarDay = nearestLunarDate.date.getDate();
            
            let calculationInfo = "";
            let calculatedDate = null;
            
            // N·∫øu s·ªë ng√†y ch√™nh l·ªách l·ªõn h∆°n 30, th·ª±c hi·ªán t√≠nh to√°n ƒë·∫∑c bi·ªát
            if (daysDiff > 30) {
                const targetMonth = targetDate.getMonth() + 1; // Th√°ng hi·ªán t·∫°i (1-12)
                const targetYear = targetDate.getFullYear();
                
                // T√≠nh s·ªë ng√†y trong th√°ng hi·ªán t·∫°i
                const daysInMonth = new Date(targetYear, targetMonth, 0).getDate();
                
                // √Åp d·ª•ng c√¥ng th·ª©c t√≠nh to√°n ƒë·∫∑c bi·ªát
                if (daysDiff <= daysInMonth) {
                    // N·∫øu s·ªë ng√†y ch√™nh l·ªách ‚â§ s·ªë ng√†y trong th√°ng
                    calculatedDate = daysInMonth - daysDiff + 1;
                    
                    calculationInfo = `T√≠nh to√°n ƒë·∫∑c bi·ªát: ${daysInMonth} (s·ªë ng√†y trong th√°ng ${targetMonth}) - ${daysDiff} (s·ªë ng√†y ch√™nh l·ªách) + 1 = ${calculatedDate}`;
                } else {
                    // N·∫øu s·ªë ng√†y ch√™nh l·ªách > s·ªë ng√†y trong th√°ng
                    // L·∫•y ph·∫ßn d∆∞ khi chia cho s·ªë ng√†y trong th√°ng
                    const remainder = daysDiff % daysInMonth;
                    calculatedDate = daysInMonth - remainder + 1;
                    
                    calculationInfo = `T√≠nh to√°n ƒë·∫∑c bi·ªát: ${daysDiff} > ${daysInMonth} (s·ªë ng√†y trong th√°ng ${targetMonth}), l·∫•y ${daysDiff} % ${daysInMonth} = ${remainder}, sau ƒë√≥: ${daysInMonth} - ${remainder} + 1 = ${calculatedDate}`;
                }
                
                // ƒê·ªãnh d·∫°ng ng√†y t√≠nh to√°n
                const calculatedDateObj = new Date(targetYear, targetMonth - 1, calculatedDate);
                const formattedCalculatedDate = formatDate(calculatedDateObj);
                
                return {
                    originalDiff: daysDiff,
                    calculatedDiff: daysDiff,
                    calculationInfo: calculationInfo,
                    calculatedDate: formattedCalculatedDate,
                    daysInMonth: daysInMonth
                };
            } else {
                // N·∫øu s·ªë ng√†y ch√™nh l·ªách ‚â§ 30, s·ª≠ d·ª•ng t√≠nh to√°n b√¨nh th∆∞·ªùng
                calculationInfo = `Kh√¥ng c·∫ßn t√≠nh to√°n ƒë·∫∑c bi·ªát v√¨ s·ªë ng√†y ch√™nh l·ªách (${daysDiff}) ‚â§ 30`;
                
                return {
                    originalDiff: daysDiff,
                    calculatedDiff: daysDiff,
                    calculationInfo: calculationInfo,
                    calculatedDate: nearestLunarDate.formattedDate,
                    daysInMonth: new Date(targetDate.getFullYear(), targetDate.getMonth() + 1, 0).getDate()
                };
            }
        }

        // H√†m t√¨m ng√†y r·∫±m v√† m√πng 1 g·∫ßn nh·∫•t
        function findNearestLunarDates(targetDate) {
            const targetYear = targetDate.getFullYear();
            const refYear = findReferenceYear(targetYear);
            const yearDiff = targetYear - parseInt(refYear);
            
            if (!lunarData[refYear]) {
                return null;
            }
            
            // T√¨m c·∫£ nƒÉm tham chi·∫øu v√† nƒÉm tr∆∞·ªõc/nƒÉm sau n·∫øu c·∫ßn
            const yearsToCheck = [];
            yearsToCheck.push(refYear);
            
            // N·∫øu nƒÉm tham chi·∫øu l√† 2005 v√† targetYear < 2005, th√™m nƒÉm 2024
            if (parseInt(refYear) === 2005 && targetYear < 2005) {
                yearsToCheck.push("2024");
            }
            // N·∫øu nƒÉm tham chi·∫øu l√† 2025 v√† targetYear > 2025, th√™m nƒÉm 2006
            else if (parseInt(refYear) === 2025 && targetYear > 2025) {
                yearsToCheck.push("2006");
            }
            
            let nearestMung1 = null;
            let nearestRam = null;
            let minMung1Diff = Infinity;
            let minRamDiff = Infinity;
            
            // Duy·ªát qua c√°c nƒÉm c·∫ßn ki·ªÉm tra
            yearsToCheck.forEach(yearKey => {
                const yearData = lunarData[yearKey];
                const currentYearDiff = targetYear - parseInt(yearKey);
                
                yearData.months.forEach(monthData => {
                    // X·ª≠ l√Ω ng√†y m√πng 1
                    const mung1Date = parseDate(monthData.mung1);
                    mung1Date.setFullYear(mung1Date.getFullYear() + currentYearDiff);
                    
                    const mung1Time = mung1Date.getTime();
                    const mung1Diff = mung1Time - targetDate.getTime();
                    
                    // Ch·ªâ x√©t ng√†y trong t∆∞∆°ng lai (k·ªÉ c·∫£ h√¥m nay)
                    if (mung1Diff >= 0 && mung1Diff < minMung1Diff) {
                        minMung1Diff = mung1Diff;
                        nearestMung1 = {
                            date: mung1Date,
                            lunarMonth: monthData.month,
                            formattedDate: formatDate(mung1Date),
                            originalDate: monthData.mung1
                        };
                    }
                    
                    // X·ª≠ l√Ω ng√†y r·∫±m
                    const ramDate = parseDate(monthData.ram);
                    ramDate.setFullYear(ramDate.getFullYear() + currentYearDiff);
                    
                    const ramTime = ramDate.getTime();
                    const ramDiff = ramTime - targetDate.getTime();
                    
                    // Ch·ªâ x√©t ng√†y trong t∆∞∆°ng lai (k·ªÉ c·∫£ h√¥m nay)
                    if (ramDiff >= 0 && ramDiff < minRamDiff) {
                        minRamDiff = ramDiff;
                        nearestRam = {
                            date: ramDate,
                            lunarMonth: monthData.month,
                            formattedDate: formatDate(ramDate),
                            originalDate: monthData.ram
                        };
                    }
                });
            });
            
            return {
                nearestMung1,
                nearestRam,
                referenceYear: refYear,
                checkedYears: yearsToCheck
            };
        }

        // H√†m ch√≠nh ƒë·ªÉ tra c·ª©u
        function lookup() {
            const dateInput = document.getElementById('dateInput').value;
            
            if (!dateInput) {
                alert('Vui l√≤ng ch·ªçn ng√†y ƒë·ªÉ tra c·ª©u!');
                return;
            }
            
            const targetDate = new Date(dateInput);
            const result = findNearestLunarDates(targetDate);
            
            if (!result) {
                alert('Kh√¥ng t√¨m th·∫•y d·ªØ li·ªáu ph√π h·ª£p!');
                return;
            }
            
            // Hi·ªÉn th·ªã k·∫øt qu·∫£
            const resultDiv = document.getElementById('result');
            const resultSection = document.getElementById('resultSection');
            
            let html = `
                <div class="info">
                    <p><strong>Ng√†y tra c·ª©u:</strong> ${formatDate(targetDate)}</p>
                    <p><strong>NƒÉm tra c·ª©u:</strong> ${targetDate.getFullYear()}</p>
                    <p><strong>NƒÉm tham chi·∫øu trong b·∫£ng:</strong> ${result.referenceYear}</p>
                    <p><strong>C√°c nƒÉm ƒë√£ ki·ªÉm tra:</strong> ${result.checkedYears.join(', ')}</p>
                </div>
            `;
            
            if (result.nearestMung1) {
                const specialCalc = calculateSpecialDate(targetDate, result.nearestMung1, "M√πng 1");
                
                html += `
                    <div class="result-item mung1">
                        <p><strong>üìÖ M√πng 1 g·∫ßn nh·∫•t:</strong></p>
                        <p>Th√°ng ${result.nearestMung1.lunarMonth} √¢m l·ªãch</p>
                        <p>Ng√†y d∆∞∆°ng g·ªëc: <span class="highlight">${result.nearestMung1.formattedDate}</span></p>
                        <p>Ng√†y d∆∞∆°ng t√≠nh to√°n: <span class="highlight">${specialCalc.calculatedDate}</span></p>
                        <p>C√≤n <span class="highlight">${specialCalc.originalDiff}</span> ng√†y n·ªØa</p>
                    </div>
                    <div class="special-calculation">
                        <h4>T√≠nh to√°n cho M√πng 1:</h4>
                        <p>${specialCalc.calculationInfo}</p>
                        <p>S·ªë ng√†y trong th√°ng ${targetDate.getMonth() + 1}: ${specialCalc.daysInMonth}</p>
                    </div>
                `;
            } else {
                html += `<div class="error">Kh√¥ng t√¨m th·∫•y ng√†y m√πng 1 ph√π h·ª£p</div>`;
            }
            
            if (result.nearestRam) {
                const specialCalc = calculateSpecialDate(targetDate, result.nearestRam, "R·∫±m");
                
                html += `
                    <div class="result-item ram">
                        <p><strong>üåï R·∫±m (ng√†y 15) g·∫ßn nh·∫•t:</strong></p>
                        <p>Th√°ng ${result.nearestRam.lunarMonth} √¢m l·ªãch</p>
                        <p>Ng√†y d∆∞∆°ng g·ªëc: <span class="highlight">${result.nearestRam.formattedDate}</span></p>
                        <p>Ng√†y d∆∞∆°ng t√≠nh to√°n: <span class="highlight">${specialCalc.calculatedDate}</span></p>
                        <p>C√≤n <span class="highlight">${specialCalc.originalDiff}</span> ng√†y n·ªØa</p>
                    </div>
                    <div class="special-calculation">
                        <h4>T√≠nh to√°n cho R·∫±m:</h4>
                        <p>${specialCalc.calculationInfo}</p>
                        <p>S·ªë ng√†y trong th√°ng ${targetDate.getMonth() + 1}: ${specialCalc.daysInMonth}</p>
                    </div>
                `;
            } else {
                html += `<div class="error">Kh√¥ng t√¨m th·∫•y ng√†y r·∫±m ph√π h·ª£p</div>`;
            }
            
            // X√°c ƒë·ªãnh s·ª± ki·ªán n√†o g·∫ßn h∆°n
            if (result.nearestMung1 && result.nearestRam) {
                const mung1Diff = result.nearestMung1.date.getTime() - targetDate.getTime();
                const ramDiff = result.nearestRam.date.getTime() - targetDate.getTime();
                
                html += `<div class="info">`;
                if (mung1Diff < ramDiff) {
                    html += `<p><strong>üìå S·ª± ki·ªán g·∫ßn nh·∫•t l√†: M√πng 1</strong></p>`;
                } else {
                    html += `<p><strong>üìå S·ª± ki·ªán g·∫ßn nh·∫•t l√†: R·∫±m</strong></p>`;
                }
                html += `</div>`;
            }
            
            // Th√™m th√¥ng tin v·ªÅ thu·∫≠t to√°n
            html += `
                <div class="info">
                    <p><strong>Thu·∫≠t to√°n s·ª≠ d·ª•ng:</strong></p>
                    <p>- Chu k·ª≥ 19 nƒÉm (Metonic cycle) ƒë·ªÉ tra c·ª©u ng√†y √¢m l·ªãch</p>
                    <p>- NƒÉm ${targetDate.getFullYear()} ƒë∆∞·ª£c √°nh x·∫° t·ªõi nƒÉm ${result.referenceYear} trong b·∫£ng d·ªØ li·ªáu</p>
                    <p>- ƒê·ªô ch√™nh l·ªách: ${targetDate.getFullYear() - parseInt(result.referenceYear)} nƒÉm</p>
                    <p><strong>Thu·∫≠t to√°n t√≠nh to√°n ƒë·∫∑c bi·ªát:</strong></p>
                    <p>1. N·∫øu s·ªë ng√†y ch√™nh l·ªách ‚â§ 30: hi·ªÉn th·ªã ng√†y g·ªëc</p>
                    <p>2. N·∫øu s·ªë ng√†y ch√™nh l·ªách > 30: t√≠nh ng√†y = (s·ªë ng√†y trong th√°ng - s·ªë ng√†y ch√™nh l·ªách) + 1</p>
                    <p>3. N·∫øu s·ªë ng√†y ch√™nh l·ªách > s·ªë ng√†y trong th√°ng: l·∫•y ph·∫ßn d∆∞ khi chia tr∆∞·ªõc khi t√≠nh</p>
                </div>
            `;
            
            resultDiv.innerHTML = html;
            resultSection.style.display = 'block';
            
            // Cu·ªôn ƒë·∫øn k·∫øt qu·∫£
            resultSection.scrollIntoView({ behavior: 'smooth' });
        }

        // ƒê·∫∑t ng√†y m·∫∑c ƒë·ªãnh l√† 2025-12-31 ƒë·ªÉ test
        window.onload = function() {
            document.getElementById('dateInput').value = "2025-12-31";
            // T·ª± ƒë·ªông ch·∫°y tra c·ª©u khi trang load
            setTimeout(lookup, 500);
        };
    </script>
</body>
</html>
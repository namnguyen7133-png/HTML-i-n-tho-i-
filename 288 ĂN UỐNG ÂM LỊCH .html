<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C√¥ng C·ª• Chuy·ªÉn ƒê·ªïi D∆∞∆°ng L·ªãch - √Çm L·ªãch v·ªõi Th√¥ng Tin D√¢n Gian</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            background: white;
            border-radius: 20px;
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.2);
            width: 100%;
            max-width: 1200px;
            margin: 0 auto;
            overflow: hidden;
        }

        header {
            background: linear-gradient(to right, #6a11cb, #2575fc);
            text-align: center;
            padding: 25px 20px;
            position: relative;
            color: white;
        }

        h1 {
            font-size: 2.5rem;
            margin-bottom: 10px;
            text-shadow: 1px 1px 3px rgba(0, 0, 0, 0.3);
        }

        .subtitle {
            font-size: 1.1rem;
            max-width: 800px;
            margin: 0 auto;
            opacity: 0.9;
        }

        .lantern {
            position: absolute;
            top: 10px;
            width: 40px;
            height: 50px;
            background: #d32f2f;
            border-radius: 50% 50% 40% 40%;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
        }

        .lantern::before, .lantern::after {
            content: '';
            position: absolute;
            background: #ff9800;
            width: 10px;
            height: 15px;
            border-radius: 5px;
        }

        .lantern::before {
            top: -15px;
            left: 15px;
        }

        .lantern::after {
            bottom: -15px;
            left: 15px;
        }

        .lantern-left {
            left: 50px;
        }

        .lantern-right {
            right: 50px;
        }

        .main-content {
            display: flex;
            flex-wrap: wrap;
            padding: 20px;
        }

        .converter-section {
            flex: 1;
            min-width: 300px;
            padding: 15px;
        }

        .folk-info-section {
            flex: 1;
            min-width: 300px;
            padding: 15px;
        }

        .input-section {
            display: grid;
            grid-template-columns: 1fr;
            gap: 25px;
            margin-bottom: 30px;
        }

        .input-group {
            position: relative;
        }

        label {
            display: block;
            margin-bottom: 10px;
            color: #2c3e50;
            font-weight: 600;
            font-size: 1.1rem;
        }

        input[type="date"] {
            width: 100%;
            padding: 15px;
            border: 2px solid #ddd;
            border-radius: 10px;
            font-size: 1rem;
            transition: all 0.3s ease;
        }

        input[type="date"]:focus {
            outline: none;
            border-color: #3498db;
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        .date-range {
            color: #7f8c8d;
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .button-group {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }

        button {
            flex: 1;
            padding: 16px;
            border: none;
            border-radius: 10px;
            font-size: 1rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        #convertBtn {
            background: linear-gradient(90deg, #3498db, #2980b9);
            color: white;
        }

        #convertBtn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(52, 152, 219, 0.4);
        }

        #todayBtn {
            background: linear-gradient(90deg, #2ecc71, #27ae60);
            color: white;
        }

        #todayBtn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(46, 204, 113, 0.4);
        }

        .results {
            margin-top: 30px;
        }

        .result-card {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 20px;
            border-left: 5px solid;
            transition: transform 0.3s ease;
        }

        .result-card:hover {
            transform: translateY(-5px);
        }

        .solar-card {
            border-left-color: #3498db;
            background: linear-gradient(135deg, #e3f2fd, #bbdefb);
        }

        .lunar-card {
            border-left-color: #e74c3c;
            background: linear-gradient(135deg, #ffebee, #ffcdd2);
        }

        .result-title {
            font-size: 1.2rem;
            color: #2c3e50;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .date-display {
            font-size: 2.5rem;
            font-weight: bold;
            text-align: center;
            margin: 15px 0;
        }

        .solar-date {
            color: #2980b9;
        }

        .lunar-date {
            color: #c0392b;
        }

        .date-details {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 15px;
            margin-top: 20px;
        }

        .detail-item {
            text-align: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.8);
            border-radius: 10px;
        }

        .detail-label {
            font-size: 0.9rem;
            color: #7f8c8d;
            margin-bottom: 5px;
        }

        .detail-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: #2c3e50;
        }

        .year-detail {
            color: #e74c3c;
        }

        .month-detail {
            color: #3498db;
        }

        .day-detail {
            color: #27ae60;
        }

        .weekday-display {
            background: linear-gradient(135deg, #fff3e0, #ffecb3);
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            margin-top: 15px;
            border: 2px solid #ffb300;
        }

        .weekday-label {
            font-size: 1rem;
            color: #ff8f00;
            margin-bottom: 5px;
        }

        .weekday-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: #f57c00;
        }

        .folk-info {
            background-color: #fff;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin-bottom: 20px;
        }

        .folk-info h3 {
            color: #d32f2f;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .info-card {
            background-color: #f9f9f9;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 15px;
            border-left: 4px solid #f44336;
        }

        .info-card h4 {
            color: #d32f2f;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .info-card h4 i {
            margin-right: 8px;
        }

        .folk-number-info {
            background-color: #fff;
            border-radius: 10px;
            padding: 20px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            margin-top: 20px;
        }

        .folk-number-info h3 {
            color: #d32f2f;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
        }

        .folk-calculation {
            background-color: #f9f9f9;
            border-radius: 8px;
            padding: 15px;
        }

        .folk-calculation h4 {
            color: #d32f2f;
            margin-bottom: 10px;
        }

        .calculation-result {
            background: linear-gradient(135deg, #e8f5e9, #c8e6c9);
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            margin-top: 15px;
            border: 2px solid #4caf50;
        }

        .result-number {
            font-size: 3rem;
            font-weight: bold;
            color: #2e7d32;
            margin: 10px 0;
        }

        .result-description {
            font-size: 1.2rem;
            color: #388e3c;
            margin-bottom: 10px;
        }

        .info-box {
            background: #e8f4fd;
            border-radius: 10px;
            padding: 20px;
            margin-top: 20px;
            border-left: 4px solid #3498db;
        }

        .info-box p {
            color: #2c3e50;
            line-height: 1.6;
        }

        footer {
            text-align: center;
            padding: 20px;
            color: #777;
            font-size: 0.9rem;
            border-top: 1px solid #eee;
        }

        /* Responsive */
        @media (max-width: 768px) {
            .main-content {
                flex-direction: column;
            }
            
            .converter-section, .folk-info-section {
                width: 100%;
            }
            
            h1 {
                font-size: 2rem;
            }
            
            .date-details {
                grid-template-columns: 1fr;
            }
            
            .button-group {
                flex-direction: column;
            }
            
            .date-display {
                font-size: 2rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="lantern lantern-left"></div>
            <h1>üåì C√¥ng C·ª• Chuy·ªÉn ƒê·ªïi D∆∞∆°ng L·ªãch - √Çm L·ªãch</h1>
            <p class="subtitle">C√¥ng c·ª• chuy·ªÉn ƒë·ªïi ng√†y d∆∞∆°ng l·ªãch sang √¢m l·ªãch v·ªõi th√¥ng tin d√¢n gian Vi·ªát Nam - Ho·∫°t ƒë·ªông offline</p>
            <div class="lantern lantern-right"></div>
        </header>

        <div class="main-content">
            <div class="converter-section">
                <div class="input-section">
                    <div class="input-group">
                        <label for="solarDate">üìÖ Ch·ªçn ng√†y d∆∞∆°ng l·ªãch:</label>
                        <input type="date" id="solarDate" min="1900-01-01" max="2100-12-31">
                        <div class="date-range">Ph·∫°m vi: 01/01/1900 - 31/12/2100</div>
                    </div>
                </div>

                <div class="button-group">
                    <button id="convertBtn" onclick="convertDate()">
                        üîÑ Chuy·ªÉn ƒê·ªïi
                    </button>
                    <button id="todayBtn" onclick="setToday()">
                        üìÖ H√¥m Nay
                    </button>
                </div>

                <div class="results" id="results">
                    <div class="result-card solar-card">
                        <div class="result-title">
                            ‚òÄÔ∏è Ng√†y D∆∞∆°ng L·ªãch
                        </div>
                        <div class="date-display solar-date" id="solarDisplay"></div>
                        
                        <div class="date-details">
                            <div class="detail-item">
                                <div class="detail-label">NƒÉm</div>
                                <div class="detail-value year-detail" id="solarYear"></div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Th√°ng</div>
                                <div class="detail-value month-detail" id="solarMonth"></div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Ng√†y</div>
                                <div class="detail-value day-detail" id="solarDay"></div>
                            </div>
                        </div>
                    </div>

                    <div class="result-card lunar-card">
                        <div class="result-title">
                            üåô Ng√†y √Çm L·ªãch
                        </div>
                        <div class="date-display lunar-date" id="lunarDisplay"></div>
                        
                        <div class="date-details">
                            <div class="detail-item">
                                <div class="detail-label">NƒÉm</div>
                                <div class="detail-value year-detail" id="lunarYear"></div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Th√°ng</div>
                                <div class="detail-value month-detail" id="lunarMonth"></div>
                            </div>
                            <div class="detail-item">
                                <div class="detail-label">Ng√†y</div>
                                <div class="detail-value day-detail" id="lunarDay"></div>
                            </div>
                        </div>

                        <div class="weekday-display" id="weekdayDisplay">
                            <div class="weekday-label">üìÜ Th·ª© trong tu·∫ßn</div>
                            <div class="weekday-value" id="weekdayValue"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="folk-info-section">
                <div class="folk-info">
                    <h3>Th√¥ng tin d√¢n gian theo ng√†y √¢m l·ªãch</h3>
                    <div class="info-card" id="folkBuy">
                        <h4>üõçÔ∏è Mua s·∫Øm</h4>
                        <p id="folkBuyText">Ch·ªçn ng√†y ƒë·ªÉ xem th√¥ng tin</p>
                    </div>
                    <div class="info-card" id="folkWorship">
                        <h4>üôè C√∫ng l·ªÖ</h4>
                        <p id="folkWorshipText">Ch·ªçn ng√†y ƒë·ªÉ xem th√¥ng tin</p>
                    </div>
                    <div class="info-card" id="folkEat">
                        <h4>üçΩÔ∏è ƒÇn u·ªëng</h4>
                        <p id="folkEatText">Ch·ªçn ng√†y ƒë·ªÉ xem th√¥ng tin</p>
                    </div>
                    <div class="info-card" id="folkAvoid">
                        <h4>üö´ Ki√™ng k·ªµ</h4>
                        <p id="folkAvoidText">Ch·ªçn ng√†y ƒë·ªÉ xem th√¥ng tin</p>
                    </div>
                    <div class="info-card" id="folkMeaning">
                        <h4>üìñ √ù nghƒ©a</h4>
                        <p id="folkMeaningText">Ch·ªçn ng√†y ƒë·ªÉ xem th√¥ng tin</p>
                    </div>
                </div>

                <div class="folk-number-info">
                    <h3>Th√¥ng tin s·ªë d√¢n gian</h3>
                    <div class="folk-calculation">
                        <h4>üìä T√≠nh s·ªë d√¢n gian t·ª´ ng√†y √¢m l·ªãch</h4>
                        <p>Quy t·∫Øc: L·∫•y ng√†y √¢m l·ªãch chia 9, l·∫•y s·ªë d∆∞. N·∫øu d∆∞ 0 th√¨ l·∫•y 9.</p>
                        <p>V√≠ d·ª•: Ng√†y 14 √¢m l·ªãch ‚Üí 14 mod 9 = 5</p>
                        
                        <div class="calculation-result" id="folkNumberResult">
                            <p class="result-description">K·∫øt qu·∫£ t√≠nh to√°n:</p>
                            <div class="result-number" id="folkNumber">-</div>
                            <p id="folkNumberMeaning">Ch·ªçn ng√†y ƒë·ªÉ xem √Ω nghƒ©a</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="info-box">
            <p>üí° <strong>L∆∞u √Ω:</strong> C√¥ng c·ª• n√†y s·ª≠ d·ª•ng thu·∫≠t to√°n chuy·ªÉn ƒë·ªïi d∆∞∆°ng l·ªãch sang √¢m l·ªãch v√† d·ªØ li·ªáu d√¢n gian Vi·ªát Nam. 
            K·∫øt qu·∫£ c√≥ th·ªÉ c√≥ sai s·ªë nh·ªè so v·ªõi l·ªãch ch√≠nh th·ª©c. Th√¥ng tin d√¢n gian ch·ªâ mang t√≠nh ch·∫•t tham kh·∫£o. ·ª®ng d·ª•ng ho·∫°t ƒë·ªông ho√†n to√†n offline.</p>
        </div>

        <footer>
            <p>¬© 2024 C√¥ng C·ª• Chuy·ªÉn ƒê·ªïi D∆∞∆°ng L·ªãch - √Çm L·ªãch v·ªõi Th√¥ng Tin D√¢n Gian | Ho·∫°t ƒë·ªông offline</p>
            <p>Thu·∫≠t to√°n d·ª±a tr√™n c√¥ng th·ª©c t√≠nh l·ªãch √¢m truy·ªÅn th·ªëng v√† ki·∫øn th·ª©c d√¢n gian Vi·ªát Nam</p>
        </footer>
    </div>

    <script>
        // ========== D·ªÆ LI·ªÜU D√ÇN GIAN ==========
        const folkData = {
            // Th√¥ng tin theo th√°ng √¢m l·ªãch
            months: {
                1: {
                    solarTerms: "L·∫≠p Xu√¢n ‚Äì V≈© Th·ªßy ‚Äì T·∫øt Nguy√™n ƒê√°n ‚Äì R·∫±m Th√°ng Gi√™ng (Nguy√™n Ti√™u)",
                    activities: {
                        buy: "mu·ªëi, h∆∞∆°ng, hoa, c√° ch√©p, gi·∫•y ti·ªÅn v√†ng b·∫°c",
                        worship: "gia ti√™n, Th·ªï C√¥ng, Ng·ªçc Ho√†ng",
                        eat: "ƒë·ªì chay r·∫±m Gi√™ng, b√°nh tr√¥i chay, c√° h·∫•p",
                        avoid: "ƒÉn m·∫Øm t√¥m ƒë·∫ßu nƒÉm, c√£i c·ªç, cho l·ª≠a / n∆∞·ªõc"
                    },
                    meaning: "M·ªü ƒë·∫ßu nƒÉm m·ªõi, c·∫ßu an ‚Äì t√†i ‚Äì ph√∫c ‚Äì l·ªôc, 'c·∫£ nƒÉm d∆∞ d·∫£, √™m ·∫•m'."
                },
                2: {
                    solarTerms: "Kinh Tr·∫≠p ‚Äì Xu√¢n Ph√¢n ‚Äì L·ªÖ Th√°nh M·∫´u Li·ªÖu H·∫°nh (3/3)",
                    activities: {
                        buy: "rau m·ªõi, c√° t∆∞∆°i, hoa tr√°i ƒë·∫ßu m√πa",
                        worship: "T·∫øt H√†n Th·ª±c (3/3) ‚Äì b√°nh tr√¥i, b√°nh chay",
                        eat: "ƒë·ªì m√°t, thanh nh·∫π",
                        avoid: "s√°t sinh nhi·ªÅu, v√¨ m√πa sinh n·ªü c·ªßa c√¥n tr√πng"
                    },
                    meaning: "C·∫ßu cho c√¢y c·ªëi sinh s√¥i, tr·ªùi ƒë·∫•t giao h√≤a, tr√°nh b·ªánh m√πa xu√¢n."
                },
                3: {
                    solarTerms: "Thanh Minh ‚Äì C·ªëc V≈© ‚Äì T·∫£o m·ªô ‚Äì Gi·ªó T·ªï H√πng V∆∞∆°ng (10/3)",
                    activities: {
                        buy: "h∆∞∆°ng hoa, x√¥i ch√®, tr·ª©ng, g√† tr·ªëng",
                        worship: "m·ªô t·ªï ti√™n, Th·ªï ƒë·ªãa",
                        eat: "canh mƒÉng, c∆°m n·∫øp, rau rƒÉm",
                        avoid: "ƒÉn ƒë·ªì tanh ng√†y Thanh Minh"
                    },
                    meaning: "T∆∞·ªüng nh·ªõ t·ªï ti√™n, 'u·ªëng n∆∞·ªõc nh·ªõ ngu·ªìn', l√†m ph√∫c ƒë·∫ßu v·ª•."
                },
                4: {
                    solarTerms: "L·∫≠p H·∫° ‚Äì Ti·ªÉu M√£n",
                    activities: {
                        buy: "tr√°i c√¢y, ƒë·∫≠u ƒëen, c√° r√¥, rau m√°t",
                        worship: "l·ªÖ ra m√πa (c√∫ng Th·∫ßn N√¥ng)",
                        eat: "ch√® ƒë·∫≠u ƒëen, canh rau ng√≥t, c√° kho",
                        avoid: "ƒÉn ƒë·ªì n·∫∑ng, chi√™n r√°n"
                    },
                    meaning: "ƒê√≥n m√πa h·∫°, thanh l·ªçc c∆° th·ªÉ, chu·∫©n b·ªã v·ª• m·ªõi."
                },
                5: {
                    solarTerms: "Mang Ch·ªßng ‚Äì H·∫° Ch√≠ ‚Äì T·∫øt ƒêoan Ng·ªç (5/5)",
                    activities: {
                        buy: "r∆∞·ª£u n·∫øp, th·ªãt v·ªãt, qu·∫£ v·∫£i, m·∫≠n, l√° th∆°m",
                        worship: "T·∫øt gi·∫øt s√¢u b·ªç s√°ng m√πng 5",
                        eat: "r∆∞·ª£u n·∫øp, hoa qu·∫£ chua, v·ªãt lu·ªôc",
                        avoid: "ƒÉn ƒë·ªì s·ªëng, ra n·∫Øng l√¢u"
                    },
                    meaning: "Tr·ª´ ƒë·ªôc, 'di·ªát s√¢u b·ªç', gi·ªØ th√¢n an tr∆∞·ªõc m√πa n√≥ng."
                },
                6: {
                    solarTerms: "Ti·ªÉu Th·ª≠ ‚Äì ƒê·∫°i Th·ª≠",
                    activities: {
                        buy: "ƒë·∫≠u xanh, ch√® xanh, c√° qu·∫£, rau ƒë·∫Øng",
                        worship: "c·∫ßu m∆∞a thu·∫≠n gi√≥ h√≤a",
                        eat: "ƒë·ªì m√°t, canh chua, hoa qu·∫£ gi·∫£i nhi·ªát",
                        avoid: "r∆∞·ª£u bia, ƒë·ªì cay n√≥ng"
                    },
                    meaning: "Gi·ªØ s·ª©c, tr√°nh c·∫£m n·∫Øng, d∆∞·ª°ng √¢m."
                },
                7: {
                    solarTerms: "L·∫≠p Thu ‚Äì X·ª≠ Th·ª≠ ‚Äì R·∫±m Th√°ng 7 (Vu Lan, X√° t·ªôi vong nh√¢n)",
                    activities: {
                        buy: "h∆∞∆°ng hoa, v√†ng m√£, c√° ph√≥ng sinh, ch√°o lo√£ng",
                        worship: "Ph·∫≠t, gia ti√™n, c√¥ h·ªìn",
                        eat: "ƒë·ªì chay, ch√°o, hoa qu·∫£",
                        avoid: "ƒëi ƒë√™m, v·ªõt ƒë·ªì tr√¥i, kh·ªüi s·ª± l·ªõn"
                    },
                    meaning: "Th√°ng x√° t·ªôi, b√°o hi·∫øu, t√≠ch ph√∫c."
                },
                8: {
                    solarTerms: "B·∫°ch L·ªô ‚Äì Thu Ph√¢n ‚Äì T·∫øt Trung Thu (15/8)",
                    activities: {
                        buy: "b√°nh trung thu, c·ªëm, b∆∞·ªüi, h·ªìng, na",
                        worship: "R·∫±m Trung Thu ‚Äì c√∫ng trƒÉng",
                        eat: "b√°nh n∆∞·ªõng, b√°nh d·∫ªo, tr√† sen",
                        avoid: "ƒë·ªï r√°c sau r·∫±m (v√¨ 'ƒëang r∆∞·ªõc trƒÉng')"
                    },
                    meaning: "M√πa thu ho·∫°ch, t·∫° ∆°n tr·ªùi ƒë·∫•t."
                },
                9: {
                    solarTerms: "H√†n L·ªô ‚Äì S∆∞∆°ng Gi√°ng",
                    activities: {
                        buy: "g·ª´ng, r∆∞·ª£u, c√° tr·∫Øm, v·ªãt",
                        worship: "l·ªÖ T·∫° ƒêi·ªÅn (cu·ªëi v·ª• m√πa)",
                        eat: "ƒë·ªì ·∫•m, ch√°o g·ª´ng",
                        avoid: "ƒÉn ƒë·ªì l·∫°nh, t·∫Øm ƒë√™m"
                    },
                    meaning: "Giao m√πa ‚Äì tƒÉng d∆∞∆°ng kh√≠, tr√°nh c·∫£m l·∫°nh."
                },
                10: {
                    solarTerms: "L·∫≠p ƒê√¥ng ‚Äì Ti·ªÉu Tuy·∫øt ‚Äì L·ªÖ C∆°m M·ªõi (10/10)",
                    activities: {
                        buy: "c√°, th·ªãt b√≤, r∆∞·ª£u g·ª´ng, d∆∞a mu·ªëi",
                        worship: "l·ªÖ c∆°m m·ªõi, c·∫ßu m√πa sau",
                        eat: "ƒë·ªì ·∫•m, c√° kho",
                        avoid: "n∆∞·ªõc l·∫°nh, ng·ªß mu·ªôn"
                    },
                    meaning: "'L·∫≠p ƒê√¥ng b·ªï c√°' ‚Äì gi·ªØ d∆∞∆°ng kh√≠, d∆∞·ª°ng s·ª©c."
                },
                11: {
                    solarTerms: "ƒê·∫°i Tuy·∫øt ‚Äì ƒê√¥ng Ch√≠",
                    activities: {
                        buy: "th·ªãt ch√≥, ng·ªóng, g·∫°o n·∫øp, r∆∞·ª£u thu·ªëc",
                        worship: "ƒê√¥ng Ch√≠ ‚Äì l·ªÖ √¢m d∆∞∆°ng giao h√≤a",
                        eat: "b√°nh tr√¥i, ch√°o g·∫°o, th·ªãt ·∫•m",
                        avoid: "ƒÉn chua, t·∫Øm ƒë√™m"
                    },
                    meaning: "B·ªìi b·ªï c∆° th·ªÉ, chu·∫©n b·ªã cho T·∫øt."
                },
                12: {
                    solarTerms: "Ti·ªÉu H√†n ‚Äì ƒê·∫°i H√†n ‚Äì √îng C√¥ng √îng T√°o (23/12) ‚Äì T·∫øt Nguy√™n ƒê√°n c·∫≠n k·ªÅ",
                    activities: {
                        buy: "v√¥i, mu·ªëi, h∆∞∆°ng, hoa, c√° ch√©p, v√†ng m√£, l√° dong",
                        worship: "T√°o Qu√¢n, t·ªï ti√™n, t·∫•t ni√™n",
                        eat: "b√°nh ch∆∞ng, d∆∞a h√†nh, th·ªãt ƒë√¥ng",
                        avoid: "c√£i c·ªç, ƒë·ªï n∆∞·ªõc, l√†m b·ª´a b√£i cu·ªëi nƒÉm"
                    },
                    meaning: "Ti·ªÖn nƒÉm c≈©, ngh√™nh xu√¢n m·ªõi, t·∫©y u·∫ø, t√≠ch ph√∫c."
                }
            },
            
            // √ù nghƒ©a c√°c s·ªë d√¢n gian (1-9)
            numberMeanings: {
                1: "S·ªë 1 - Kh·ªüi ƒë·∫ßu, ƒë·ªôc l·∫≠p, l√£nh ƒë·∫°o. T·ªët cho kh·ªüi s·ª±, m·ªü h√†ng.",
                2: "S·ªë 2 - C√¢n b·∫±ng, h·ª£p t√°c, nh·ªã nguy√™n. T·ªët cho h√¥n nh√¢n, h·ª£p t√°c.",
                3: "S·ªë 3 - S√°ng t·∫°o, ph√°t tri·ªÉn, tam t√†i. T·ªët cho ngh·ªá thu·∫≠t, h·ªçc h√†nh.",
                4: "S·ªë 4 - ·ªîn ƒë·ªãnh, v·ªØng ch·∫Øc, t·ª© ph∆∞∆°ng. T·ªët cho x√¢y d·ª±ng, ƒë·∫ßu t∆∞ d√†i h·∫°n.",
                5: "S·ªë 5 - Thay ƒë·ªïi, t·ª± do, ng≈© h√†nh. T·ªët cho du l·ªãch, giao d·ªãch.",
                6: "S·ªë 6 - H√†i h√≤a, gia ƒë√¨nh, l·ª•c h·ª£p. T·ªët cho gia ƒë·∫°o, mua nh√†.",
                7: "S·ªë 7 - T√¢m linh, tr√≠ tu·ªá, th·∫•t tinh. T·ªët cho h·ªçc t·∫≠p, nghi√™n c·ª©u.",
                8: "S·ªë 8 - Ph√°t tri·ªÉn, th·ªãnh v∆∞·ª£ng, b√°t qu√°i. T·ªët cho t√†i ch√≠nh, kinh doanh.",
                9: "S·ªë 9 - Ho√†n thi·ªán, vi√™n m√£n, c·ª≠u c·ª≠u. T·ªët cho k·∫øt th√∫c, t·ªïng k·∫øt."
            }
        };

        // ========== H√ÄM CHUY·ªÇN ƒê·ªîI C∆† B·∫¢N ==========
        function jdFromDate(dd, mm, yy) {
            if (mm <= 2) {
                yy--;
                mm += 12;
            }
            let A = Math.floor(yy / 100);
            let B = 2 - A + Math.floor(A / 4);
            return Math.floor(365.25 * (yy + 4716)) + Math.floor(30.6001 * (mm + 1)) + dd + B - 1524;
        }

        // ========== THU·∫¨T TO√ÅN √ÇM L·ªäCH ==========
        const PI = Math.PI;

        function NewMoon(k) {
            let T = k / 1236.85;
            let T2 = T * T;
            let T3 = T2 * T;
            let dr = PI / 180;
            
            let Jd1 = 2415020.75933 + 29.53058868 * k + 0.0001178 * T2 - 0.000000155 * T3;
            Jd1 = Jd1 + 0.00033 * Math.sin((166.56 + 132.87 * T - 0.009173 * T2) * dr);
            
            let M = 359.2242 + 29.10535608 * k - 0.0000333 * T2 - 0.00000347 * T3;
            let Mpr = 306.0253 + 385.81691806 * k + 0.0107306 * T2 + 0.00001236 * T3;
            let F = 21.2964 + 390.67050646 * k - 0.0016528 * T2 - 0.00000239 * T3;
            
            let C1 = (0.1734 - 0.000393 * T) * Math.sin(M * dr);
            C1 = C1 + 0.0021 * Math.sin(2 * dr * M);
            C1 = C1 - 0.4068 * Math.sin(Mpr * dr);
            C1 = C1 + 0.0161 * Math.sin(2 * dr * Mpr);
            C1 = C1 - 0.0004 * Math.sin(3 * dr * Mpr);
            C1 = C1 + 0.0104 * Math.sin(2 * dr * F);
            C1 = C1 - 0.0051 * Math.sin(dr * (M + Mpr));
            C1 = C1 - 0.0074 * Math.sin(dr * (M - Mpr));
            C1 = C1 + 0.0004 * Math.sin(dr * (2 * F + M));
            C1 = C1 - 0.0004 * Math.sin(dr * (2 * F - M));
            C1 = C1 - 0.0006 * Math.sin(dr * (2 * F + Mpr));
            C1 = C1 + 0.0010 * Math.sin(dr * (2 * F - Mpr));
            C1 = C1 + 0.0005 * Math.sin(dr * (2 * Mpr + M));
            
            let deltaT;
            if (T < -11) {
                deltaT = 0.001 + 0.000839 * T + 0.0002261 * T2 - 0.00000845 * T3 - 0.000000081 * T * T3;
            } else {
                deltaT = -0.000278 + 0.000265 * T + 0.000262 * T2;
            }
            
            return Jd1 + C1 - deltaT;
        }

        function getNewMoonDay(k, timeZone) {
            return Math.floor(NewMoon(k) + 0.5 + timeZone / 24);
        }

        function getSunLongitude(jdn, timeZone) {
            let T = (jdn - 2451545.5 - timeZone / 24) / 36525;
            let M = 357.52910 + 35999.05030 * T - 0.0001559 * T * T - 0.00000048 * T * T * T;
            let L0 = 280.46645 + 36000.76983 * T + 0.0003032 * T * T;
            let DL = (1.914600 - 0.004817 * T - 0.000014 * T * T) * Math.sin(M * PI / 180);
            DL = DL + (0.019993 - 0.000101 * T) * Math.sin(2 * M * PI / 180) + 0.000290 * Math.sin(3 * M * PI / 180);
            let L = (L0 + DL) * PI / 180;
            L = L - 2 * PI * Math.floor(L / (2 * PI));
            return Math.floor(L / (PI / 6));
        }

        function getLunarMonth11(yy, timeZone) {
            let off = jdFromDate(31, 12, yy) - 2415021;
            let k = Math.floor(off / 29.530588853);
            let nm = getNewMoonDay(k, timeZone);
            let sunLong = getSunLongitude(nm, timeZone);
            
            if (sunLong >= 9) {
                nm = getNewMoonDay(k - 1, timeZone);
            }
            return nm;
        }

        function getLeapMonthOffset(a11, timeZone) {
            let k = Math.floor((a11 - 2415021) / 29.530588853);
            let last;
            let i = 1;
            let arc = getSunLongitude(getNewMoonDay(k + i, timeZone), timeZone);
            
            do {
                last = arc;
                i++;
                arc = getSunLongitude(getNewMoonDay(k + i, timeZone), timeZone);
            } while (arc != last && i < 14);
            
            return i - 1;
        }

        // ========== H√ÄM CH√çNH CHUY·ªÇN ƒê·ªîI ==========
        function solarToLunar(dd, mm, yy, timeZone) {
            let dayNumber = jdFromDate(dd, mm, yy);
            let k = Math.floor((dayNumber - 2415021) / 29.530588853);
            let monthStart = getNewMoonDay(k + 1, timeZone);
            
            if (monthStart > dayNumber) {
                monthStart = getNewMoonDay(k, timeZone);
            }
            
            let a11 = getLunarMonth11(yy, timeZone);
            let b11 = a11;
            
            let lunarYear;
            if (a11 >= monthStart) {
                lunarYear = yy;
                a11 = getLunarMonth11(yy - 1, timeZone);
            } else {
                lunarYear = yy + 1;
                b11 = getLunarMonth11(yy + 1, timeZone);
            }
            
            let lunarDay = dayNumber - monthStart + 1;
            let diff = Math.floor((monthStart - a11) / 29);
            let lunarLeap = 0;
            let lunarMonth = diff + 11;
            
            if (b11 - a11 > 365) {
                let leapMonthDiff = getLeapMonthOffset(a11, timeZone);
                if (diff >= leapMonthDiff) {
                    lunarMonth = diff + 10;
                    if (diff == leapMonthDiff) {
                        lunarLeap = 1;
                    }
                }
            }
            
            if (lunarMonth > 12) {
                lunarMonth = lunarMonth - 12;
            }
            
            if (lunarMonth >= 11 && diff < 4) {
                lunarYear = lunarYear - 1;
            }
            
            return {
                day: lunarDay,
                month: lunarMonth,
                year: lunarYear,
                leap: lunarLeap
            };
        }

        // ========== H√ÄM HI·ªÇN TH·ªä K·∫æT QU·∫¢ ==========
        function formatLunarMonth(month, isLeap) {
            const monthNames = [
                "M·ªôt", "Hai", "Ba", "T∆∞", "NƒÉm", "S√°u", 
                "B·∫£y", "T√°m", "Ch√≠n", "M∆∞·ªùi", "M∆∞·ªùi M·ªôt", "Ch·∫°p"
            ];
            
            let monthName = monthNames[month - 1];
            if (isLeap) {
                return `Th√°ng ${monthName} (Nhu·∫≠n)`;
            }
            return `Th√°ng ${monthName}`;
        }

        function formatDate(y, m, d, type) {
            if (type === 'solar') {
                return `Ng√†y ${d} th√°ng ${m} nƒÉm ${y}`;
            } else {
                return `Ng√†y ${d} th√°ng ${m} nƒÉm ${y}`;
            }
        }

        function getWeekday(y, m, d) {
            const weekdays = [
                "Ch·ªß Nh·∫≠t", "Th·ª© Hai", "Th·ª© Ba", "Th·ª© T∆∞", 
                "Th·ª© NƒÉm", "Th·ª© S√°u", "Th·ª© B·∫£y"
            ];
            
            let date = new Date(y, m - 1, d);
            return weekdays[date.getDay()];
        }

        // ========== H√ÄM T√çNH S·ªê D√ÇN GIAN ==========
        function calculateFolkNumber(lunarDay) {
            // T√≠nh s·ªë d√¢n gian: ng√†y √¢m mod 9, n·∫øu 0 th√¨ l·∫•y 9
            let number = lunarDay % 9;
            if (number === 0) number = 9;
            return number;
        }

        // ========== H√ÄM HI·ªÇN TH·ªä TH√îNG TIN D√ÇN GIAN ==========
        function displayFolkInfo(lunarMonth, lunarDay, isLeap) {
            // L·∫•y th√¥ng tin th√°ng √¢m l·ªãch
            const monthData = folkData.months[lunarMonth] || folkData.months[10]; // M·∫∑c ƒë·ªãnh th√°ng 10
            
            // C·∫≠p nh·∫≠t th√¥ng tin d√¢n gian
            document.getElementById('folkBuyText').textContent = `Mua: ${monthData.activities.buy}`;
            document.getElementById('folkWorshipText').textContent = `C√∫ng: ${monthData.activities.worship}`;
            document.getElementById('folkEatText').textContent = `ƒÇn: ${monthData.activities.eat}`;
            document.getElementById('folkAvoidText').textContent = `Ki√™ng: ${monthData.activities.avoid}`;
            document.getElementById('folkMeaningText').textContent = monthData.meaning;
            
            // T√≠nh v√† hi·ªÉn th·ªã s·ªë d√¢n gian
            const folkNumber = calculateFolkNumber(lunarDay);
            const folkNumberMeaning = folkData.numberMeanings[folkNumber] || "Kh√¥ng c√≥ th√¥ng tin cho s·ªë n√†y";
            
            document.getElementById('folkNumber').textContent = folkNumber;
            document.getElementById('folkNumberMeaning').textContent = folkNumberMeaning;
        }

        // ========== H√ÄM X·ª¨ L√ù GIAO DI·ªÜN ==========
        function convertDate() {
            let dateValue = document.getElementById('solarDate').value;
            if (!dateValue) {
                alert('Vui l√≤ng ch·ªçn ng√†y d∆∞∆°ng l·ªãch!');
                return;
            }
            
            let [y, m, d] = dateValue.split('-').map(Number);
            
            // Ki·ªÉm tra ng√†y h·ª£p l·ªá
            let inputDate = new Date(y, m - 1, d);
            if (inputDate.getFullYear() !== y || inputDate.getMonth() !== m - 1 || inputDate.getDate() !== d) {
                alert('Ng√†y kh√¥ng h·ª£p l·ªá! Vui l√≤ng ch·ªçn ng√†y kh√°c.');
                return;
            }
            
            // Chuy·ªÉn ƒë·ªïi sang √¢m l·ªãch
            let timeZone = 7; // UTC+7 (Vi·ªát Nam)
            let lunar = solarToLunar(d, m, y, timeZone);
            
            // C·∫≠p nh·∫≠t th√¥ng tin d∆∞∆°ng l·ªãch
            document.getElementById('solarDisplay').textContent = formatDate(y, m, d, 'solar');
            document.getElementById('solarYear').textContent = y;
            document.getElementById('solarMonth').textContent = m;
            document.getElementById('solarDay').textContent = d;
            
            // C·∫≠p nh·∫≠t th√¥ng tin √¢m l·ªãch
            let lunarMonthDisplay = formatLunarMonth(lunar.month, lunar.leap);
            document.getElementById('lunarDisplay').textContent = 
                `Ng√†y ${lunar.day} ${lunarMonthDisplay.toLowerCase()} nƒÉm ${lunar.year}`;
            document.getElementById('lunarYear').textContent = lunar.year;
            document.getElementById('lunarMonth').textContent = lunar.month + (lunar.leap ? " (Nhu·∫≠n)" : "");
            document.getElementById('lunarDay').textContent = lunar.day;
            
            // C·∫≠p nh·∫≠t th·ª© trong tu·∫ßn
            let weekday = getWeekday(y, m, d);
            document.getElementById('weekdayValue').textContent = weekday;
            
            // Hi·ªÉn th·ªã th√¥ng tin d√¢n gian
            displayFolkInfo(lunar.month, lunar.day, lunar.leap);
            
            // Hi·ªÉn th·ªã k·∫øt qu·∫£
            document.getElementById('results').style.display = 'block';
            
            // Cu·ªôn ƒë·∫øn k·∫øt qu·∫£
            document.getElementById('results').scrollIntoView({ 
                behavior: 'smooth', 
                block: 'start' 
            });
        }

        function setToday() {
            let today = new Date();
            let yyyy = today.getFullYear();
            let mm = String(today.getMonth() + 1).padStart(2, '0');
            let dd = String(today.getDate()).padStart(2, '0');
            
            document.getElementById('solarDate').value = `${yyyy}-${mm}-${dd}`;
            convertDate();
        }

        // ========== KH·ªûI T·∫†O TRANG ==========
        window.onload = function() {
            // ƒê·∫∑t ng√†y m·∫∑c ƒë·ªãnh l√† h√¥m nay
            setToday();
            
            // Th√™m s·ª± ki·ªán Enter ƒë·ªÉ chuy·ªÉn ƒë·ªïi
            document.getElementById('solarDate').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    convertDate();
                }
            });
        };
    </script>
</body>
</html>
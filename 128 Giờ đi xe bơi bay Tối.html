<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tính Toán Số Học và Cảnh Báo Sức Khỏe</title>
    <style>
        * {
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            margin: 0;
            padding: 20px;
            background-color: #f5f5f5;
            color: #333;
            line-height: 1.6;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 0 20px rgba(0, 0, 0, 0.1);
            padding: 25px;
            overflow: hidden;
        }
        
        h1 {
            color: #2c3e50;
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid #ecf0f1;
        }
        
        h2 {
            color: #3498db;
            margin-top: 25px;
            margin-bottom: 15px;
            font-size: 1.4rem;
        }
        
        .input-section {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 25px;
        }
        
        .input-group {
            flex: 1;
            min-width: 300px;
        }
        
        label {
            display: block;
            margin-bottom: 8px;
            font-weight: bold;
            color: #2c3e50;
        }
        
        select, input[type="date"], input[type="text"] {
            width: 100%;
            padding: 12px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 16px;
            background-color: #f9f9f9;
        }
        
        .buttons {
            display: flex;
            gap: 15px;
            margin-top: 25px;
            justify-content: center;
        }
        
        button {
            padding: 12px 24px;
            border: none;
            border-radius: 5px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        
        #calculateBtn {
            background-color: #2ecc71;
            color: white;
        }
        
        #calculateBtn:hover {
            background-color: #27ae60;
        }
        
        #resetBtn {
            background-color: #e74c3c;
            color: white;
        }
        
        #resetBtn:hover {
            background-color: #c0392b;
        }
        
        #calculateAllBtn {
            background-color: #3498db;
            color: white;
        }
        
        #calculateAllBtn:hover {
            background-color: #2980b9;
        }
        
        .results-section {
            margin-top: 30px;
            display: flex;
            flex-direction: column;
            gap: 25px;
        }
        
        .result-card {
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            background-color: #f9f9f9;
        }
        
        .result-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 15px;
        }
        
        .result-title {
            font-size: 1.2rem;
            font-weight: bold;
            color: #2c3e50;
        }
        
        .toggle-btn {
            background: none;
            border: 1px solid #3498db;
            color: #3498db;
            padding: 5px 15px;
            border-radius: 5px;
            font-size: 14px;
        }
        
        .toggle-btn:hover {
            background-color: #3498db;
            color: white;
        }
        
        .result-content {
            max-height: 300px;
            overflow-y: auto;
        }
        
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        
        th, td {
            padding: 10px;
            text-align: left;
            border-bottom: 1px solid #ddd;
        }
        
        th {
            background-color: #f2f2f2;
            font-weight: bold;
        }
        
        .warning {
            background-color: #ffebee;
            border-left: 4px solid #f44336;
            padding: 15px;
            margin-top: 15px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .warning-icon {
            font-size: 24px;
            color: #f44336;
        }
        
        .warning-content h3 {
            margin: 0 0 8px 0;
            color: #c62828;
        }
        
        .warning-content p {
            margin: 5px 0;
        }
        
        .special-number {
            background-color: #fff3e0;
            padding: 3px 8px;
            border-radius: 4px;
            font-weight: bold;
            margin: 0 3px;
        }
        
        .found {
            background-color: #e8f5e9;
            color: #2e7d32;
        }
        
        .health-advice {
            background-color: #e3f2fd;
            border-left: 4px solid #2196f3;
            padding: 15px;
            margin-top: 15px;
        }
        
        .hidden {
            display: none;
        }
        
        @media (max-width: 768px) {
            .input-section {
                flex-direction: column;
            }
            
            .buttons {
                flex-direction: column;
            }
            
            button {
                width: 100%;
            }
        }
        
        .person-count {
            margin-top: 15px;
            font-style: italic;
            color: #7f8c8d;
        }
        
        .time-reference {
            font-size: 0.9em;
            color: #7f8c8d;
            margin-top: 5px;
        }
        
        .loading {
            text-align: center;
            padding: 20px;
            font-style: italic;
            color: #7f8c8d;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Tính Toán Số Học và Cảnh Báo Sức Khỏe</h1>
        
        <div class="input-section">
            <div class="input-group">
                <label for="personSelect">Ô 1: Chọn người</label>
                <select id="personSelect">
                    <option value="">-- Chọn một người --</option>
                    <!-- Danh sách người sẽ được thêm bằng JavaScript -->
                </select>
                <div class="person-count" id="personCount">Tổng cộng: 0 người</div>
            </div>
            
            <div class="input-group">
                <label for="birthDate">Ô 2: Ngày tháng năm sinh</label>
                <input type="date" id="birthDate">
            </div>
            
            <div class="input-group">
                <label for="targetDate">Ô 3: Ngày tháng năm muốn xem</label>
                <input type="date" id="targetDate" value="2024-01-01">
            </div>
        </div>
        
        <div class="buttons">
            <button id="calculateBtn">Tính toán cho 1 người</button>
            <button id="calculateAllBtn">Tính toán cho tất cả</button>
            <button id="resetBtn">Đặt lại</button>
        </div>
        
        <div class="results-section">
            <div class="result-card">
                <div class="result-header">
                    <div class="result-title">Kết quả tính toán cho 1 người</div>
                    <button class="toggle-btn" id="toggleSingleResult">Hiện/Ẩn</button>
                </div>
                <div class="result-content" id="singleResult">
                    <div class="loading">Chưa có dữ liệu. Vui lòng chọn người và nhấn "Tính toán cho 1 người".</div>
                </div>
            </div>
            
            <div class="result-card">
                <div class="result-header">
                    <div class="result-title">Kết quả tính toán cho tất cả người</div>
                    <button class="toggle-btn" id="toggleAllResult">Hiện/Ẩn</button>
                </div>
                <div class="result-content hidden" id="allResult">
                    <div class="loading">Chưa có dữ liệu. Vui lòng nhấn "Tính toán cho tất cả".</div>
                </div>
            </div>
            
            <div class="result-card">
                <div class="result-header">
                    <div class="result-title">Cảnh báo sức khỏe</div>
                    <button class="toggle-btn" id="toggleWarning">Hiện/Ẩn</button>
                </div>
                <div class="result-content" id="warningResult">
                    <div class="loading">Chưa có cảnh báo nào.</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Dữ liệu danh sách người
        const people = [
            { id: 1, name: "NGUYENKHACNANG", dob: "1944-06-04" },
            { id: 2, name: "TOTHIHA", dob: "1948-08-29" },
            { id: 3, name: "NGUYENMINHNAM", dob: "1971-03-03" },
            { id: 4, name: "THANTHIKIMANH", dob: "1981-09-23" },
            { id: 5, name: "NGUYENTONGANAN", dob: "2014-09-28" },
            { id: 6, name: "NGUYENTOMINHCHAU", dob: "2016-07-25" },
            { id: 7, name: "NGUYENTOBICHNGOC", dob: "2020-02-05" },
            { id: 8, name: "NGUYENTHIMINHHANG", dob: "1974-01-07" },
            { id: 9, name: "NGOQUYCUONG", dob: "1973-05-23" },
            { id: 10, name: "NGOGIABACH", dob: "2000-10-12" },
            { id: 11, name: "NGOGIALINH", dob: "2005-04-05" },
            { id: 12, name: "NGUYENTHIMINHPHUONG", dob: "1978-11-06" },
            { id: 13, name: "HOANGANHDUNG", dob: "1978-09-21" },
            { id: 14, name: "HOANGHAIVINH", dob: "2010-06-03" },
            { id: 15, name: "HOANGTHIENBACHANH", dob: "2015-11-14" },
            { id: 16, name: "TÔ KIM HUỆ", dob: "1960-08-09" },
            { id: 17, name: "NGUYỄN TUẤN ANH", dob: "1983-10-23" },
            { id: 18, name: "NGUYỄN THẾ ANH", dob: "2001-03-24" },
            { id: 19, name: "NGÔ THỊ MAI", dob: "1948-12-12" },
            { id: 20, name: "TÔ VIỆT HƯNG", dob: "1996-06-17" },
            { id: 21, name: "TÔ THỊ HỒNG", dob: "1964-10-10" },
            { id: 22, name: "VŨ VĂN HIỆP", dob: "1974-04-24" },
            { id: 23, name: "NGUYỄN THỊ CHI", dob: "1946-02-08" },
            { id: 24, name: "NGUYỄN TẤN BẮC", dob: "1957-11-30" },
            { id: 25, name: "NGUYỄN THỊ TÂM", dob: "1954-08-08" }
        ];

        // Bảng 1: Giờ và số thứ tự
        const timeTable = [];
        for (let hour = 18; hour <= 23; hour++) {
            for (let minute = 0; minute <= 59; minute++) {
                if (hour === 18 && minute === 0) continue; // Bắt đầu từ 18:01
                if (hour === 23 && minute > 0) break; // Kết thúc ở 23:00
                
                const timeStr = `${hour.toString().padStart(2, '0')}:${minute.toString().padStart(2, '0')}`;
                const sequenceNumber = 1080 + (hour - 18) * 60 + minute;
                timeTable.push({ time: timeStr, number: sequenceNumber });
            }
        }

        // Các số đặc biệt cần tìm
        const specialNumbersCalc3 = [14, 41, 27, 72];
        
        const specialNumbersCalc2 = [
            307, 111, 222, 333, 444, 555, 666, 777, 888, 999,
            159, 195, 168, 186, 267, 276, 249, 294, 285, 258,
            357, 375, 384, 348, 438, 483, 429, 492, 528, 582,
            537, 573, 519, 591, 627, 672, 618, 681, 726, 762,
            735, 753, 825, 852, 816, 861, 843, 834, 915, 951,
            924, 942
        ];

        // DOM Elements
        const personSelect = document.getElementById('personSelect');
        const birthDateInput = document.getElementById('birthDate');
        const targetDateInput = document.getElementById('targetDate');
        const calculateBtn = document.getElementById('calculateBtn');
        const calculateAllBtn = document.getElementById('calculateAllBtn');
        const resetBtn = document.getElementById('resetBtn');
        const singleResultDiv = document.getElementById('singleResult');
        const allResultDiv = document.getElementById('allResult');
        const warningResultDiv = document.getElementById('warningResult');
        const toggleSingleResultBtn = document.getElementById('toggleSingleResult');
        const toggleAllResultBtn = document.getElementById('toggleAllResult');
        const toggleWarningBtn = document.getElementById('toggleWarning');
        const personCountDiv = document.getElementById('personCount');

        // Khởi tạo trang
        function initializePage() {
            // Điền danh sách người vào select
            people.forEach(person => {
                const option = document.createElement('option');
                option.value = person.id;
                option.textContent = `${person.id}. ${person.name} (${formatDate(person.dob)})`;
                personSelect.appendChild(option);
            });
            
            // Cập nhật số lượng người
            personCountDiv.textContent = `Tổng cộng: ${people.length} người`;
            
            // Đặt ngày mặc định cho targetDate là hôm nay
            const today = new Date();
            targetDateInput.value = today.toISOString().split('T')[0];
            
            // Thêm sự kiện khi chọn người
            personSelect.addEventListener('change', function() {
                const selectedId = parseInt(this.value);
                if (selectedId) {
                    const selectedPerson = people.find(p => p.id === selectedId);
                    if (selectedPerson) {
                        birthDateInput.value = selectedPerson.dob;
                    }
                }
            });
            
            // Chọn người đầu tiên làm mặc định
            if (people.length > 0) {
                personSelect.value = people[0].id;
                birthDateInput.value = people[0].dob;
            }
        }

        // Định dạng ngày tháng
        function formatDate(dateString) {
            const date = new Date(dateString);
            const day = date.getDate().toString().padStart(2, '0');
            const month = (date.getMonth() + 1).toString().padStart(2, '0');
            const year = date.getFullYear();
            return `${day}/${month}/${year}`;
        }

        // Tính số ngày chênh lệch giữa hai ngày
        function calculateDateDifference(date1, date2) {
            const d1 = new Date(date1);
            const d2 = new Date(date2);
            const diffTime = Math.abs(d2 - d1);
            const diffDays = Math.ceil(diffTime / (1000 * 60 * 60 * 24));
            return diffDays;
        }

        // Tính toán cho một người
        function calculateForPerson(personId, targetDate) {
            const person = people.find(p => p.id === personId);
            if (!person) return null;
            
            const diffDays = calculateDateDifference(person.dob, targetDate);
            
            // Phép tính 1: Chia lấy kết quả chẵn cho các số trong bảng 1
            const calc1Results = [];
            for (const item of timeTable) {
                const result = Math.floor(diffDays / item.number);
                calc1Results.push({
                    time: item.time,
                    number: item.number,
                    result: result
                });
            }
            
            // Phép tính 2: Chia lấy kết quả dư cho các số trong bảng 1
            const calc2Results = [];
            for (const item of timeTable) {
                const result = diffDays % item.number;
                calc2Results.push({
                    time: item.time,
                    number: item.number,
                    result: result
                });
            }
            
            // Phép tính 3: Lấy kết quả chẵn của phép tính 1 chia cho các số trong bảng 1
            const calc3Results = [];
            for (let i = 0; i < timeTable.length; i++) {
                const item = timeTable[i];
                const calc1Result = calc1Results[i].result;
                const result = calc1Result !== 0 ? Math.floor(calc1Result / item.number) : 0;
                calc3Results.push({
                    time: item.time,
                    number: item.number,
                    result: result
                });
            }
            
            // Tìm các số đặc biệt trong phép tính 3
            const foundSpecialCalc3 = [];
            for (const item of calc3Results) {
                if (specialNumbersCalc3.includes(item.result)) {
                    foundSpecialCalc3.push({
                        time: item.time,
                        number: item.result
                    });
                }
            }
            
            // Tìm các số đặc biệt trong phép tính 2
            const foundSpecialCalc2 = [];
            for (const item of calc2Results) {
                if (specialNumbersCalc2.includes(item.result)) {
                    foundSpecialCalc2.push({
                        time: item.time,
                        number: item.result
                    });
                }
            }
            
            // Phép tính 4: Ghép kết quả chẵn của phép tính 1 với kết quả dư của phép tính 2
            const calc4Results = [];
            for (let i = 0; i < timeTable.length; i++) {
                const calc1Result = calc1Results[i].result;
                const calc2Result = calc2Results[i].result;
                const combinedResult = parseInt(`${calc1Result}${calc2Result}`);
                calc4Results.push({
                    time: timeTable[i].time,
                    number: timeTable[i].number,
                    result: combinedResult
                });
            }
            
            return {
                person,
                diffDays,
                calc1Results,
                calc2Results,
                calc3Results,
                calc4Results,
                foundSpecialCalc3,
                foundSpecialCalc2
            };
        }

        // Hiển thị kết quả cho một người
        function displaySingleResult(result) {
            if (!result) {
                singleResultDiv.innerHTML = '<div class="loading">Không có dữ liệu để hiển thị.</div>';
                return;
            }
            
            let html = `
                <h3>Thông tin người được tính</h3>
                <p><strong>Tên:</strong> ${result.person.name}</p>
                <p><strong>Ngày sinh:</strong> ${formatDate(result.person.dob)}</p>
                <p><strong>Ngày xem:</strong> ${formatDate(targetDateInput.value)}</p>
                <p><strong>Số ngày chênh lệch:</strong> ${result.diffDays} ngày</p>
                
                <h3>Các số đặc biệt tìm thấy</h3>
            `;
            
            if (result.foundSpecialCalc3.length > 0) {
                html += `<p><strong>Trong phép tính 3 (14,41,27,72):</strong> `;
                result.foundSpecialCalc3.forEach((item, index) => {
                    html += `<span class="special-number">${item.number}</span> (lúc ${item.time})`;
                    if (index < result.foundSpecialCalc3.length - 1) html += ", ";
                });
                html += `</p>`;
            } else {
                html += `<p><strong>Trong phép tính 3 (14,41,27,72):</strong> Không tìm thấy số nào.</p>`;
            }
            
            if (result.foundSpecialCalc2.length > 0) {
                html += `<p><strong>Trong phép tính 2 (các số đặc biệt):</strong> `;
                result.foundSpecialCalc2.forEach((item, index) => {
                    html += `<span class="special-number">${item.number}</span> (lúc ${item.time})`;
                    if (index < result.foundSpecialCalc2.length - 1) html += ", ";
                });
                html += `</p>`;
            } else {
                html += `<p><strong>Trong phép tính 2 (các số đặc biệt):</strong> Không tìm thấy số nào.</p>`;
            }
            
            // Hiển thị một phần nhỏ của các phép tính
            html += `
                <h3>Một số kết quả mẫu (từ 18:01 đến 18:10)</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Giờ</th>
                            <th>Số TT</th>
                            <th>Phép tính 1<br>(Chia chẵn)</th>
                            <th>Phép tính 2<br>(Chia dư)</th>
                            <th>Phép tính 3</th>
                            <th>Phép tính 4<br>(Ghép 1+2)</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            for (let i = 0; i < 10; i++) {
                html += `
                    <tr>
                        <td>${result.calc1Results[i].time}</td>
                        <td>${result.calc1Results[i].number}</td>
                        <td>${result.calc1Results[i].result}</td>
                        <td>${result.calc2Results[i].result}</td>
                        <td>${result.calc3Results[i].result}</td>
                        <td>${result.calc4Results[i].result}</td>
                    </tr>
                `;
            }
            
            html += `</tbody></table>`;
            html += `<p class="time-reference">Chỉ hiển thị 10 kết quả đầu tiên. Tổng cộng có ${timeTable.length} kết quả.</p>`;
            
            singleResultDiv.innerHTML = html;
        }

        // Tính toán cho tất cả mọi người
        function calculateForAll(targetDate) {
            const allResults = [];
            
            for (const person of people) {
                const result = calculateForPerson(person.id, targetDate);
                allResults.push(result);
            }
            
            return allResults;
        }

        // Hiển thị kết quả cho tất cả mọi người
        function displayAllResults(results) {
            if (!results || results.length === 0) {
                allResultDiv.innerHTML = '<div class="loading">Không có dữ liệu để hiển thị.</div>';
                return;
            }
            
            let html = `
                <h3>Kết quả tính toán cho ${results.length} người</h3>
                <table>
                    <thead>
                        <tr>
                            <th>STT</th>
                            <th>Tên</th>
                            <th>Ngày sinh</th>
                            <th>Chênh lệch<br>(ngày)</th>
                            <th>Số đặc biệt<br>tìm thấy (Phép 3)</th>
                            <th>Số đặc biệt<br>tìm thấy (Phép 2)</th>
                        </tr>
                    </thead>
                    <tbody>
            `;
            
            let totalWarnings = 0;
            
            for (const result of results) {
                const special3Count = result.foundSpecialCalc3.length;
                const special2Count = result.foundSpecialCalc2.length;
                totalWarnings += special3Count + special2Count;
                
                html += `
                    <tr>
                        <td>${result.person.id}</td>
                        <td>${result.person.name}</td>
                        <td>${formatDate(result.person.dob)}</td>
                        <td>${result.diffDays}</td>
                        <td>${special3Count > 0 ? `<span class="special-number found">${special3Count} số</span>` : '0'}</td>
                        <td>${special2Count > 0 ? `<span class="special-number found">${special2Count} số</span>` : '0'}</td>
                    </tr>
                `;
            }
            
            html += `</tbody></table>`;
            html += `<p class="time-reference">Tổng số cảnh báo tiềm ẩn: ${totalWarnings}</p>`;
            
            allResultDiv.innerHTML = html;
            
            // Hiển thị cảnh báo nếu có
            displayWarnings(results);
        }

        // Hiển thị cảnh báo sức khỏe
        function displayWarnings(results) {
            let warningHtml = '';
            let hasWarnings = false;
            
            // Kiểm tra từng người
            for (const result of results) {
                let personWarnings = [];
                
                // Kiểm tra số 307 trong phép tính 2 (tụt huyết áp)
                const bloodPressureWarning = result.foundSpecialCalc2.filter(item => item.number === 307);
                if (bloodPressureWarning.length > 0) {
                    bloodPressureWarning.forEach(item => {
                        personWarnings.push(`<strong>Tụt huyết áp (307)</strong> vào lúc <span class="special-number">${item.time}</span>`);
                    });
                }
                
                // Kiểm tra các số đặc biệt khác trong phép tính 2 (bệnh nặng)
                const otherSpecialNumbers = result.foundSpecialCalc2.filter(item => item.number !== 307);
                if (otherSpecialNumbers.length > 0) {
                    const numbers = otherSpecialNumbers.map(item => 
                        `<span class="special-number">${item.number}</span> (${item.time})`
                    ).join(', ');
                    personWarnings.push(`<strong>Bệnh nặng</strong> với các số: ${numbers}`);
                }
                
                // Kiểm tra số đặc biệt trong phép tính 3
                if (result.foundSpecialCalc3.length > 0) {
                    const numbers = result.foundSpecialCalc3.map(item => 
                        `<span class="special-number">${item.number}</span> (${item.time})`
                    ).join(', ');
                    personWarnings.push(`<strong>Cảnh báo đặc biệt</strong> với các số: ${numbers}`);
                }
                
                // Nếu người này có cảnh báo
                if (personWarnings.length > 0) {
                    hasWarnings = true;
                    warningHtml += `
                        <div class="warning">
                            <div class="warning-icon">⚠️</div>
                            <div class="warning-content">
                                <h3>${result.person.name} (${formatDate(result.person.dob)})</h3>
                                ${personWarnings.map(warning => `<p>${warning}</p>`).join('')}
                                <div class="health-advice">
                                    <p><strong>Khuyến nghị:</strong> Cẩn thận sức khỏe, tránh các hoạt động nguy hiểm vào các giờ trên, 
                                    kiểm tra sức khỏe định kỳ, ăn uống lành mạnh và mang theo thuốc khi cần thiết.</p>
                                </div>
                            </div>
                        </div>
                    `;
                }
            }
            
            if (hasWarnings) {
                warningResultDiv.innerHTML = `
                    <h3>Cảnh báo sức khỏe cho ${results.length} người</h3>
                    ${warningHtml}
                `;
            } else {
                warningResultDiv.innerHTML = '<div class="loading">Không có cảnh báo sức khỏe nào.</div>';
            }
        }

        // Xử lý sự kiện
        calculateBtn.addEventListener('click', function() {
            const selectedPersonId = parseInt(personSelect.value);
            const targetDate = targetDateInput.value;
            
            if (!selectedPersonId) {
                alert('Vui lòng chọn một người từ danh sách.');
                return;
            }
            
            if (!targetDate) {
                alert('Vui lòng chọn ngày muốn xem.');
                return;
            }
            
            const result = calculateForPerson(selectedPersonId, targetDate);
            displaySingleResult(result);
            
            // Mở phần kết quả
            singleResultDiv.classList.remove('hidden');
        });

        calculateAllBtn.addEventListener('click', function() {
            const targetDate = targetDateInput.value;
            
            if (!targetDate) {
                alert('Vui lòng chọn ngày muốn xem.');
                return;
            }
            
            const results = calculateForAll(targetDate);
            displayAllResults(results);
            
            // Mở phần kết quả
            allResultDiv.classList.remove('hidden');
            warningResultDiv.classList.remove('hidden');
        });

        resetBtn.addEventListener('click', function() {
            personSelect.selectedIndex = 0;
            if (people.length > 0) {
                personSelect.value = people[0].id;
                birthDateInput.value = people[0].dob;
            }
            
            const today = new Date();
            targetDateInput.value = today.toISOString().split('T')[0];
            
            singleResultDiv.innerHTML = '<div class="loading">Chưa có dữ liệu. Vui lòng chọn người và nhấn "Tính toán cho 1 người".</div>';
            allResultDiv.innerHTML = '<div class="loading">Chưa có dữ liệu. Vui lòng nhấn "Tính toán cho tất cả".</div>';
            warningResultDiv.innerHTML = '<div class="loading">Chưa có cảnh báo nào.</div>';
            
            // Ẩn các phần kết quả
            allResultDiv.classList.add('hidden');
        });

        // Xử lý sự kiện toggle
        toggleSingleResultBtn.addEventListener('click', function() {
            singleResultDiv.classList.toggle('hidden');
        });

        toggleAllResultBtn.addEventListener('click', function() {
            allResultDiv.classList.toggle('hidden');
        });

        toggleWarningBtn.addEventListener('click', function() {
            warningResultDiv.classList.toggle('hidden');
        });

        // Khởi tạo trang khi tải xong
        document.addEventListener('DOMContentLoaded', initializePage);
    </script>
</body>
</html>
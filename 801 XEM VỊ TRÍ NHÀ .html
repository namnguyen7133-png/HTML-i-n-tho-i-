<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Công cụ Đánh giá Tiêu chuẩn Nhà ở</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-color: #2c3e50;
            --secondary-color: #3498db;
            --accent-color: #e74c3c;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --light-color: #f8f9fa;
            --dark-color: #2c3e50;
            --shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            line-height: 1.6;
            color: #333;
            background: linear-gradient(135deg, #f5f7fa 0%, #e4e8f0 100%);
            padding-bottom: 50px;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 30px;
            padding: 30px;
            background: linear-gradient(to right, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: 12px;
            box-shadow: var(--shadow);
        }

        h1 {
            font-size: 2.2rem;
            margin-bottom: 10px;
        }

        .subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
        }

        .input-section {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-bottom: 40px;
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: var(--shadow);
            transition: var(--transition);
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(0, 0, 0, 0.15);
        }

        .card-title {
            font-size: 1.4rem;
            color: var(--primary-color);
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid var(--secondary-color);
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card-title i {
            color: var(--secondary-color);
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: var(--primary-color);
        }

        select, input {
            width: 100%;
            padding: 12px 15px;
            border: 1px solid #ddd;
            border-radius: 8px;
            font-size: 16px;
            transition: var(--transition);
        }

        select:focus, input:focus {
            outline: none;
            border-color: var(--secondary-color);
            box-shadow: 0 0 0 3px rgba(52, 152, 219, 0.2);
        }

        .checkbox-group {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 12px;
            margin-top: 15px;
        }

        .checkbox-label {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 8px;
            cursor: pointer;
            transition: var(--transition);
        }

        .checkbox-label:hover {
            background-color: #f8f9fa;
            border-color: var(--secondary-color);
        }

        .checkbox-label input {
            width: auto;
        }

        .result-section {
            margin-top: 40px;
        }

        .result-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 25px;
        }

        .results-card {
            background: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: var(--shadow);
        }

        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid #eee;
        }

        .results-title {
            font-size: 1.3rem;
            color: var(--primary-color);
        }

        .score-badge {
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: 600;
            color: white;
        }

        .score-excellent { background-color: var(--success-color); }
        .score-good { background-color: #2ecc71; }
        .score-average { background-color: var(--warning-color); }
        .score-poor { background-color: var(--accent-color); }

        .standards-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }

        .standards-table th, .standards-table td {
            padding: 12px 15px;
            text-align: left;
            border-bottom: 1px solid #eee;
        }

        .standards-table th {
            background-color: #f8f9fa;
            font-weight: 600;
            color: var(--primary-color);
        }

        .standards-table tr:hover {
            background-color: #f8f9fa;
        }

        .price-calculation {
            background: linear-gradient(to right, #27ae60, #2ecc71);
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin-top: 30px;
        }

        .price-title {
            font-size: 1.4rem;
            margin-bottom: 20px;
            text-align: center;
        }

        .price-result {
            font-size: 2rem;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
        }

        .price-range {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            font-size: 1.1rem;
        }

        .btn {
            display: block;
            width: 100%;
            padding: 15px;
            background-color: var(--secondary-color);
            color: white;
            border: none;
            border-radius: 8px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
            transition: var(--transition);
            margin-top: 20px;
        }

        .btn:hover {
            background-color: #2980b9;
            transform: translateY(-2px);
        }

        .location-tag {
            display: inline-block;
            padding: 6px 12px;
            background-color: #e3f2fd;
            color: var(--secondary-color);
            border-radius: 20px;
            margin: 5px;
            font-size: 0.9rem;
            cursor: pointer;
            transition: var(--transition);
        }

        .location-tag:hover {
            background-color: var(--secondary-color);
            color: white;
        }

        .location-tag.selected {
            background-color: var(--secondary-color);
            color: white;
        }

        .warning-text {
            color: var(--accent-color);
            font-weight: 600;
            margin-top: 10px;
            font-size: 0.9rem;
        }

        .info-text {
            color: #7f8c8d;
            font-size: 0.9rem;
            margin-top: 5px;
        }

        .standard-item {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px dashed #eee;
        }

        .standard-item:last-child {
            border-bottom: none;
        }

        .standard-name {
            font-weight: 600;
            color: var(--primary-color);
        }

        .standard-value {
            color: var(--success-color);
            font-weight: 600;
        }

        .standard-warning {
            color: var(--accent-color);
            font-weight: 600;
        }

        @media (max-width: 768px) {
            .input-section {
                grid-template-columns: 1fr;
            }
            
            .result-grid {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 1.8rem;
            }
            
            .checkbox-group {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-home"></i> Công cụ Đánh giá Tiêu chuẩn Nhà ở</h1>
            <p class="subtitle">Kiểm tra tiêu chuẩn kích thước, vị trí và tính toán giá nhà dựa trên các yếu tố đánh giá</p>
        </header>

        <div class="input-section">
            <div class="card">
                <div class="card-title">
                    <i class="fas fa-map-marker-alt"></i> 1. Chọn vị trí nhà
                </div>
                
                <div class="form-group">
                    <label>Vị trí nhà:</label>
                    <div id="locationTags">
                        <span class="location-tag" data-value="street">Mặt phố</span>
                        <span class="location-tag" data-value="alley">Mặt ngõ</span>
                        <span class="location-tag" data-value="lane">Mặt ngách</span>
                    </div>
                    <input type="text" id="customLocation" placeholder="Hoặc nhập vị trí khác..." style="margin-top: 15px;">
                </div>
                
                <div class="form-group">
                    <label>Diện tích nhà (m²):</label>
                    <input type="number" id="areaInput" min="20" max="500" value="120" step="10">
                    <div class="info-text">Nhập diện tích tổng của ngôi nhà</div>
                </div>
                
                <div class="form-group">
                    <label>Số người sinh sống:</label>
                    <select id="peopleCount">
                        <option value="4">4 người</option>
                        <option value="5">5 người</option>
                        <option value="6">6 người</option>
                        <option value="7">7 người</option>
                        <option value="8">8 người</option>
                    </select>
                </div>
            </div>
            
            <div class="card">
                <div class="card-title">
                    <i class="fas fa-check-circle"></i> 2. Chọn tiện ích xung quanh
                </div>
                
                <div class="form-group">
                    <label>Tiện ích công cộng gần nhà:</label>
                    <div class="checkbox-group">
                        <label class="checkbox-label">
                            <input type="checkbox" name="amenities" value="school">
                            <span>Trường học</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="amenities" value="hospital">
                            <span>Bệnh viện</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="amenities" value="market">
                            <span>Chợ/Siêu thị</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="amenities" value="park">
                            <span>Công viên</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="amenities" value="bus">
                            <span>Trạm xe buýt</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="amenities" value="bank">
                            <span>Ngân hàng</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="amenities" value="restaurant">
                            <span>Nhà hàng</span>
                        </label>
                        <label class="checkbox-label">
                            <input type="checkbox" name="amenities" value="gym">
                            <span>Phòng tập gym</span>
                        </label>
                    </div>
                </div>
                
                <div class="form-group">
                    <label>Tiện ích đặc biệt khác:</label>
                    <input type="text" id="otherAmenities" placeholder="Ví dụ: gần công viên nước, trung tâm thương mại...">
                </div>
            </div>
        </div>
        
        <button class="btn" id="evaluateBtn">
            <i class="fas fa-calculator"></i> Đánh giá Tiêu chuẩn & Tính Giá Nhà
        </button>
        
        <div class="result-section">
            <div class="result-grid">
                <div class="results-card">
                    <div class="results-header">
                        <div class="results-title">Tiêu chuẩn kích thước tối thiểu</div>
                        <div id="sizeScore" class="score-badge score-good">Đang đánh giá...</div>
                    </div>
                    
                    <div id="sizeStandards">
                        <!-- Kết quả đánh giá kích thước sẽ hiển thị ở đây -->
                        <p>Vui lòng nhấn nút "Đánh giá" để xem kết quả</p>
                    </div>
                </div>
                
                <div class="results-card">
                    <div class="results-header">
                        <div class="results-title">Tiện ích xung quanh</div>
                        <div id="amenityScore" class="score-badge score-average">Đang đánh giá...</div>
                    </div>
                    
                    <div id="amenityResults">
                        <!-- Kết quả đánh giá tiện ích sẽ hiển thị ở đây -->
                        <p>Vui lòng nhấn nút "Đánh giá" để xem kết quả</p>
                    </div>
                </div>
            </div>
            
            <div class="price-calculation">
                <div class="price-title">Giá nhà ước tính theo vị trí và diện tích</div>
                <div class="price-result" id="priceResult">0 VND</div>
                <div class="price-range">
                    <div id="minPrice">Giá thấp nhất: 0 VND</div>
                    <div id="maxPrice">Giá cao nhất: 0 VND</div>
                </div>
                <div class="info-text" style="text-align: center; margin-top: 15px; color: rgba(255,255,255,0.9);">
                    Giá trên chỉ mang tính chất tham khảo, có thể thay đổi theo thực tế thị trường
                </div>
            </div>
        </div>
    </div>

    <script>
        // Dữ liệu tiêu chuẩn
        const sizeStandards = {
            "Lối vào": { min: 1.2, max: 1.5, unit: "m", note: "Đủ không gian cho di chuyển và đỗ xe" },
            "Đường lái xe và lối đỗ xe": { min: 2.5, max: 3.5, unit: "m/xe", note: "Đảm bảo đủ rộng để xe vào và ra dễ dàng" },
            "Sân trước": { min: 2, max: 3, unit: "m", note: "Tạo không gian thoáng đãng và chào đón" },
            "Sân sau": { min: 4, max: 5, unit: "m", note: "Đủ rộng cho các hoạt động ngoài trời" },
            "Phòng khách": { min: 15, max: 20, unit: "m²", note: "Từ 25 - 30 mét vuông cho phòng lớn hơn" },
            "Khoảng cách giữa nội thất": { min: 1.2, max: 1.5, unit: "m", note: "Đảm bảo di chuyển dễ dàng xung quanh các món đồ nội thất" },
            "Phòng ăn": { min: 10, max: 15, unit: "m²", note: "Đủ không gian cho bàn ăn và ghế" },
            "Khoảng cách giữa ghế": { min: 0.9, max: 1, unit: "m", note: "Đảm bảo thoải mái khi di chuyển" },
            "Nhà bếp": { min: 8, max: 12, unit: "m²", note: "Từ 15 mét vuông trở lên cho bếp lớn hơn" },
            "Khoảng cách khu vực bếp": { min: 1.2, max: 1.5, unit: "m", note: "Tiện lợi khi nấu nướng, rửa và chuẩn bị thực phẩm" },
            "Phòng ngủ chính": { min: 12, max: 15, unit: "m²", note: "Từ 20 mét vuông trở lên cho phòng lớn hơn" },
            "Khoảng cách xung quanh giường": { min: 0.75, max: 1, unit: "m", note: "Đảm bảo di chuyển dễ dàng quanh giường" },
            "Phòng ngủ phụ": { min: 9, max: 12, unit: "m²", note: "Đủ không gian cho giường và các món đồ nội thất cơ bản" },
            "Khoảng cách giữa giường và tủ": { min: 0.6, max: 0.9, unit: "m", note: "Đảm bảo dễ dàng sử dụng các món đồ nội thất" },
            "Nhà tắm": { min: 4, max: 6, unit: "m²", note: "Tối thiểu cho nhà tắm với các thiết bị cơ bản" },
            "Khoảng cách giữa thiết bị": { min: 0.6, max: 0.9, unit: "m", note: "Tiện lợi khi sử dụng các thiết bị vệ sinh" },
            "Nhà vệ sinh riêng": { min: 2, max: 3, unit: "m²", note: "Đủ không gian cho các thiết bị cơ bản" },
            "Hành lang": { min: 1.2, max: 1.5, unit: "m", note: "Đảm bảo di chuyển thoải mái trong nhà" },
            "Cửa ra vào": { min: 0.9, max: 1, unit: "m", note: "Tối thiểu chiều rộng cửa ra vào" },
            "Cửa sổ": { minRatio: 0.1, unit: "diện tích sàn", note: "Đảm bảo cung cấp ánh sáng tự nhiên và thông gió" },
            "Tủ quần áo": { minDepth: 0.6, maxDepth: 0.75, minWidth: 1.5, unit: "m", note: "1.5 - 2 mét chiều rộng cho mỗi người sử dụng" }
        };

        // Diện tích tối thiểu theo số người
        const areaPerPeople = {
            "4": { min: 90, max: 120, note: "2 phòng ngủ (mỗi phòng từ 12 - 15 m²), 1 phòng khách (15 - 20 m²), 1 phòng ăn (10 - 15 m²), 1 nhà bếp (8 - 12 m²), 1 - 2 phòng tắm và vệ sinh" },
            "5": { min: 120, max: 150, note: "3 phòng ngủ (mỗi phòng từ 12 - 15 m²), 1 phòng khách (20 - 25 m²), 1 phòng ăn (15 m²), 1 nhà bếp (10 - 15 m²), 2 phòng tắm và vệ sinh" },
            "6": { min: 150, max: 180, note: "3 phòng ngủ lớn (từ 15 - 20 m²), 1 phòng khách (25 - 30 m²), 1 phòng ăn (15 - 20 m²), 1 nhà bếp (15 - 20 m²), 2 - 3 phòng tắm và vệ sinh" },
            "7": { min: 180, max: 210, note: "4 phòng ngủ (mỗi phòng từ 15 - 20 m²), 1 phòng khách (30 - 35 m²), 1 phòng ăn (20 m²), 1 nhà bếp (15 - 20 m²), 2 - 3 phòng tắm và vệ sinh" },
            "8": { min: 210, max: 240, note: "4 - 5 phòng ngủ (mỗi phòng từ 15 - 20 m²), 1 phòng khách (35 - 40 m²), 1 phòng ăn (20 m²), 1 nhà bếp (20 m²), 2 - 3 phòng tắm và vệ sinh" }
        };

        // Giá theo vị trí (VND/m²)
        const pricePerLocation = {
            "street": { name: "Mặt phố", min: 36000000, max: 96000000 },
            "alley": { name: "Mặt ngõ", min: 19200000, max: 36000000 },
            "lane": { name: "Mặt ngách", min: 12000000, max: 24000000 },
            "custom": { name: "Vị trí khác", min: 10000000, max: 30000000 }
        };

        // Biến lưu vị trí được chọn
        let selectedLocation = "street";
        
        // Khởi tạo trang
        document.addEventListener('DOMContentLoaded', function() {
            // Thiết lập sự kiện cho các tag vị trí
            document.querySelectorAll('.location-tag').forEach(tag => {
                tag.addEventListener('click', function() {
                    // Bỏ chọn tất cả
                    document.querySelectorAll('.location-tag').forEach(t => t.classList.remove('selected'));
                    // Chọn tag được click
                    this.classList.add('selected');
                    selectedLocation = this.getAttribute('data-value');
                    
                    // Xóa giá trị nhập tùy chỉnh
                    document.getElementById('customLocation').value = '';
                });
            });
            
            // Chọn tag đầu tiên mặc định
            document.querySelector('.location-tag').classList.add('selected');
            
            // Sự kiện cho ô nhập vị trí tùy chỉnh
            document.getElementById('customLocation').addEventListener('input', function() {
                if (this.value.trim() !== '') {
                    // Bỏ chọn tất cả tag
                    document.querySelectorAll('.location-tag').forEach(t => t.classList.remove('selected'));
                    selectedLocation = "custom";
                }
            });
            
            // Sự kiện cho nút đánh giá
            document.getElementById('evaluateBtn').addEventListener('click', evaluateHouse);
            
            // Đánh giá mẫu ban đầu
            evaluateHouse();
        });

        // Hàm đánh giá nhà
        function evaluateHouse() {
            // Lấy giá trị từ form
            const area = parseFloat(document.getElementById('areaInput').value) || 120;
            const peopleCount = document.getElementById('peopleCount').value;
            
            // Lấy vị trí
            let location = selectedLocation;
            const customLocation = document.getElementById('customLocation').value.trim();
            if (customLocation !== '' && location === "custom") {
                // Cập nhật tên vị trí tùy chỉnh
                pricePerLocation.custom.name = customLocation;
            }
            
            // Lấy tiện ích được chọn
            const amenities = [];
            document.querySelectorAll('input[name="amenities"]:checked').forEach(checkbox => {
                amenities.push(checkbox.value);
            });
            
            // Thêm tiện ích khác nếu có
            const otherAmenities = document.getElementById('otherAmenities').value.trim();
            if (otherAmenities !== '') {
                amenities.push('other');
            }
            
            // Đánh giá kích thước
            evaluateSizeStandards(area, peopleCount);
            
            // Đánh giá tiện ích
            evaluateAmenities(amenities, otherAmenities);
            
            // Tính giá nhà
            calculatePrice(area, location);
        }

        // Đánh giá tiêu chuẩn kích thước
        function evaluateSizeStandards(area, peopleCount) {
            const sizeResultsDiv = document.getElementById('sizeStandards');
            let score = 100;
            let warnings = 0;
            let resultsHTML = '';
            
            // Kiểm tra diện tích theo số người
            const areaStandard = areaPerPeople[peopleCount];
            const areaNeeded = areaStandard ? areaStandard.min : 90;
            
            if (area < areaNeeded) {
                score -= 30;
                warnings++;
                resultsHTML += `
                    <div class="standard-item">
                        <div class="standard-name">Diện tích cho ${peopleCount} người:</div>
                        <div class="standard-warning">${area} m² (THIẾU: cần tối thiểu ${areaNeeded} m²)</div>
                        <div class="info-text">${areaStandard.note}</div>
                    </div>
                `;
            } else {
                resultsHTML += `
                    <div class="standard-item">
                        <div class="standard-name">Diện tích cho ${peopleCount} người:</div>
                        <div class="standard-value">${area} m² (ĐẠT: cần tối thiểu ${areaNeeded} m²)</div>
                        <div class="info-text">${areaStandard.note}</div>
                    </div>
                `;
            }
            
            // Thêm một số tiêu chuẩn mẫu
            const sampleStandards = ["Phòng khách", "Phòng ngủ chính", "Nhà bếp", "Nhà tắm"];
            
            sampleStandards.forEach(standard => {
                const std = sizeStandards[standard];
                if (std) {
                    // Tạo giá trị giả lập ngẫu nhiên cho mục đích minh họa
                    const randomValue = std.min + Math.random() * (std.max - std.min);
                    const isPassing = randomValue >= std.min;
                    
                    if (!isPassing) {
                        score -= 10;
                        warnings++;
                        resultsHTML += `
                            <div class="standard-item">
                                <div class="standard-name">${standard}:</div>
                                <div class="standard-warning">${randomValue.toFixed(1)} ${std.unit} (THIẾU: cần tối thiểu ${std.min} ${std.unit})</div>
                                <div class="info-text">${std.note}</div>
                            </div>
                        `;
                    } else {
                        resultsHTML += `
                            <div class="standard-item">
                                <div class="standard-name">${standard}:</div>
                                <div class="standard-value">${randomValue.toFixed(1)} ${std.unit} (ĐẠT: cần ${std.min}-${std.max} ${std.unit})</div>
                                <div class="info-text">${std.note}</div>
                            </div>
                        `;
                    }
                }
            });
            
            // Cập nhật điểm số
            const sizeScoreDiv = document.getElementById('sizeScore');
            sizeScoreDiv.textContent = `${score}/100 điểm`;
            
            if (score >= 80) {
                sizeScoreDiv.className = "score-badge score-excellent";
            } else if (score >= 60) {
                sizeScoreDiv.className = "score-badge score-good";
            } else if (score >= 40) {
                sizeScoreDiv.className = "score-badge score-average";
            } else {
                sizeScoreDiv.className = "score-badge score-poor";
            }
            
            // Thêm cảnh báo nếu có
            if (warnings > 0) {
                resultsHTML += `<div class="warning-text">⚠️ Có ${warnings} tiêu chuẩn không đạt yêu cầu</div>`;
            }
            
            sizeResultsDiv.innerHTML = resultsHTML;
        }

        // Đánh giá tiện ích
        function evaluateAmenities(amenities, otherAmenities) {
            const amenityResultsDiv = document.getElementById('amenityResults');
            const amenityScoreDiv = document.getElementById('amenityScore');
            
            let score = 0;
            let maxScore = 8; // Tối đa 8 tiện ích cơ bản
            
            // Điểm cho mỗi tiện ích cơ bản
            const baseAmenities = ["school", "hospital", "market", "park", "bus", "bank", "restaurant", "gym"];
            const amenityNames = {
                "school": "Trường học",
                "hospital": "Bệnh viện",
                "market": "Chợ/Siêu thị",
                "park": "Công viên",
                "bus": "Trạm xe buýt",
                "bank": "Ngân hàng",
                "restaurant": "Nhà hàng",
                "gym": "Phòng tập gym",
                "other": "Tiện ích khác"
            };
            
            let resultsHTML = '<div class="standard-item">';
            
            baseAmenities.forEach(amenity => {
                if (amenities.includes(amenity)) {
                    score += 1;
                    resultsHTML += `<div><i class="fas fa-check" style="color: #27ae60;"></i> ${amenityNames[amenity]}</div>`;
                } else {
                    resultsHTML += `<div><i class="fas fa-times" style="color: #e74c3c;"></i> ${amenityNames[amenity]}</div>`;
                }
            });
            
            resultsHTML += '</div>';
            
            // Thêm tiện ích khác nếu có
            if (amenities.includes('other') && otherAmenities) {
                score += 1;
                resultsHTML += `<div class="standard-item">
                    <div><i class="fas fa-check" style="color: #27ae60;"></i> Tiện ích khác: ${otherAmenities}</div>
                </div>`;
            }
            
            // Tính điểm phần trăm
            const percentScore = Math.round((score / maxScore) * 100);
            
            // Cập nhật điểm số
            amenityScoreDiv.textContent = `${percentScore}/100 điểm`;
            
            if (percentScore >= 80) {
                amenityScoreDiv.className = "score-badge score-excellent";
                resultsHTML += `<div class="info-text">✓ Khu vực có nhiều tiện ích, thuận tiện cho sinh hoạt</div>`;
            } else if (percentScore >= 60) {
                amenityScoreDiv.className = "score-badge score-good";
                resultsHTML += `<div class="info-text">✓ Khu vực có đủ tiện ích cơ bản</div>`;
            } else if (percentScore >= 40) {
                amenityScoreDiv.className = "score-badge score-average";
                resultsHTML += `<div class="warning-text">⚠️ Khu vực thiếu một số tiện ích quan trọng</div>`;
            } else {
                amenityScoreDiv.className = "score-badge score-poor";
                resultsHTML += `<div class="warning-text">⚠️ Khu vực thiếu nhiều tiện ích cơ bản</div>`;
            }
            
            amenityResultsDiv.innerHTML = resultsHTML;
        }

        // Tính giá nhà
        function calculatePrice(area, location) {
            const priceData = pricePerLocation[location] || pricePerLocation.street;
            const minPrice = area * priceData.min;
            const maxPrice = area * priceData.max;
            
            // Định dạng số tiền
            const formatCurrency = (amount) => {
                return amount.toLocaleString('vi-VN') + ' VND';
            };
            
            // Hiển thị kết quả
            document.getElementById('priceResult').textContent = formatCurrency((minPrice + maxPrice) / 2);
            document.getElementById('minPrice').textContent = `Giá thấp nhất: ${formatCurrency(minPrice)}`;
            document.getElementById('maxPrice').textContent = `Giá cao nhất: ${formatCurrency(maxPrice)}`;
            
            // Thêm thông tin vị trí
            const locationInfo = document.createElement('div');
            locationInfo.className = 'info-text';
            locationInfo.style.textAlign = 'center';
            locationInfo.style.marginTop = '10px';
            locationInfo.innerHTML = `Vị trí: <strong>${priceData.name}</strong> | Giá: ${(priceData.min/1000000).toFixed(0)}-${(priceData.max/1000000).toFixed(0)} triệu VND/m²`;
            
            // Xóa thông tin cũ nếu có
            const oldInfo = document.querySelector('.price-calculation .info-text:nth-child(4)');
            if (oldInfo) oldInfo.remove();
            
            document.querySelector('.price-calculation').appendChild(locationInfo);
        }

        // Hàm định dạng số
        function formatNumber(num) {
            return num.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
        }
    </script>
</body>
</html>
<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>M√†u s·∫Øc ‚Äì BPM ‚Äì C·∫£m x√∫c ‚Äì Tone da (M√£ HEX ƒë·∫ßy ƒë·ªß)</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: linear-gradient(135deg, #6a11cb 0%, #2575fc 100%);
            color: #333;
            min-height: 100vh;
            padding: 20px;
            overflow-x: hidden;
        }

        .container {
            max-width: 100%;
            margin: 0 auto;
            background-color: rgba(255, 255, 255, 0.97);
            border-radius: 20px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
            overflow: hidden;
            padding: 20px;
        }

        header {
            text-align: center;
            margin-bottom: 25px;
            padding-bottom: 20px;
            border-bottom: 2px solid #f0f0f0;
        }

        h1 {
            color: #4a4a9c;
            font-size: 1.8rem;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            flex-wrap: wrap;
        }

        h1 i {
            color: #ff6b8b;
        }

        .subtitle {
            color: #666;
            font-size: 1rem;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.5;
        }

        /* Grid ch√≠nh cho 9 √¥ */
        .scroll-grid {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 15px;
            margin-bottom: 25px;
        }

        @media (max-width: 1400px) {
            .scroll-grid {
                grid-template-columns: repeat(4, 1fr);
            }
        }

        @media (max-width: 1200px) {
            .scroll-grid {
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 900px) {
            .scroll-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 600px) {
            .scroll-grid {
                grid-template-columns: 1fr;
            }
            
            h1 {
                font-size: 1.5rem;
            }
            
            .container {
                padding: 15px;
            }
        }

        /* √î danh s√°ch cu·ªôn */
        .scroll-box {
            background: white;
            border-radius: 15px;
            padding: 15px;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
            border: 2px solid #e0e0e0;
            transition: all 0.3s ease;
            height: 280px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
            position: relative;
            cursor: pointer;
        }

        .scroll-box:hover {
            border-color: #7c7ce0;
            transform: translateY(-5px);
            box-shadow: 0 12px 24px rgba(124, 124, 224, 0.2);
        }

        .scroll-box.active {
            border-color: #ff6b8b;
            box-shadow: 0 0 0 3px rgba(255, 107, 139, 0.3);
        }

        .box-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 12px;
            padding-bottom: 10px;
            border-bottom: 1px solid #eee;
            flex-shrink: 0;
        }

        .box-header h3 {
            color: #4a4a9c;
            font-size: 1rem;
            margin: 0;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .box-count {
            background: #7c7ce0;
            color: white;
            font-size: 0.75rem;
            padding: 3px 8px;
            border-radius: 12px;
            font-weight: 600;
        }

        .scroll-list-container {
            flex: 1;
            position: relative;
            overflow: hidden;
        }

        .scroll-list {
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            overflow-y: auto;
            padding-right: 6px;
            display: none;
        }

        .scroll-list.active {
            display: block;
        }

        .scroll-list::-webkit-scrollbar {
            width: 5px;
        }

        .scroll-list::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 8px;
        }

        .scroll-list::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 8px;
        }

        .scroll-list::-webkit-scrollbar-thumb:hover {
            background: #a1a1a1;
        }

        .scroll-item {
            padding: 8px 10px;
            margin-bottom: 5px;
            background: #f9f9ff;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.2s ease;
            border-left: 4px solid transparent;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .scroll-item:hover {
            background: #e6e6ff;
            transform: translateX(3px);
        }

        .scroll-item.selected {
            background: #e6e6ff;
            border-left-color: #ff6b8b;
            font-weight: 600;
        }

        .item-details {
            font-size: 0.8rem;
            color: #666;
        }

        /* √î gi·∫£i th√≠ch t·ª´ kh√≥ */
        .explanation-box {
            grid-column: 1 / -1;
            background: linear-gradient(to right, #fff9e6, #fff3cc);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            border: 2px solid #ffd966;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        }

        .explanation-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
            color: #b36b00;
        }

        .explanation-header h3 {
            margin: 0;
            font-size: 1.2rem;
        }

        .explanation-content {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 15px;
        }

        .term-item {
            background: white;
            border-radius: 8px;
            padding: 12px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            border-left: 4px solid #7c7ce0;
            transition: transform 0.3s ease;
        }

        .term-item:hover {
            transform: translateY(-3px);
        }

        .term-title {
            font-weight: 600;
            color: #4a4a9c;
            margin-bottom: 6px;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 1rem;
        }

        .term-description {
            color: #666;
            font-size: 0.9rem;
            line-height: 1.4;
        }

        /* N√∫t x√≥a v√† ƒëi·ªÅu khi·ªÉn */
        .controls {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            flex-wrap: wrap;
            gap: 15px;
        }

        .clear-btn {
            background: linear-gradient(to right, #ff416c, #ff4b2b);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 10px;
            font-weight: 600;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: all 0.3s ease;
            font-size: 0.95rem;
            box-shadow: 0 6px 12px rgba(255, 65, 108, 0.3);
        }

        .clear-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(255, 65, 108, 0.4);
        }

        .selection-info {
            background: #f0f7ff;
            padding: 10px 16px;
            border-radius: 10px;
            color: #4a4a9c;
            font-weight: 600;
            border-left: 4px solid #7c7ce0;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.9rem;
        }

        /* B·∫£ng d·ªØ li·ªáu */
        .data-table {
            width: 100%;
            border-collapse: separate;
            border-spacing: 0;
            margin-top: 15px;
            border-radius: 15px;
            overflow: hidden;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.08);
            background: white;
        }

        th {
            background: linear-gradient(to right, #4a4a9c, #7c7ce0);
            color: white;
            font-weight: 600;
            text-align: left;
            padding: 15px 12px;
            position: sticky;
            top: 0;
            z-index: 10;
        }

        td {
            padding: 12px;
            border-bottom: 1px solid #f0f0f0;
            transition: background-color 0.2s ease;
        }

        tr:hover td {
            background-color: #f9f9ff;
        }

        .color-cell {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .color-preview {
            width: 60px;
            height: 35px;
            border: 1px solid #ddd;
            border-radius: 6px;
            box-shadow: 0 3px 6px rgba(0, 0, 0, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 0.7rem;
            font-weight: bold;
            color: white;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
            position: relative;
        }

        .color-hex {
            font-family: 'Courier New', monospace;
            font-weight: 600;
            font-size: 0.95rem;
            background: #f8f9fa;
            padding: 4px 8px;
            border-radius: 4px;
            border: 1px solid #e0e0e0;
        }

        /* PATTERN */
        .caro-den {
            background:
                linear-gradient(45deg, #000 25%, transparent 25%),
                linear-gradient(-45deg, #000 25%, transparent 25%),
                linear-gradient(45deg, transparent 75%, #000 75%),
                linear-gradient(-45deg, transparent 75%, #000 75%);
            background-size: 10px 10px;
            background-color: #fff;
        }

        .ke-ngang-xanh {
            background: repeating-linear-gradient(
                to bottom,
                #2e8b57,
                #2e8b57 6px,
                #ffffff 6px,
                #ffffff 12px
            );
        }

        .ke-ngang-den {
            background: repeating-linear-gradient(
                to bottom,
                #000,
                #000 6px,
                #fff 6px,
                #fff 12px
            );
        }

        .highlighted {
            background-color: #fffacd !important;
            animation: pulse 1.5s infinite;
        }

        @keyframes pulse {
            0% { background-color: #fffacd; }
            50% { background-color: #fff6b3; }
            100% { background-color: #fffacd; }
        }

        /* Footer */
        .footer {
            text-align: center;
            margin-top: 30px;
            color: #777;
            font-size: 0.85rem;
            padding-top: 15px;
            border-top: 1px solid #eee;
        }

        /* Th√¥ng b√°o */
        .notification {
            position: fixed;
            bottom: 15px;
            right: 15px;
            background: #4caf50;
            color: white;
            padding: 10px 20px;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            display: flex;
            align-items: center;
            gap: 8px;
            z-index: 1000;
            transform: translateY(100px);
            opacity: 0;
            transition: all 0.3s ease;
            font-size: 0.9rem;
        }

        .notification.show {
            transform: translateY(0);
            opacity: 1;
        }

        /* B·ªô l·ªçc */
        .filter-controls {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 15px;
            align-items: center;
        }

        .filter-controls label {
            font-weight: 600;
            color: #4a4a9c;
            font-size: 0.9rem;
        }

        .filter-controls input, .filter-controls select {
            padding: 8px 12px;
            border: 2px solid #d1d1e9;
            border-radius: 8px;
            font-size: 0.9rem;
            transition: all 0.3s ease;
        }

        .filter-controls input:focus, .filter-controls select:focus {
            border-color: #7c7ce0;
            box-shadow: 0 0 0 3px rgba(124, 124, 224, 0.2);
            outline: none;
        }

        .filter-controls button {
            background: linear-gradient(to right, #4a4a9c, #7c7ce0);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .filter-controls button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(124, 124, 224, 0.3);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1><i class="fas fa-palette"></i> M√†u s·∫Øc ‚Äì BPM ‚Äì C·∫£m x√∫c ‚Äì Tone da <span style="color:#ff6b8b;">(M√£ HEX ƒë·∫ßy ƒë·ªß)</span></h1>
            <p class="subtitle">Nh·∫•p v√†o t·ª´ng √¥ ƒë·ªÉ hi·ªÉn th·ªã danh s√°ch cu·ªôn. Ch·ªçn m·ª•c t·ª´ danh s√°ch ƒë·ªÉ l·ªçc b·∫£ng d·ªØ li·ªáu. S·ª≠ d·ª•ng n√∫t "X√≥a nh·∫≠p l·∫°i" ƒë·ªÉ ƒë·∫∑t l·∫°i t·∫•t c·∫£ l·ª±a ch·ªçn.</p>
        </header>

        <div class="controls">
            <div class="selection-info">
                <i class="fas fa-mouse-pointer"></i>
                <span id="selectedCount">0 m·ª•c ƒë∆∞·ª£c ch·ªçn</span>
            </div>
            <button class="clear-btn" onclick="clearAllSelections()">
                <i class="fas fa-eraser"></i> X√≥a nh·∫≠p l·∫°i
            </button>
        </div>

        <!-- 9 √¥ danh s√°ch cu·ªôn -->
        <div class="scroll-grid">
            <!-- √î 1: T√™n m√†u -->
            <div class="scroll-box" id="box-color" onclick="toggleScrollList('color')">
                <div class="box-header">
                    <h3><i class="fas fa-fill-drip"></i> T√™n m√†u</h3>
                    <span class="box-count" id="count-color">15</span>
                </div>
                <div class="scroll-list-container">
                    <div class="scroll-list" id="list-color">
                        <!-- Danh s√°ch t√™n m√†u s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JS -->
                    </div>
                </div>
            </div>
            
            <!-- √î 2: Tone da -->
            <div class="scroll-box" id="box-tone" onclick="toggleScrollList('tone')">
                <div class="box-header">
                    <h3><i class="fas fa-user"></i> Tone da</h3>
                    <span class="box-count" id="count-tone">3</span>
                </div>
                <div class="scroll-list-container">
                    <div class="scroll-list" id="list-tone">
                        <!-- Danh s√°ch tone da s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JS -->
                    </div>
                </div>
            </div>
            
            <!-- √î 3: BPM -->
            <div class="scroll-box" id="box-bpm" onclick="toggleScrollList('bpm')">
                <div class="box-header">
                    <h3><i class="fas fa-heartbeat"></i> BPM</h3>
                    <span class="box-count" id="count-bpm">11</span>
                </div>
                <div class="scroll-list-container">
                    <div class="scroll-list" id="list-bpm">
                        <!-- Danh s√°ch BPM s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JS -->
                    </div>
                </div>
            </div>
            
            <!-- √î 4: Tr·∫°ng th√°i -->
            <div class="scroll-box" id="box-state" onclick="toggleScrollList('state')">
                <div class="box-header">
                    <h3><i class="fas fa-brain"></i> Tr·∫°ng th√°i</h3>
                    <span class="box-count" id="count-state">15</span>
                </div>
                <div class="scroll-list-container">
                    <div class="scroll-list" id="list-state">
                        <!-- Danh s√°ch tr·∫°ng th√°i s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JS -->
                    </div>
                </div>
            </div>
            
            <!-- √î 5: M√£ HEX -->
            <div class="scroll-box" id="box-hex" onclick="toggleScrollList('hex')">
                <div class="box-header">
                    <h3><i class="fas fa-hashtag"></i> M√£ HEX</h3>
                    <span class="box-count" id="count-hex">12</span>
                </div>
                <div class="scroll-list-container">
                    <div class="scroll-list" id="list-hex">
                        <!-- Danh s√°ch m√£ HEX s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JS -->
                    </div>
                </div>
            </div>
            
            <!-- √î 6: Ph√¢n lo·∫°i BPM -->
            <div class="scroll-box" id="box-bpm-category" onclick="toggleScrollList('bpm-category')">
                <div class="box-header">
                    <h3><i class="fas fa-heart"></i> Ph√¢n lo·∫°i BPM</h3>
                    <span class="box-count" id="count-bpm-category">4</span>
                </div>
                <div class="scroll-list-container">
                    <div class="scroll-list" id="list-bpm-category">
                        <!-- Danh s√°ch ph√¢n lo·∫°i BPM s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JS -->
                    </div>
                </div>
            </div>
            
            <!-- √î 7: Lo·∫°i hoa vƒÉn -->
            <div class="scroll-box" id="box-pattern" onclick="toggleScrollList('pattern')">
                <div class="box-header">
                    <h3><i class="fas fa-shapes"></i> Lo·∫°i hoa vƒÉn</h3>
                    <span class="box-count" id="count-pattern">3</span>
                </div>
                <div class="scroll-list-container">
                    <div class="scroll-list" id="list-pattern">
                        <!-- Danh s√°ch hoa vƒÉn s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JS -->
                    </div>
                </div>
            </div>
            
            <!-- √î 8: Nh√≥m c·∫£m x√∫c -->
            <div class="scroll-box" id="box-emotion" onclick="toggleScrollList('emotion')">
                <div class="box-header">
                    <h3><i class="fas fa-smile"></i> Nh√≥m c·∫£m x√∫c</h3>
                    <span class="box-count" id="count-emotion">5</span>
                </div>
                <div class="scroll-list-container">
                    <div class="scroll-list" id="list-emotion">
                        <!-- Danh s√°ch nh√≥m c·∫£m x√∫c s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JS -->
                    </div>
                </div>
            </div>
            
            <!-- √î 9: M√¥i tr∆∞·ªùng -->
            <div class="scroll-box" id="box-environment" onclick="toggleScrollList('environment')">
                <div class="box-header">
                    <h3><i class="fas fa-globe-asia"></i> M√¥i tr∆∞·ªùng</h3>
                    <span class="box-count" id="count-environment">6</span>
                </div>
                <div class="scroll-list-container">
                    <div class="scroll-list" id="list-environment">
                        <!-- Danh s√°ch m√¥i tr∆∞·ªùng s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JS -->
                    </div>
                </div>
            </div>
            
            <!-- √î gi·∫£i th√≠ch t·ª´ kh√≥ -->
            <div class="explanation-box">
                <div class="explanation-header">
                    <i class="fas fa-book-open"></i>
                    <h3>Gi·∫£i th√≠ch c√°c t·ª´ kh√≥ / thu·∫≠t ng·ªØ</h3>
                </div>
                <div class="explanation-content">
                    <div class="term-item">
                        <div class="term-title"><i class="fas fa-fire"></i> Nhi·ªát huy·∫øt</div>
                        <div class="term-description">S·ª± nhi·ªát t√¨nh, ƒëam m√™ v√† tr√†n ƒë·∫ßy nƒÉng l∆∞·ª£ng.</div>
                    </div>
                    <div class="term-item">
                        <div class="term-title"><i class="fas fa-water"></i> B√¨nh tƒ©nh</div>
                        <div class="term-description">Tr·∫°ng th√°i tƒ©nh l·∫∑ng, kh√¥ng xao ƒë·ªông, b√¨nh tƒ©nh.</div>
                    </div>
                    <div class="term-item">
                        <div class="term-title"><i class="fas fa-brain"></i> T·ªânh t√°o</div>
                        <div class="term-description">Tr·∫°ng th√°i th·ª©c t·ªânh, nh·∫≠n th·ª©c r√µ r√†ng, minh m·∫´n.</div>
                    </div>
                    <div class="term-item">
                        <div class="term-title"><i class="fas fa-leaf"></i> C√¢n b·∫±ng</div>
                        <div class="term-description">Tr·∫°ng th√°i ·ªïn ƒë·ªãnh, h√†i h√≤a gi·ªØa c√°c y·∫øu t·ªë.</div>
                    </div>
                    <div class="term-item">
                        <div class="term-title"><i class="fas fa-moon"></i> H∆∞·ªõng n·ªôi</div>
                        <div class="term-description">Tr·∫°ng th√°i t·∫≠p trung v√†o n·ªôi t√¢m, suy t∆∞.</div>
                    </div>
                    <div class="term-item">
                        <div class="term-title"><i class="fas fa-star"></i> Tinh khi·∫øt</div>
                        <div class="term-description">S·ª± trong s√°ng, thu·∫ßn khi·∫øt, kh√¥ng pha tr·ªôn.</div>
                    </div>
                    <div class="term-item">
                        <div class="term-title"><i class="fas fa-bolt"></i> NƒÉng l∆∞·ª£ng</div>
                        <div class="term-description">S·ª©c m·∫°nh v√† kh·∫£ nƒÉng ho·∫°t ƒë·ªông t√≠ch c·ª±c.</div>
                    </div>
                    <div class="term-item">
                        <div class="term-title"><i class="fas fa-lightbulb"></i> S√°ng t·∫°o</div>
                        <div class="term-description">Kh·∫£ nƒÉng t·∫°o ra c√°i m·ªõi, √Ω t∆∞·ªüng ƒë·ªôc ƒë√°o.</div>
                    </div>
                    <div class="term-item">
                        <div class="term-title"><i class="fas fa-train"></i> M√¥i tr∆∞·ªùng t√†u h·ªèa</div>
                        <div class="term-description">M√†u s·∫Øc ph√π h·ª£p v·ªõi kh√¥ng gian di chuy·ªÉn tr√™n t√†u h·ªèa.</div>
                    </div>
                    <div class="term-item">
                        <div class="term-title"><i class="fas fa-plane"></i> M√¥i tr∆∞·ªùng m√°y bay</div>
                        <div class="term-description">M√†u s·∫Øc th√≠ch h·ª£p cho kh√¥ng gian cabin m√°y bay.</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- B·ªô l·ªçc -->
        <div class="filter-controls">
            <label>BPM:</label>
            <input type="number" id="bpmInput" placeholder="VD: 70, 90" min="60" max="120">

            <label>Tone da:</label>
            <select id="toneSelect">
                <option value="">-- T·∫•t c·∫£ --</option>
                <option value="nong">N√≥ng</option>
                <option value="lanh">L·∫°nh</option>
                <option value="trungtinh">Trung t√≠nh</option>
            </select>

            <label>M√£ HEX:</label>
            <input type="text" id="hexInput" placeholder="VD: #FF0000, #00FF00" style="width: 120px;">

            <button onclick="applyFilter()">L·ªçc</button>
            <button onclick="showAll()">Hi·ªán t·∫•t c·∫£</button>
        </div>

        <!-- B·∫£ng d·ªØ li·ªáu ch√≠nh -->
        <div style="overflow-x: auto;">
            <table class="data-table" id="colorTable">
                <thead>
                    <tr>
                        <th width="5%">STT</th>
                        <th width="15%">M√†u / Hoa vƒÉn</th>
                        <th width="12%">T√™n m√†u</th>
                        <th width="10%">M√£ HEX</th>
                        <th width="10%">Tone da</th>
                        <th width="8%">BPM</th>
                        <th width="20%">Tr·∫°ng th√°i</th>
                        <th width="10%">M√¥i tr∆∞·ªùng</th>
                    </tr>
                </thead>
                <tbody id="tableBody">
                    <!-- D·ªØ li·ªáu s·∫Ω ƒë∆∞·ª£c th√™m b·∫±ng JavaScript -->
                </tbody>
            </table>
        </div>

        <div class="footer">
            <p>¬© 2023 B·∫£ng m√†u s·∫Øc - BPM - C·∫£m x√∫c | M√£ HEX ƒë·∫ßy ƒë·ªß</p>
            <p style="margin-top: 5px; font-size: 0.8rem;">Nh·∫•p v√†o t·ª´ng √¥ ƒë·ªÉ hi·ªÉn th·ªã danh s√°ch v√† ch·ªçn m·ª•c ƒë·ªÉ l·ªçc b·∫£ng</p>
        </div>
    </div>

    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notification-text">Th√¥ng b√°o</span>
    </div>

    <script>
        // D·ªØ li·ªáu m√†u s·∫Øc v·ªõi m√£ HEX ƒë·∫ßy ƒë·ªß (th√™m c·ªôt m√¥i tr∆∞·ªùng)
        const colors = [
            [1, "red", "ƒê·ªé", "#FF0000", "nong", 120, "Nhi·ªát huy·∫øt ‚Äì tim nhanh", "phong_cuoi"],
            [2, "orange", "DA CAM", "#FFA500", "nong", 95, "·∫§m √°p ‚Äì nƒÉng l∆∞·ª£ng", "tau_hoa"],
            [3, "yellow", "V√ÄNG", "#FFFF00", "nong", 90, "Vui v·∫ª ‚Äì t√≠ch c·ª±c", "tau_dien"],
            [4, "pink", "H·ªíNG", "#FFC0CB", "nong", 85, "D·ªãu d√†ng ‚Äì c·∫£m x√∫c", "phong_cuoi"],
            [5, "blue", "XANH BI·ªÇN", "#0000FF", "lanh", 70, "B√¨nh tƒ©nh ‚Äì h·∫° nh·ªãp", "may_bay"],
            [6, "skyblue", "XANH DA TR·ªúI", "#87CEEB", "lanh", 68, "Tho√°ng ‚Äì th∆∞ gi√£n", "may_bay"],
            [7, "green", "XANH L√Å", "#008000", "lanh", 75, "C√¢n b·∫±ng ‚Äì ·ªïn ƒë·ªãnh", "den_chua"],
            [8, "purple", "T√çM", "#800080", "lanh", 78, "S√°ng t·∫°o ‚Äì tr√≠ n√£o", "den_chua"],
            [9, "white", "TR·∫ÆNG", "#FFFFFF", "trungtinh", 60, "Tinh khi·∫øt ‚Äì ph·ª•c h·ªìi", "phong_cuoi"],
            [10, "black", "ƒêEN", "#000000", "trungtinh", 65, "Tr·∫ßm ‚Äì h∆∞·ªõng n·ªôi", "tau_hoa"],
            [11, "gray", "GHI", "#808080", "trungtinh", 72, "Trung h√≤a", "tau_dien"],
            [12, "silver", "KIM LO·∫†I", "#C0C0C0", "trungtinh", 80, "Hi·ªán ƒë·∫°i ‚Äì t·ªânh t√°o", "may_bay"],
            [13, "pattern-caro", "K·∫∫ CA R√î ƒêEN", "#000000 (Pattern)", "trungtinh", 90, "C√° t√≠nh", "tau_dien"],
            [14, "pattern-xanh", "K·∫∫ NGANG XANH L√Å", "#2E8B57 (Pattern)", "lanh", 80, "T∆∞∆°i tr·∫ª", "tau_hoa"],
            [15, "pattern-den", "K·∫∫ NGANG ƒêEN", "#000000 (Pattern)", "trungtinh", 100, "M·∫°nh m·∫Ω", "may_bay"]
        ];

        // Bi·∫øn l∆∞u tr·ªØ tr·∫°ng th√°i
        let activeBox = null;
        let selectedItems = {
            color: new Set(),
            tone: new Set(),
            bpm: new Set(),
            state: new Set(),
            hex: new Set(),
            "bpm-category": new Set(),
            pattern: new Set(),
            emotion: new Set(),
            environment: new Set()
        };
        
        // H√†m hi·ªÉn th·ªã th√¥ng b√°o
        function showNotification(message) {
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notification-text');
            notificationText.textContent = message;
            notification.classList.add('show');
            
            setTimeout(() => {
                notification.classList.remove('show');
            }, 2500);
        }
        
        // H√†m l·∫•y m√£ m√†u hex t·ª´ t√™n m√†u
        function getHexColor(colorValue) {
            const colorMap = {
                "red": "#FF0000",
                "orange": "#FFA500",
                "yellow": "#FFFF00",
                "pink": "#FFC0CB",
                "blue": "#0000FF",
                "skyblue": "#87CEEB",
                "green": "#008000",
                "purple": "#800080",
                "white": "#FFFFFF",
                "black": "#000000",
                "gray": "#808080",
                "silver": "#C0C0C0"
            };
            
            return colorMap[colorValue] || colorValue;
        }
        
        // H√†m l·∫•y m√†u hi·ªÉn th·ªã t·ª´ gi√° tr·ªã m√†u
        function getDisplayColor(colorValue) {
            if (colorValue.includes("pattern")) {
                if (colorValue.includes("caro")) return "caro-den";
                if (colorValue.includes("xanh")) return "ke-ngang-xanh";
                if (colorValue.includes("den")) return "ke-ngang-den";
            }
            return colorValue;
        }
        
        // H√†m l·∫•y m√£ HEX ƒë·ªÉ hi·ªÉn th·ªã
        function getDisplayHex(colorValue) {
            if (colorValue.includes("pattern")) {
                if (colorValue.includes("caro")) return "#000000 (Pattern)";
                if (colorValue.includes("xanh")) return "#2E8B57 (Pattern)";
                if (colorValue.includes("den")) return "#000000 (Pattern)";
            }
            return getHexColor(colorValue);
        }
        
        // H√†m l·∫•y ph√¢n lo·∫°i BPM
        function getBpmCategory(bpm) {
            if (bpm < 70) return "Th·∫•p";
            if (bpm < 85) return "Trung b√¨nh";
            if (bpm < 100) return "Cao";
            return "R·∫•t cao";
        }
        
        // H√†m l·∫•y lo·∫°i hoa vƒÉn
        function getPatternType(colorValue) {
            if (colorValue.includes("pattern")) {
                if (colorValue.includes("caro")) return "Ca r√¥";
                if (colorValue.includes("xanh")) return "K·∫ª ngang xanh";
                if (colorValue.includes("den")) return "K·∫ª ngang ƒëen";
            }
            return "M√†u thu·∫ßn";
        }
        
        // H√†m l·∫•y nh√≥m c·∫£m x√∫c
        function getEmotionGroup(state) {
            const lowerState = state.toLowerCase();
            if (lowerState.includes("nhi·ªát") || lowerState.includes("nƒÉng l∆∞·ª£ng") || lowerState.includes("vui")) return "NƒÉng ƒë·ªông";
            if (lowerState.includes("b√¨nh") || lowerState.includes("th∆∞ gi√£n") || lowerState.includes("c√¢n b·∫±ng")) return "B√¨nh tƒ©nh";
            if (lowerState.includes("s√°ng t·∫°o") || lowerState.includes("tr√≠ n√£o")) return "S√°ng t·∫°o";
            if (lowerState.includes("t·ªânh t√°o") || lowerState.includes("hi·ªán ƒë·∫°i")) return "T·ªânh t√°o";
            return "Kh√°c";
        }
        
        // H√†m t·∫°o danh s√°ch cho c√°c √¥
        function createScrollLists() {
            // T·∫°o t·∫≠p h·ª£p duy nh·∫•t cho m·ªói danh m·ª•c
            const colorNames = [...new Set(colors.map(c => c[2]))];
            const toneTypes = [...new Set(colors.map(c => c[4]))];
            const bpmValues = [...new Set(colors.map(c => c[5]))].sort((a, b) => a - b);
            const states = [...new Set(colors.map(c => c[6]))];
            const hexCodes = [...new Set(colors.map(c => c[3]))];
            const bpmCategories = [...new Set(colors.map(c => getBpmCategory(c[5])))];
            const patternTypes = [...new Set(colors.map(c => getPatternType(c[1])))];
            const emotionGroups = [...new Set(colors.map(c => getEmotionGroup(c[6])))];
            const environments = [...new Set(colors.map(c => c[7]))];
            
            // C·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng
            document.getElementById('count-color').textContent = colorNames.length;
            document.getElementById('count-tone').textContent = toneTypes.length;
            document.getElementById('count-bpm').textContent = bpmValues.length;
            document.getElementById('count-state').textContent = states.length;
            document.getElementById('count-hex').textContent = hexCodes.length;
            document.getElementById('count-bpm-category').textContent = bpmCategories.length;
            document.getElementById('count-pattern').textContent = patternTypes.length;
            document.getElementById('count-emotion').textContent = emotionGroups.length;
            document.getElementById('count-environment').textContent = environments.length;
            
            // T·∫°o danh s√°ch t√™n m√†u
            const colorList = document.getElementById('list-color');
            colorList.innerHTML = '';
            colorNames.forEach(name => {
                const count = colors.filter(c => c[2] === name).length;
                const item = createScrollItem('color', name, name, count);
                colorList.appendChild(item);
            });
            
            // T·∫°o danh s√°ch tone da
            const toneList = document.getElementById('list-tone');
            toneList.innerHTML = '';
            toneTypes.forEach(tone => {
                const toneText = tone === 'nong' ? 'N√≥ng' : tone === 'lanh' ? 'L·∫°nh' : 'Trung t√≠nh';
                const count = colors.filter(c => c[4] === tone).length;
                const icon = tone === 'nong' ? 'üî•' : tone === 'lanh' ? '‚ùÑÔ∏è' : '‚öñÔ∏è';
                const item = createScrollItem('tone', tone, `${icon} ${toneText}`, count);
                toneList.appendChild(item);
            });
            
            // T·∫°o danh s√°ch BPM
            const bpmList = document.getElementById('list-bpm');
            bpmList.innerHTML = '';
            bpmValues.forEach(bpm => {
                const count = colors.filter(c => c[5] === bpm).length;
                const item = createScrollItem('bpm', bpm, 
                    `<div style="display:flex; align-items:center; gap:6px;">
                        <i class="fas fa-heart" style="color:#ff6b8b;"></i>
                        <span>${bpm} BPM</span>
                    </div>`, 
                    count);
                bpmList.appendChild(item);
            });
            
            // T·∫°o danh s√°ch tr·∫°ng th√°i
            const stateList = document.getElementById('list-state');
            stateList.innerHTML = '';
            states.forEach(state => {
                const count = colors.filter(c => c[6] === state).length;
                const item = createScrollItem('state', state, state, count);
                stateList.appendChild(item);
            });
            
            // T·∫°o danh s√°ch m√£ HEX
            const hexList = document.getElementById('list-hex');
            hexList.innerHTML = '';
            hexCodes.forEach(hex => {
                const count = colors.filter(c => c[3] === hex).length;
                const colorName = colors.find(c => c[3] === hex)?.[2] || hex;
                const isPattern = hex.includes("Pattern");
                const item = createScrollItem('hex', hex, 
                    `<div style="display:flex; align-items:center; gap:6px;">
                        ${!isPattern ? `<div style="width:12px; height:12px; border-radius:2px; background:${hex}; border:1px solid #ddd;"></div>` : ''}
                        <span>${hex}</span>
                    </div>`, 
                    count);
                hexList.appendChild(item);
            });
            
            // T·∫°o danh s√°ch ph√¢n lo·∫°i BPM
            const bpmCategoryList = document.getElementById('list-bpm-category');
            bpmCategoryList.innerHTML = '';
            bpmCategories.forEach(category => {
                const count = colors.filter(c => getBpmCategory(c[5]) === category).length;
                const icon = category === 'Th·∫•p' ? 'üîã' : category === 'Trung b√¨nh' ? '‚ö°' : category === 'Cao' ? 'üî•' : 'üí•';
                const item = createScrollItem('bpm-category', category, `${icon} ${category}`, count);
                bpmCategoryList.appendChild(item);
            });
            
            // T·∫°o danh s√°ch lo·∫°i hoa vƒÉn
            const patternList = document.getElementById('list-pattern');
            patternList.innerHTML = '';
            patternTypes.forEach(pattern => {
                const count = colors.filter(c => getPatternType(c[1]) === pattern).length;
                const icon = pattern === 'Ca r√¥' ? '‚¨õ' : pattern === 'K·∫ª ngang xanh' ? 'üü©' : pattern === 'K·∫ª ngang ƒëen' ? '‚¨ú' : 'üé®';
                const item = createScrollItem('pattern', pattern, `${icon} ${pattern}`, count);
                patternList.appendChild(item);
            });
            
            // T·∫°o danh s√°ch nh√≥m c·∫£m x√∫c
            const emotionList = document.getElementById('list-emotion');
            emotionList.innerHTML = '';
            emotionGroups.forEach(group => {
                const count = colors.filter(c => getEmotionGroup(c[6]) === group).length;
                const icon = group === 'NƒÉng ƒë·ªông' ? '‚ö°' : group === 'B√¨nh tƒ©nh' ? '‚òÆÔ∏è' : group === 'S√°ng t·∫°o' ? '‚ú®' : group === 'T·ªânh t√°o' ? 'üß†' : '‚ùì';
                const item = createScrollItem('emotion', group, `${icon} ${group}`, count);
                emotionList.appendChild(item);
            });
            
            // T·∫°o danh s√°ch m√¥i tr∆∞·ªùng
            const environmentList = document.getElementById('list-environment');
            environmentList.innerHTML = '';
            
            // Danh s√°ch m√¥i tr∆∞·ªùng ƒë·∫ßy ƒë·ªß
            const allEnvironments = [
                { value: "tau_hoa", name: "üöÇ T√†u h·ªèa", icon: "üöÇ" },
                { value: "tau_dien", name: "üöä T√†u ƒëi·ªán", icon: "üöä" },
                { value: "may_bay", name: "‚úàÔ∏è M√°y bay", icon: "‚úàÔ∏è" },
                { value: "den_chua", name: "üõï ƒê·ªÅn ch√πa", icon: "üõï" },
                { value: "phong_cuoi", name: "üíí Ph√≤ng c∆∞·ªõi", icon: "üíí" },
                { value: "van_phong", name: "üè¢ VƒÉn ph√≤ng", icon: "üè¢" }
            ];
            
            allEnvironments.forEach(env => {
                const count = colors.filter(c => c[7] === env.value).length;
                const item = createScrollItem('environment', env.value, 
                    `<div style="display:flex; align-items:center; gap:6px;">
                        <span>${env.icon}</span>
                        <span>${env.name}</span>
                    </div>`, 
                    count);
                environmentList.appendChild(item);
            });
            
            updateSelectedCount();
        }
        
        // H√†m t·∫°o m·ªôt m·ª•c trong danh s√°ch cu·ªôn
        function createScrollItem(type, value, content, count) {
            const item = document.createElement('div');
            item.className = 'scroll-item';
            if (selectedItems[type].has(value)) {
                item.classList.add('selected');
            }
            item.dataset.type = type;
            item.dataset.value = value;
            item.innerHTML = `
                <div>${content}</div>
                <div class="item-details">${count}</div>
            `;
            
            item.addEventListener('click', (e) => {
                e.stopPropagation(); // NgƒÉn s·ª± ki·ªán lan ra ngo√†i
                toggleSelection(type, value, item);
            });
            
            return item;
        }
        
        // H√†m chuy·ªÉn ƒë·ªïi hi·ªÉn th·ªã danh s√°ch cu·ªôn
        function toggleScrollList(type) {
            const box = document.getElementById(`box-${type}`);
            const list = document.getElementById(`list-${type}`);
            
            // N·∫øu ƒëang m·ªü th√¨ ƒë√≥ng l·∫°i
            if (activeBox === box) {
                box.classList.remove('active');
                list.classList.remove('active');
                activeBox = null;
                return;
            }
            
            // ƒê√≥ng t·∫•t c·∫£ danh s√°ch ƒëang m·ªü
            if (activeBox) {
                activeBox.classList.remove('active');
                const activeList = activeBox.querySelector('.scroll-list');
                if (activeList) activeList.classList.remove('active');
            }
            
            // M·ªü danh s√°ch ƒë∆∞·ª£c ch·ªçn
            box.classList.add('active');
            list.classList.add('active');
            activeBox = box;
            
            // Cu·ªôn ƒë·∫øn ph·∫ßn t·ª≠ ƒë·∫ßu ti√™n n·∫øu c√≥
            if (list.firstChild) {
                list.scrollTop = 0;
            }
        }
        
        // H√†m chuy·ªÉn ƒë·ªïi l·ª±a ch·ªçn
        function toggleSelection(type, value, element) {
            if (selectedItems[type].has(value)) {
                selectedItems[type].delete(value);
                element.classList.remove('selected');
            } else {
                selectedItems[type].add(value);
                element.classList.add('selected');
            }
            
            updateSelectedCount();
            filterTable();
            scrollToFirstHighlighted();
            
            // Hi·ªÉn th·ªã th√¥ng b√°o
            const action = selectedItems[type].has(value) ? "ch·ªçn" : "b·ªè ch·ªçn";
            const typeName = getTypeName(type);
            showNotification(`ƒê√£ ${action} "${getDisplayValue(type, value)}" t·ª´ ${typeName}`);
        }
        
        // H√†m l·∫•y gi√° tr·ªã hi·ªÉn th·ªã
        function getDisplayValue(type, value) {
            if (type === 'environment') {
                const envMap = {
                    "tau_hoa": "T√†u h·ªèa",
                    "tau_dien": "T√†u ƒëi·ªán",
                    "may_bay": "M√°y bay",
                    "den_chua": "ƒê·ªÅn ch√πa",
                    "phong_cuoi": "Ph√≤ng c∆∞·ªõi",
                    "van_phong": "VƒÉn ph√≤ng"
                };
                return envMap[value] || value;
            } else if (type === 'tone') {
                return value === 'nong' ? 'N√≥ng' : value === 'lanh' ? 'L·∫°nh' : 'Trung t√≠nh';
            }
            return value;
        }
        
        // H√†m l·∫•y t√™n hi·ªÉn th·ªã c·ªßa lo·∫°i
        function getTypeName(type) {
            const names = {
                color: "T√™n m√†u",
                tone: "Tone da",
                bpm: "BPM",
                state: "Tr·∫°ng th√°i",
                hex: "M√£ HEX",
                "bpm-category": "Ph√¢n lo·∫°i BPM",
                pattern: "Lo·∫°i hoa vƒÉn",
                emotion: "Nh√≥m c·∫£m x√∫c",
                environment: "M√¥i tr∆∞·ªùng"
            };
            return names[type] || type;
        }
        
        // H√†m c·∫≠p nh·∫≠t s·ªë l∆∞·ª£ng m·ª•c ƒë∆∞·ª£c ch·ªçn
        function updateSelectedCount() {
            let total = 0;
            for (const type in selectedItems) {
                total += selectedItems[type].size;
            }
            document.getElementById('selectedCount').textContent = `${total} m·ª•c ƒë∆∞·ª£c ch·ªçn`;
        }
        
        // H√†m l·ªçc b·∫£ng d·ª±a tr√™n l·ª±a ch·ªçn
        function filterTable() {
            const tableBody = document.getElementById('tableBody');
            tableBody.innerHTML = '';
            
            let filteredColors = colors;
            
            // √Åp d·ª•ng t·∫•t c·∫£ c√°c b·ªô l·ªçc t·ª´ selectedItems
            if (selectedItems.color.size > 0) {
                filteredColors = filteredColors.filter(c => selectedItems.color.has(c[2]));
            }
            
            if (selectedItems.tone.size > 0) {
                filteredColors = filteredColors.filter(c => selectedItems.tone.has(c[4]));
            }
            
            if (selectedItems.bpm.size > 0) {
                filteredColors = filteredColors.filter(c => selectedItems.bpm.has(c[5]));
            }
            
            if (selectedItems.state.size > 0) {
                filteredColors = filteredColors.filter(c => selectedItems.state.has(c[6]));
            }
            
            if (selectedItems.hex.size > 0) {
                filteredColors = filteredColors.filter(c => selectedItems.hex.has(c[3]));
            }
            
            if (selectedItems["bpm-category"].size > 0) {
                filteredColors = filteredColors.filter(c => selectedItems["bpm-category"].has(getBpmCategory(c[5])));
            }
            
            if (selectedItems.pattern.size > 0) {
                filteredColors = filteredColors.filter(c => selectedItems.pattern.has(getPatternType(c[1])));
            }
            
            if (selectedItems.emotion.size > 0) {
                filteredColors = filteredColors.filter(c => selectedItems.emotion.has(getEmotionGroup(c[6])));
            }
            
            if (selectedItems.environment.size > 0) {
                filteredColors = filteredColors.filter(c => selectedItems.environment.has(c[7]));
            }
            
            // Hi·ªÉn th·ªã k·∫øt qu·∫£
            filteredColors.forEach(c => {
                const row = document.createElement('tr');
                
                // Ki·ªÉm tra xem d√≤ng n√†y c√≥ kh·ªõp v·ªõi b·∫•t k·ª≥ l·ª±a ch·ªçn n√†o kh√¥ng
                let isHighlighted = false;
                
                // STT
                const sttCell = document.createElement('td');
                sttCell.textContent = c[0];
                sttCell.style.fontWeight = "600";
                sttCell.style.color = "#4a4a9c";
                row.appendChild(sttCell);
                
                // M√†u / Hoa vƒÉn
                const colorCell = document.createElement('td');
                colorCell.className = "color-cell";
                
                const displayColor = getDisplayColor(c[1]);
                const hexCode = c[3];
                const isPattern = c[1].includes("pattern");
                
                let colorPreview = document.createElement("div");
                colorPreview.className = "color-preview";
                
                if (isPattern) {
                    colorPreview.classList.add(displayColor);
                    colorPreview.textContent = "PATTERN";
                } else {
                    colorPreview.style.background = hexCode;
                    // Ki·ªÉm tra ƒë·ªô s√°ng ƒë·ªÉ ch·ªçn m√†u ch·ªØ ph√π h·ª£p
                    const rgb = hexToRgb(hexCode);
                    const brightness = (rgb.r * 299 + rgb.g * 587 + rgb.b * 114) / 1000;
                    colorPreview.style.color = brightness > 125 ? "#000" : "#FFF";
                    colorPreview.textContent = hexCode;
                }
                
                colorCell.appendChild(colorPreview);
                row.appendChild(colorCell);
                
                // T√™n m√†u
                const nameCell = document.createElement('td');
                nameCell.innerHTML = `<strong>${c[2]}</strong>`;
                row.appendChild(nameCell);
                
                // M√£ HEX
                const hexCell = document.createElement('td');
                hexCell.innerHTML = `<span class="color-hex">${hexCode}</span>`;
                row.appendChild(hexCell);
                
                // Tone da
                const toneCell = document.createElement('td');
                let toneText = "";
                if (c[4]==="nong") {
                    toneText = "üî• N√≥ng";
                    isHighlighted = isHighlighted || selectedItems.tone.has("nong");
                } else if (c[4]==="lanh") {
                    toneText = "‚ùÑÔ∏è L·∫°nh";
                    isHighlighted = isHighlighted || selectedItems.tone.has("lanh");
                } else {
                    toneText = "‚öñÔ∏è Trung t√≠nh";
                    isHighlighted = isHighlighted || selectedItems.tone.has("trungtinh");
                }
                toneCell.innerHTML = `<span style="font-weight:600;">${toneText}</span>`;
                row.appendChild(toneCell);
                
                // BPM
                const bpmCell = document.createElement('td');
                bpmCell.innerHTML = `
                    <div style="display:flex; align-items:center; gap:6px;">
                        <i class="fas fa-heart" style="color:#ff6b8b;"></i>
                        <span style="font-weight:600;">${c[5]}</span>
                    </div>
                `;
                isHighlighted = isHighlighted || selectedItems.bpm.has(c[5]);
                row.appendChild(bpmCell);
                
                // Tr·∫°ng th√°i
                const stateCell = document.createElement('td');
                stateCell.textContent = c[6];
                isHighlighted = isHighlighted || selectedItems.state.has(c[6]);
                row.appendChild(stateCell);
                
                // M√¥i tr∆∞·ªùng
                const envCell = document.createElement('td');
                let envIcon = "";
                let envText = "";
                
                switch(c[7]) {
                    case "tau_hoa": envIcon = "üöÇ"; envText = "T√†u h·ªèa"; break;
                    case "tau_dien": envIcon = "üöä"; envText = "T√†u ƒëi·ªán"; break;
                    case "may_bay": envIcon = "‚úàÔ∏è"; envText = "M√°y bay"; break;
                    case "den_chua": envIcon = "üõï"; envText = "ƒê·ªÅn ch√πa"; break;
                    case "phong_cuoi": envIcon = "üíí"; envText = "Ph√≤ng c∆∞·ªõi"; break;
                    default: envIcon = "üè¢"; envText = "VƒÉn ph√≤ng";
                }
                
                envCell.innerHTML = `
                    <div style="display:flex; align-items:center; gap:6px;">
                        <span>${envIcon}</span>
                        <span>${envText}</span>
                    </div>
                `;
                isHighlighted = isHighlighted || selectedItems.environment.has(c[7]);
                row.appendChild(envCell);
                
                // Ki·ªÉm tra c√°c l·ª±a ch·ªçn kh√°c
                if (selectedItems.color.has(c[2])) isHighlighted = true;
                if (selectedItems.hex.has(c[3])) isHighlighted = true;
                if (selectedItems["bpm-category"].has(getBpmCategory(c[5]))) isHighlighted = true;
                if (selectedItems.pattern.has(getPatternType(c[1]))) isHighlighted = true;
                if (selectedItems.emotion.has(getEmotionGroup(c[6]))) isHighlighted = true;
                
                // N·∫øu c√≥ l·ª±a ch·ªçn, th√™m l·ªõp highlighted
                if (isHighlighted && Object.values(selectedItems).some(set => set.size > 0)) {
                    row.classList.add('highlighted');
                }
                
                tableBody.appendChild(row);
            });
        }
        
        // H√†m chuy·ªÉn ƒë·ªïi HEX sang RGB
        function hexToRgb(hex) {
            // X√≥a k√Ω t·ª± # n·∫øu c√≥
            hex = hex.replace('#', '');
            
            // Parse c√°c gi√° tr·ªã r, g, b
            const r = parseInt(hex.substring(0, 2), 16);
            const g = parseInt(hex.substring(2, 4), 16);
            const b = parseInt(hex.substring(4, 6), 16);
            
            return { r, g, b };
        }
        
        // H√†m cu·ªôn ƒë·∫øn d√≤ng ƒë·∫ßu ti√™n ƒë∆∞·ª£c highlight
        function scrollToFirstHighlighted() {
            setTimeout(() => {
                const firstHighlighted = document.querySelector('.highlighted');
                if (firstHighlighted) {
                    firstHighlighted.scrollIntoView({
                        behavior: 'smooth',
                        block: 'center'
                    });
                }
            }, 100);
        }
        
        // H√†m x√≥a t·∫•t c·∫£ l·ª±a ch·ªçn
        function clearAllSelections() {
            // X√≥a t·∫•t c·∫£ l·ª±a ch·ªçn
            for (const type in selectedItems) {
                selectedItems[type].clear();
            }
            
            // X√≥a l·ªõp selected t·ª´ t·∫•t c·∫£ c√°c m·ª•c
            document.querySelectorAll('.scroll-item.selected').forEach(item => {
                item.classList.remove('selected');
            });
            
            // ƒê√≥ng danh s√°ch ƒëang m·ªü
            if (activeBox) {
                activeBox.classList.remove('active');
                const activeList = activeBox.querySelector('.scroll-list');
                if (activeList) activeList.classList.remove('active');
                activeBox = null;
            }
            
            // C·∫≠p nh·∫≠t giao di·ªán
            updateSelectedCount();
            filterTable();
            
            // Hi·ªÉn th·ªã th√¥ng b√°o
            showNotification("ƒê√£ x√≥a t·∫•t c·∫£ l·ª±a ch·ªçn");
        }
        
        // H√†m √°p d·ª•ng b·ªô l·ªçc t·ª´ input
        function applyFilter() {
            const bpm = Number(document.getElementById("bpmInput").value);
            const tone = document.getElementById("toneSelect").value;
            const hex = document.getElementById("hexInput").value.toUpperCase();
            
            // X√≥a t·∫•t c·∫£ l·ª±a ch·ªçn hi·ªán t·∫°i
            clearAllSelections();
            
            // Th√™m l·ª±a ch·ªçn t·ª´ b·ªô l·ªçc
            if (bpm) {
                selectedItems.bpm.add(bpm);
            }
            
            if (tone) {
                selectedItems.tone.add(tone);
            }
            
            if (hex) {
                // T√¨m m√£ HEX t∆∞∆°ng ·ª©ng
                const hexColor = colors.find(c => c[3].includes(hex));
                if (hexColor) {
                    selectedItems.hex.add(hexColor[3]);
                }
            }
            
            // C·∫≠p nh·∫≠t giao di·ªán
            updateSelectedCount();
            filterTable();
            
            // Hi·ªÉn th·ªã th√¥ng b√°o
            let message = "ƒê√£ √°p d·ª•ng b·ªô l·ªçc";
            if (bpm || tone || hex) {
                let filters = [];
                if (bpm) filters.push(`BPM=${bpm}`);
                if (tone) filters.push(`Tone=${tone === 'nong' ? 'N√≥ng' : tone === 'lanh' ? 'L·∫°nh' : 'Trung t√≠nh'}`);
                if (hex) filters.push(`HEX=${hex}`);
                message = `ƒê√£ l·ªçc: ${filters.join(', ')}`;
            }
            
            showNotification(message);
        }
        
        // H√†m hi·ªÉn th·ªã t·∫•t c·∫£
        function showAll() {
            document.getElementById("bpmInput").value = "";
            document.getElementById("toneSelect").value = "";
            document.getElementById("hexInput").value = "";
            clearAllSelections();
            showNotification("Hi·ªÉn th·ªã t·∫•t c·∫£ d·ªØ li·ªáu");
        }
        
        // H√†m kh·ªüi t·∫°o
        function init() {
            createScrollLists();
            filterTable();
            
            // ƒê√≥ng danh s√°ch khi click ra ngo√†i
            document.addEventListener('click', (e) => {
                const isClickInsideBox = e.target.closest('.scroll-box');
                if (!isClickInsideBox && activeBox) {
                    activeBox.classList.remove('active');
                    const activeList = activeBox.querySelector('.scroll-list');
                    if (activeList) activeList.classList.remove('active');
                    activeBox = null;
                }
            });
        }
        
        // Kh·ªüi ch·∫°y khi trang t·∫£i xong
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
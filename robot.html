<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Robot Th·ª±c ƒê∆°n ∆Øu Ti√™n NƒÉm</title>
<style>
body{font-family:Arial;padding:20px}
.menu{margin:15px 0}
.title{font-weight:bold}
</style>
</head>
<body>

<h2>üç± Robot th·ª±c ƒë∆°n nƒÉm</h2>
<div id="trangThai">ƒêang ki·ªÉm tra l·ªãch...</div>
<hr>
<div id="menu"></div>

<script>
const files = {
  am: "am-lich/tet-am.html",        // 12 ng√†y T·∫øt √¢m
  le: "le-duong/le17.html",         // 17 ng√†y l·ªÖ
  viet: "am-lich/viet-thuong.html", // m√≥n Vi·ªát √¢m l·ªãch th∆∞·ªùng
  it: "038%20Ch%E1%BA%BF%20%C4%91%E1%BB%99%20%C4%83n%20%C3%ADt%20b%E1%BB%87nh%20t%E1%BA%ADt%20.html"
};

async function doc(url){
  try{
    const r=await fetch(url+"?t="+Date.now());
    if(!r.ok) return null;
    return await r.text();
  }catch(e){return null}
}

function layMon(html){
  const lines=html.split("\n");
  let bat=false,mon=[];
  for(let l of lines){
    const t=l.trim(),k=t.toLowerCase();
    if(k.includes("th·ª±c ƒë∆°n")||k.includes("m√≥n")||k.includes("ƒÉn:")){
      bat=true;continue;
    }
    if(bat){
      if(t==""||k.includes("ti·ªÅn")) break;
      mon.push(t.replace("-","").trim());
    }
  }
  return mon;
}

function hien(mon,title){
  document.getElementById("menu").innerHTML=
    "<div class='menu'><div class='title'>"+title+
    "</div>"+mon.join("<br>")+"</div>";
}

async function robot(){
  const tt=document.getElementById("trangThai");

  // 1Ô∏è‚É£ T·∫øt √¢m
  const am=await doc(files.am);
  if(am){
    const mon=layMon(am);
    if(mon.length){
      tt.innerHTML="‚úî T·∫øt √¢m";
      hien(mon,"Th·ª±c ƒë∆°n T·∫øt √¢m");
      return;
    }
  }

  // 2Ô∏è‚É£ l·ªÖ d∆∞∆°ng
  const le=await doc(files.le);
  if(le){
    const mon=layMon(le);
    if(mon.length){
      tt.innerHTML="‚úî L·ªÖ d∆∞∆°ng";
      hien(mon,"Th·ª±c ƒë∆°n ng≈© h√†nh");
      return;
    }
  }

  // 3Ô∏è‚É£ m√≥n Vi·ªát √¢m l·ªãch th∆∞·ªùng
  const vi=await doc(files.viet);
  if(vi){
    const mon=layMon(vi);
    if(mon.length){
      tt.innerHTML="‚úî √Çm l·ªãch th∆∞·ªùng";
      hien(mon,"M√≥n Vi·ªát √¢m l·ªãch");
      return;
    }
  }

  // 4Ô∏è‚É£ √≠t b·ªánh t·∫≠t
  const it=await doc(files.it);
  if(it){
    const mon=layMon(it);
    if(mon.length){
      tt.innerHTML="‚úî √çt b·ªánh t·∫≠t";
      hien(mon,"Th·ª±c ƒë∆°n √≠t b·ªánh t·∫≠t");
      return;
    }
  }

  tt.innerHTML="Kh√¥ng c√≥ l·ªãch";
}

// ch·∫°y li√™n t·ª•c ‚Üí 038 t·ª± d·ª´ng khi c√≥ robot kh√°c
setInterval(robot,5000);
robot();
</script>

</body>
</html>

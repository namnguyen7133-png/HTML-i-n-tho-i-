<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Robot Th·ª±c ƒê∆°n NƒÉm</title>

<style>
body{
  font-family:Arial, sans-serif;
  background:#f5f6f8;
  margin:0;
  padding:25px;
  font-size:22px;
  line-height:1.6;
}

h2{
  font-size:32px;
  margin-bottom:10px;
}

#trangThai{
  font-size:24px;
  font-weight:bold;
  margin:15px 0;
}

.menu{
  background:white;
  padding:20px;
  border-radius:10px;
  box-shadow:0 2px 6px rgba(0,0,0,0.1);
  margin-top:15px;
}

.title{
  font-size:26px;
  font-weight:bold;
  margin-bottom:10px;
}
</style>
</head>

<body>

<h2>üç± Robot th·ª±c ƒë∆°n nƒÉm</h2>
<div id="trangThai">ƒêang ki·ªÉm tra l·ªãch‚Ä¶</div>
<div id="menu"></div>

<script>

// ===== DANH S√ÅCH FILE =====

// √ÇM L·ªäCH
const amFiles=[
"am-lich/tet1.html",
"am-lich/tet2.html",
"am-lich/tet3.html",
"am-lich/tet4.html",
"am-lich/tet5.html",
"am-lich/tet6.html",
"am-lich/tet7.html",
"am-lich/tet8.html",
"am-lich/tet9.html",
"am-lich/tet10.html",
"am-lich/tet11.html",
"am-lich/tet12.html",
"am-lich/ram-5.html",
"am-lich/mong1-5.html"
];

// NG≈® H√ÄNH TRƒ® 17 NG√ÄY
const leFiles=[
"le-duong/ngu-hanh-tri-17.html"
];

// √ÇM L·ªäCH TH∆Ø·ªúNG
const vietFiles=[
"am-lich/viet-thuong.html"
];

// √çT B·ªÜNH
const itFiles=[
"038%20Ch%E1%BA%BF%20%C4%91%E1%BB%99%20%C4%83n%20%C3%ADt%20b%E1%BB%87nh%20t%E1%BA%ADt%20.html"
];


// ===== ƒê·ªåC FILE =====
async function doc(url){
  try{
    const r=await fetch(url+"?t="+Date.now());
    if(!r.ok) return null;
    return await r.text();
  }catch(e){return null}
}

// ===== TR√çCH M√ìN =====
function layMon(html){
  const lines=html.split("\n");
  let bat=false;
  let mon=[];

  for(const l of lines){
    const t=l.trim();
    const k=t.toLowerCase();

    if(k.includes("th·ª±c ƒë∆°n") || k.includes("m√≥n") || k.includes("ng√†y")){
      bat=true;
      continue;
    }

    if(bat){
      if(t=="" || k.includes("ti·ªÅn")) break;
      mon.push(t.replace("-","").trim());
    }
  }
  return mon;
}

// ===== HI·ªÇN TH·ªä =====
function hien(mon,title){
  document.getElementById("menu").innerHTML=
    "<div class='menu'><div class='title'>"+title+"</div>"
    + mon.join("<br>") +
    "</div>";
}

// ===== KI·ªÇM TRA =====
async function checkGroup(files,title,status){
  for(const f of files){
    const html=await doc(f);
    if(!html) continue;

    const mon=layMon(html);
    if(mon.length){
      document.getElementById("trangThai").innerHTML=status;
      hien(mon,title);
      return true;
    }
  }
  return false;
}

// ===== ROBOT =====
async function robot(){

  // 1 √ÇM L·ªäCH
  if(await checkGroup(amFiles,"Th·ª±c ƒë∆°n √¢m l·ªãch","‚úî √Çm l·ªãch")) return;

  // 2 NG≈® H√ÄNH TRƒ®
  if(await checkGroup(leFiles,"Ng≈© h√†nh b·ªánh trƒ©","‚úî Ng≈© h√†nh trƒ©")) return;

  // 3 √ÇM L·ªäCH TH∆Ø·ªúNG
  if(await checkGroup(vietFiles,"M√≥n Vi·ªát √¢m l·ªãch","‚úî √Çm l·ªãch th∆∞·ªùng")) return;

  // 4 √çT B·ªÜNH
  if(await checkGroup(itFiles,"√çt b·ªánh t·∫≠t","‚úî √çt b·ªánh")) return;

  document.getElementById("trangThai").innerHTML="Kh√¥ng c√≥ l·ªãch";
}

// ch·∫°y
robot();
setInterval(robot,5000);

</script>
</body>
</html>

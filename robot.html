<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Robot Th·ª±c ƒê∆°n NƒÉm</title>
<style>
body{font-family:Arial;padding:20px}
.menu{margin:15px 0}
.title{font-weight:bold;font-size:18px}
</style>
</head>
<body>

<h2>üç± Robot th·ª±c ƒë∆°n nƒÉm</h2>
<div id="trangThai">ƒêang ki·ªÉm tra l·ªãch...</div>
<hr>
<div id="menu"></div>

<script>
// ===== DANH S√ÅCH FILE =====

// 1Ô∏è‚É£ √ÇM L·ªäCH (T·∫øt + R·∫±m + M·ªìng 1 + s·ªë ng∆∞·ªùi)
const amFiles=[
"am-lich/tet1.html",
"am-lich/tet2.html",
"am-lich/tet3.html",
"am-lich/tet4.html",
"am-lich/tet5.html",
"am-lich/tet6.html",
"am-lich/tet7.html",
"am-lich/tet8.html",
"am-lich/tet9.html",
"am-lich/tet10.html",
"am-lich/tet11.html",
"am-lich/tet12.html",
"am-lich/ram-5.html",
"am-lich/mong1-5.html"
];

// 2Ô∏è‚É£ L·ªÑ D∆Ø∆†NG
const leFiles=[
"le-duong/le17.html"
];

// 3Ô∏è‚É£ √ÇM L·ªäCH TH∆Ø·ªúNG
const vietFiles=[
"am-lich/viet-thuong.html"
];

// 4Ô∏è‚É£ √çT B·ªÜNH T·∫¨T
const itFiles=[
"038%20Ch%E1%BA%BF%20%C4%91%E1%BB%99%20%C4%83n%20%C3%ADt%20b%E1%BB%87nh%20t%E1%BA%ADt%20.html"
];


// ===== ƒê·ªåC FILE =====
async function doc(url){
  try{
    const r=await fetch(url+"?t="+Date.now());
    if(!r.ok) return null;
    return await r.text();
  }catch(e){return null}
}

// ===== TR√çCH M√ìN =====
function layMon(html){
  const lines=html.split("\n");
  let bat=false,mon=[];
  for(const l of lines){
    const t=l.trim();
    const k=t.toLowerCase();

    if(k.includes("th·ª±c ƒë∆°n")||k.includes("m√≥n")||k.includes("ƒÉn:")){
      bat=true;
      continue;
    }

    if(bat){
      if(t==""||k.includes("ti·ªÅn")) break;
      mon.push(t.replace("-","").trim());
    }
  }
  return mon;
}

// ===== HI·ªÇN TH·ªä =====
function hien(mon,title){
  document.getElementById("menu").innerHTML=
    "<div class='menu'><div class='title'>"+title+
    "</div>"+mon.join("<br>")+"</div>";
}

// ===== KI·ªÇM TRA DANH S√ÅCH FILE THEO ∆ØU TI√äN =====
async function checkGroup(files,title,status){
  for(const f of files){
    const html=await doc(f);
    if(!html) continue;

    const mon=layMon(html);
    if(mon.length){
      document.getElementById("trangThai").innerHTML=status;
      hien(mon,title);
      return true;
    }
  }
  return false;
}

// ===== ROBOT =====
async function robot(){

  // 1Ô∏è‚É£ √ÇM L·ªäCH
  if(await checkGroup(amFiles,"Th·ª±c ƒë∆°n √¢m l·ªãch","‚úî √Çm l·ªãch")) return;

  // 2Ô∏è‚É£ L·ªÑ D∆Ø∆†NG
  if(await checkGroup(leFiles,"Th·ª±c ƒë∆°n l·ªÖ","‚úî L·ªÖ d∆∞∆°ng")) return;

  // 3Ô∏è‚É£ √ÇM L·ªäCH TH∆Ø·ªúNG
  if(await checkGroup(vietFiles,"M√≥n Vi·ªát √¢m l·ªãch","‚úî √Çm l·ªãch th∆∞·ªùng")) return;

  // 4Ô∏è‚É£ √çT B·ªÜNH T·∫¨T
  if(await checkGroup(itFiles,"Th·ª±c ƒë∆°n √≠t b·ªánh t·∫≠t","‚úî √çt b·ªánh t·∫≠t")) return;

  document.getElementById("trangThai").innerHTML="Kh√¥ng c√≥ l·ªãch";
}

// ===== CH·∫†Y LI√äN T·ª§C (∆ØU TI√äN ƒê·ªòNG) =====
setInterval(robot,5000);
robot();

</script>
</body>
</html>

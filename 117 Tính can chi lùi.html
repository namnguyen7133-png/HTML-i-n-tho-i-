<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ứng dụng Tìm Kiếm Năm Can Chi</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #1a237e 0%, #311b92 100%);
            min-height: 100vh;
            padding: 20px;
            color: #333;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        
        .container {
            width: 95%;
            max-width: 1400px;
            background-color: white;
            border-radius: 20px;
            box-shadow: 0 15px 40px rgba(0, 0, 0, 0.3);
            overflow: hidden;
            margin: 20px auto;
        }
        
        header {
            background: linear-gradient(to right, #1a237e, #4a148c);
            color: white;
            padding: 30px;
            text-align: center;
            position: relative;
            overflow: hidden;
        }
        
        header::before {
            content: "";
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-image: url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.05'%3E%3Cpath d='M36 34v-4h-2v4h-4v2h4v4h2v-4h4v-2h-4zm0-30V0h-2v4h-4v2h4v4h2V6h4V4h-4zM6 34v-4H4v4H0v2h4v4h2v-4h4v-2H6zM6 4V0H4v4H0v2h4v4h2V6h4V4H6z'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E");
        }
        
        .header-content {
            position: relative;
            z-index: 1;
        }
        
        header h1 {
            font-size: 2.8rem;
            margin-bottom: 15px;
            text-shadow: 0 2px 5px rgba(0, 0, 0, 0.3);
            color: #fff;
        }
        
        .header-icon {
            background-color: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 20px;
            font-size: 2.5rem;
            border: 3px solid rgba(255, 255, 255, 0.3);
        }
        
        header p {
            font-size: 1.2rem;
            opacity: 0.9;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }
        
        .main-content {
            display: flex;
            flex-wrap: wrap;
            padding: 30px;
            gap: 30px;
        }
        
        .input-section {
            flex: 1;
            min-width: 350px;
            padding: 25px;
            background: linear-gradient(to bottom, #f8f9fa, #e9ecef);
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            border: 1px solid #dee2e6;
        }
        
        .output-section {
            flex: 1.5;
            min-width: 500px;
            padding: 25px;
            background-color: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
            border: 1px solid #dee2e6;
        }
        
        .section-title {
            color: #1a237e;
            margin-bottom: 25px;
            padding-bottom: 12px;
            border-bottom: 3px solid #4a148c;
            display: flex;
            align-items: center;
            font-size: 1.5rem;
        }
        
        .section-title i {
            margin-right: 15px;
            color: #4a148c;
            background-color: rgba(74, 20, 140, 0.1);
            padding: 10px;
            border-radius: 10px;
        }
        
        .form-group {
            margin-bottom: 25px;
        }
        
        label {
            display: block;
            margin-bottom: 10px;
            font-weight: 700;
            color: #1a237e;
            font-size: 1.1rem;
        }
        
        .input-with-icon {
            position: relative;
        }
        
        .input-icon {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            color: #4a148c;
        }
        
        input[type="text"], input[type="number"] {
            width: 100%;
            padding: 15px 15px 15px 50px;
            border: 2px solid #d1d1d1;
            border-radius: 10px;
            font-size: 1.1rem;
            transition: all 0.3s;
            background-color: #fff;
        }
        
        input[type="text"]:focus, input[type="number"]:focus {
            border-color: #4a148c;
            outline: none;
            box-shadow: 0 0 0 3px rgba(74, 20, 140, 0.2);
        }
        
        .canchi-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(220px, 1fr));
            gap: 20px;
            margin-top: 15px;
        }
        
        .canchi-item {
            background-color: white;
            border-radius: 10px;
            padding: 15px;
            box-shadow: 0 3px 10px rgba(0, 0, 0, 0.05);
            border: 1px solid #e9ecef;
            transition: transform 0.3s, box-shadow 0.3s;
        }
        
        .canchi-item:hover {
            transform: translateY(-5px);
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
        }
        
        .search-btn-container {
            margin-top: 30px;
            text-align: center;
        }
        
        .search-btn {
            background: linear-gradient(to right, #4a148c, #1a237e);
            color: white;
            border: none;
            padding: 18px 35px;
            border-radius: 12px;
            font-size: 1.3rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s;
            width: 100%;
            max-width: 400px;
            box-shadow: 0 5px 15px rgba(74, 20, 140, 0.4);
            position: relative;
            overflow: hidden;
        }
        
        .search-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 20px rgba(74, 20, 140, 0.6);
        }
        
        .search-btn:active {
            transform: translateY(0);
        }
        
        .search-btn i {
            margin-right: 12px;
        }
        
        .search-btn::after {
            content: "";
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.2), transparent);
            transition: left 0.5s;
        }
        
        .search-btn:hover::after {
            left: 100%;
        }
        
        .results-container {
            background-color: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-top: 25px;
            max-height: 500px;
            overflow-y: auto;
            border: 1px solid #dee2e6;
        }
        
        .results-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 2px solid #dee2e6;
        }
        
        .result-item {
            background-color: white;
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            border-left: 6px solid #4a148c;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.07);
            transition: transform 0.3s;
        }
        
        .result-item:hover {
            transform: translateX(5px);
        }
        
        .result-header {
            font-weight: bold;
            color: #1a237e;
            margin-bottom: 10px;
            font-size: 1.2rem;
            display: flex;
            align-items: center;
        }
        
        .result-year {
            color: #4a148c;
            font-weight: 700;
            font-size: 1.3rem;
        }
        
        .result-sequence {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            background: linear-gradient(135deg, #4a148c, #1a237e);
            color: white;
            border-radius: 50%;
            width: 35px;
            height: 35px;
            text-align: center;
            margin-right: 15px;
            font-weight: bold;
            font-size: 1.1rem;
            box-shadow: 0 3px 8px rgba(74, 20, 140, 0.3);
        }
        
        .result-details {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }
        
        .result-detail-item {
            background-color: #f8f9fa;
            padding: 12px;
            border-radius: 8px;
            border-left: 3px solid #4a148c;
        }
        
        .no-results {
            text-align: center;
            color: #6c757d;
            padding: 40px 20px;
            font-style: italic;
        }
        
        .no-results i {
            font-size: 4rem;
            margin-bottom: 20px;
            color: #adb5bd;
        }
        
        .info-box {
            background: linear-gradient(to right, #e8f4fd, #d4e9fa);
            border-radius: 15px;
            padding: 25px;
            margin-top: 30px;
            border-left: 6px solid #2196F3;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
        }
        
        .info-box h3 {
            color: #1a237e;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            font-size: 1.4rem;
        }
        
        .info-box h3 i {
            margin-right: 15px;
            color: #2196F3;
            background-color: rgba(33, 150, 243, 0.1);
            padding: 10px;
            border-radius: 10px;
        }
        
        .info-steps {
            display: flex;
            flex-wrap: wrap;
            gap: 15px;
            margin-top: 20px;
        }
        
        .info-step {
            flex: 1;
            min-width: 200px;
            background-color: white;
            padding: 15px;
            border-radius: 10px;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.05);
        }
        
        .step-number {
            display: inline-block;
            background-color: #2196F3;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            text-align: center;
            line-height: 30px;
            margin-right: 10px;
            font-weight: bold;
        }
        
        footer {
            text-align: center;
            padding: 25px;
            color: #6c757d;
            border-top: 1px solid #eee;
            background-color: #f8f9fa;
            font-size: 1rem;
        }
        
        /* Scrollbar tùy chỉnh */
        .results-container::-webkit-scrollbar {
            width: 8px;
        }
        
        .results-container::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }
        
        .results-container::-webkit-scrollbar-thumb {
            background: #c1c1c1;
            border-radius: 10px;
        }
        
        .results-container::-webkit-scrollbar-thumb:hover {
            background: #a1a1a1;
        }
        
        @media (max-width: 1200px) {
            .main-content {
                flex-direction: column;
            }
            
            .input-section, .output-section {
                min-width: 100%;
            }
        }
        
        @media (max-width: 768px) {
            header h1 {
                font-size: 2.2rem;
            }
            
            .canchi-grid {
                grid-template-columns: repeat(auto-fill, minmax(100%, 1fr));
            }
            
            .section-title {
                font-size: 1.3rem;
            }
            
            .main-content {
                padding: 20px;
            }
        }
        
        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .container {
                width: 100%;
                border-radius: 15px;
            }
            
            header {
                padding: 20px;
            }
            
            header h1 {
                font-size: 1.8rem;
            }
            
            .header-icon {
                width: 60px;
                height: 60px;
                font-size: 1.8rem;
            }
            
            .search-btn {
                padding: 15px 25px;
                font-size: 1.1rem;
            }
            
            .result-details {
                grid-template-columns: 1fr;
            }
        }
        
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #4a148c;
            color: white;
            padding: 15px 25px;
            border-radius: 10px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            display: none;
            align-items: center;
            animation: slideIn 0.3s ease-out;
        }
        
        @keyframes slideIn {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .notification i {
            margin-right: 10px;
            font-size: 1.5rem;
        }
    </style>
</head>
<body>
    <!-- Thông báo -->
    <div class="notification" id="notification">
        <i class="fas fa-check-circle"></i>
        <span id="notification-text">Thông báo!</span>
    </div>
    
    <div class="container">
        <header>
            <div class="header-content">
                <div class="header-icon">
                    <i class="fas fa-calendar-alt"></i>
                </div>
                <h1>Ứng dụng Tìm Kiếm Năm Can Chi</h1>
                <p>Nhập thông tin năm Can Chi gốc và các Can Chi cần tìm để xác định thứ tự và năm tương ứng dựa trên chu kỳ 60 hoa giáp</p>
            </div>
        </header>
        
        <div class="main-content">
            <div class="input-section">
                <div class="section-title">
                    <i class="fas fa-info-circle"></i> Thông tin đầu vào
                </div>
                
                <div class="form-group">
                    <label for="canchi-name"><i class="fas fa-signature"></i> 1. Tên Can Chi gốc:</label>
                    <div class="input-with-icon">
                        <i class="fas fa-signature input-icon"></i>
                        <input type="text" id="canchi-name" placeholder="Ví dụ: Giáp Tý, Ất Sửu, Bính Dần...">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="base-year"><i class="fas fa-calendar"></i> 2. Năm của Can Chi gốc:</label>
                    <div class="input-with-icon">
                        <i class="fas fa-calendar input-icon"></i>
                        <input type="number" id="base-year" placeholder="Ví dụ: 2024, 1986, 2000...">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="step"><i class="fas fa-footstep"></i> 3. Số bước nhảy (năm):</label>
                    <div class="input-with-icon">
                        <i class="fas fa-footstep input-icon"></i>
                        <input type="number" id="step" placeholder="Ví dụ: 12, 60, 10...">
                    </div>
                </div>
                
                <div class="section-title">
                    <i class="fas fa-search"></i> Các Can Chi cần tìm
                </div>
                
                <div class="canchi-grid">
                    <div class="canchi-item">
                        <label for="target-1"><i class="fas fa-hashtag"></i> 4. Can Chi cần tìm:</label>
                        <div class="input-with-icon">
                            <i class="fas fa-search input-icon"></i>
                            <input type="text" id="target-1" placeholder="Ví dụ: Giáp Tý">
                        </div>
                    </div>
                    
                    <div class="canchi-item">
                        <label for="target-2"><i class="fas fa-hashtag"></i> 5. Can Chi cần tìm:</label>
                        <div class="input-with-icon">
                            <i class="fas fa-search input-icon"></i>
                            <input type="text" id="target-2" placeholder="Ví dụ: Ất Sửu">
                        </div>
                    </div>
                    
                    <div class="canchi-item">
                        <label for="target-3"><i class="fas fa-hashtag"></i> 6. Can Chi cần tìm:</label>
                        <div class="input-with-icon">
                            <i class="fas fa-search input-icon"></i>
                            <input type="text" id="target-3" placeholder="Ví dụ: Bính Dần">
                        </div>
                    </div>
                    
                    <div class="canchi-item">
                        <label for="target-4"><i class="fas fa-hashtag"></i> 7. Can Chi cần tìm:</label>
                        <div class="input-with-icon">
                            <i class="fas fa-search input-icon"></i>
                            <input type="text" id="target-4" placeholder="Ví dụ: Đinh Mão">
                        </div>
                    </div>
                    
                    <div class="canchi-item">
                        <label for="target-5"><i class="fas fa-hashtag"></i> 8. Can Chi cần tìm:</label>
                        <div class="input-with-icon">
                            <i class="fas fa-search input-icon"></i>
                            <input type="text" id="target-5" placeholder="Ví dụ: Mậu Thìn">
                        </div>
                    </div>
                    
                    <div class="canchi-item">
                        <label for="target-6"><i class="fas fa-hashtag"></i> 9. Can Chi cần tìm:</label>
                        <div class="input-with-icon">
                            <i class="fas fa-search input-icon"></i>
                            <input type="text" id="target-6" placeholder="Ví dụ: Kỷ Tỵ">
                        </div>
                    </div>
                    
                    <div class="canchi-item">
                        <label for="target-7"><i class="fas fa-hashtag"></i> 10. Can Chi cần tìm:</label>
                        <div class="input-with-icon">
                            <i class="fas fa-search input-icon"></i>
                            <input type="text" id="target-7" placeholder="Ví dụ: Canh Ngọ">
                        </div>
                    </div>
                    
                    <div class="canchi-item">
                        <label for="target-8"><i class="fas fa-hashtag"></i> 11. Can Chi cần tìm:</label>
                        <div class="input-with-icon">
                            <i class="fas fa-search input-icon"></i>
                            <input type="text" id="target-8" placeholder="Ví dụ: Tân Mùi">
                        </div>
                    </div>
                    
                    <div class="canchi-item">
                        <label for="target-9"><i class="fas fa-hashtag"></i> 12. Can Chi cần tìm:</label>
                        <div class="input-with-icon">
                            <i class="fas fa-search input-icon"></i>
                            <input type="text" id="target-9" placeholder="Ví dụ: Nhâm Thân">
                        </div>
                    </div>
                </div>
                
                <div class="search-btn-container">
                    <button class="search-btn" id="search-btn">
                        <i class="fas fa-calculator"></i> Tìm Kiếm Can Chi
                    </button>
                </div>
            </div>
            
            <div class="output-section">
                <div class="section-title">
                    <i class="fas fa-list-alt"></i> Kết Quả Tìm Kiếm
                </div>
                
                <div class="results-container" id="results-container">
                    <div class="no-results" id="no-results">
                        <i class="fas fa-info-circle"></i>
                        <h3>Kết quả tìm kiếm sẽ hiển thị tại đây</h3>
                        <p>Vui lòng nhập đầy đủ thông tin và nhấn nút "Tìm Kiếm Can Chi"</p>
                    </div>
                </div>
                
                <div class="info-box">
                    <h3><i class="fas fa-lightbulb"></i> Hướng dẫn sử dụng</h3>
                    <p>Ứng dụng này giúp bạn tìm kiếm các năm tương ứng với Can Chi dựa trên một năm Can Chi gốc và số bước nhảy xác định.</p>
                    
                    <div class="info-steps">
                        <div class="info-step">
                            <p><span class="step-number">1</span> Nhập Can Chi gốc và năm tương ứng (ví dụ: Giáp Tý - 2024)</p>
                        </div>
                        <div class="info-step">
                            <p><span class="step-number">2</span> Nhập số bước nhảy (số năm giữa các lần lặp)</p>
                        </div>
                        <div class="info-step">
                            <p><span class="step-number">3</span> Nhập các Can Chi bạn muốn tìm (từ ô 4 đến ô 12)</p>
                        </div>
                        <div class="info-step">
                            <p><span class="step-number">4</span> Nhấn nút "Tìm Kiếm Can Chi" để xem kết quả</p>
                        </div>
                    </div>
                    
                    <p style="margin-top: 20px; font-style: italic;">Hệ thống sẽ lấy năm gốc trừ đi bước nhảy khoảng 180 lần và tìm kiếm các Can Chi bạn đã nhập trong dãy kết quả đó.</p>
                </div>
            </div>
        </div>
        
        <footer>
            <p>Ứng dụng Tìm Kiếm Năm Can Chi &copy; 2023 - Dựa trên thuật toán Can Chi cổ truyền và chu kỳ 60 hoa giáp</p>
        </footer>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const searchBtn = document.getElementById('search-btn');
            const resultsContainer = document.getElementById('results-container');
            const noResults = document.getElementById('no-results');
            const notification = document.getElementById('notification');
            const notificationText = document.getElementById('notification-text');
            
            // Mảng các Can Chi hợp lệ để kiểm tra đầu vào
            const validCanChi = [
                "Giáp Tý", "Ất Sửu", "Bính Dần", "Đinh Mão", "Mậu Thìn", "Kỷ Tỵ",
                "Canh Ngọ", "Tân Mùi", "Nhâm Thân", "Quý Dậu", "Giáp Tuất", "Ất Hợi",
                "Bính Tý", "Đinh Sửu", "Mậu Dần", "Kỷ Mão", "Canh Thìn", "Tân Tỵ",
                "Nhâm Ngọ", "Quý Mùi", "Giáp Thân", "Ất Dậu", "Bính Tuất", "Đinh Hợi",
                "Mậu Tý", "Kỷ Sửu", "Canh Dần", "Tân Mão", "Nhâm Thìn", "Quý Tỵ",
                "Giáp Ngọ", "Ất Mùi", "Bính Thân", "Đinh Dậu", "Mậu Tuất", "Kỷ Hợi",
                "Canh Tý", "Tân Sửu", "Nhâm Dần", "Quý Mão", "Giáp Thìn", "Ất Tỵ",
                "Bính Ngọ", "Đinh Mùi", "Mậu Thân", "Kỷ Dậu", "Canh Tuất", "Tân Hợi",
                "Nhâm Tý", "Quý Sửu", "Giáp Dần", "Ất Mão", "Bính Thìn", "Đinh Tỵ",
                "Mậu Ngọ", "Kỷ Mùi", "Canh Thân", "Tân Dậu", "Nhâm Tuất", "Quý Hợi"
            ];
            
            // Hiển thị thông báo
            function showNotification(message, isError = false) {
                notificationText.textContent = message;
                notification.style.display = 'flex';
                notification.style.backgroundColor = isError ? '#d32f2f' : '#4a148c';
                
                setTimeout(() => {
                    notification.style.display = 'none';
                }, 3000);
            }
            
            // Sự kiện khi nhấn nút tìm kiếm
            searchBtn.addEventListener('click', function() {
                // Lấy dữ liệu từ các ô input
                const baseCanChi = document.getElementById('canchi-name').value.trim();
                const baseYear = parseInt(document.getElementById('base-year').value);
                const step = parseInt(document.getElementById('step').value);
                
                // Lấy các Can Chi cần tìm
                const targetCanChi = [];
                for (let i = 1; i <= 9; i++) {
                    const target = document.getElementById(`target-${i}`).value.trim();
                    if (target) {
                        targetCanChi.push(target);
                    }
                }
                
                // Kiểm tra dữ liệu đầu vào
                if (!baseCanChi || isNaN(baseYear) || isNaN(step)) {
                    showNotification("Vui lòng nhập đầy đủ thông tin Can Chi gốc, năm gốc và số bước nhảy!", true);
                    return;
                }
                
                if (!validCanChi.includes(baseCanChi)) {
                    showNotification(`Can Chi gốc "${baseCanChi}" không hợp lệ. Vui lòng nhập đúng định dạng (ví dụ: Giáp Tý, Ất Sửu, Bính Dần...).`, true);
                    return;
                }
                
                // Kiểm tra các Can Chi cần tìm
                for (const canchi of targetCanChi) {
                    if (!validCanChi.includes(canchi)) {
                        showNotification(`Can Chi "${canchi}" không hợp lệ. Vui lòng nhập đúng định dạng (ví dụ: Giáp Tý, Ất Sửu, Bính Dần...).`, true);
                        return;
                    }
                }
                
                if (targetCanChi.length === 0) {
                    showNotification("Vui lòng nhập ít nhất một Can Chi cần tìm!", true);
                    return;
                }
                
                // Tìm vị trí của Can Chi gốc trong danh sách 60 Can Chi
                const baseIndex = validCanChi.indexOf(baseCanChi);
                
                // Tạo mảng kết quả các năm
                const results = [];
                
                // Thực hiện trừ đi step khoảng 180 lần
                for (let i = 0; i < 180; i++) {
                    const year = baseYear - (i * step);
                    // Tính vị trí Can Chi cho năm này
                    // Vì chu kỳ 60 năm, ta tính số năm chênh lệch so với năm gốc
                    const yearDiff = baseYear - year;
                    // Tính chỉ số Can Chi (lùi về quá khứ)
                    const canchiIndex = (baseIndex - (yearDiff % 60) + 60) % 60;
                    const canchi = validCanChi[canchiIndex];
                    
                    results.push({
                        year: year,
                        canchi: canchi,
                        sequence: i + 1
                    });
                }
                
                // Tìm kiếm các Can Chi mục tiêu trong kết quả
                const foundResults = [];
                
                for (const target of targetCanChi) {
                    for (const result of results) {
                        if (result.canchi === target) {
                            foundResults.push({
                                target: target,
                                year: result.year,
                                sequence: result.sequence,
                                distance: (result.sequence - 1) * step
                            });
                            // Chỉ lấy kết quả đầu tiên tìm thấy cho mỗi Can Chi
                            break;
                        }
                    }
                }
                
                // Hiển thị kết quả
                displayResults(foundResults, step, baseYear, baseCanChi);
                
                // Hiển thị thông báo thành công
                if (foundResults.length > 0) {
                    showNotification(`Tìm thấy ${foundResults.length} Can Chi trong kết quả!`);
                } else {
                    showNotification("Không tìm thấy Can Chi nào trong kết quả!", true);
                }
            });
            
            // Hàm hiển thị kết quả
            function displayResults(results, step, baseYear, baseCanChi) {
                // Xóa nội dung cũ
                resultsContainer.innerHTML = '';
                
                if (results.length === 0) {
                    noResults.style.display = 'block';
                    resultsContainer.appendChild(noResults);
                    return;
                }
                
                noResults.style.display = 'none';
                
                // Tạo header cho kết quả
                const resultsHeader = document.createElement('div');
                resultsHeader.className = 'results-header';
                resultsHeader.innerHTML = `
                    <h3 style="color: #1a237e; margin: 0;"><i class="fas fa-poll"></i> Kết quả tìm kiếm</h3>
                    <span style="background-color: #4a148c; color: white; padding: 8px 15px; border-radius: 20px; font-weight: bold;">
                        ${results.length} kết quả
                    </span>
                `;
                resultsContainer.appendChild(resultsHeader);
                
                // Hiển thị từng kết quả
                results.forEach((result, index) => {
                    const resultElement = document.createElement('div');
                    resultElement.className = 'result-item';
                    
                    resultElement.innerHTML = `
                        <div class="result-header">
                            <span class="result-sequence">${index + 1}</span>
                            Can Chi: <span style="color: #1a237e; text-transform: uppercase; font-size: 1.3rem;">${result.target}</span>
                        </div>
                        <div class="result-details">
                            <div class="result-detail-item">
                                <strong><i class="fas fa-calendar-alt"></i> Năm tương ứng:</strong>
                                <div class="result-year">${result.year}</div>
                            </div>
                            <div class="result-detail-item">
                                <strong><i class="fas fa-list-ol"></i> Thứ tự trong dãy:</strong>
                                <div>${result.sequence}</div>
                            </div>
                            <div class="result-detail-item">
                                <strong><i class="fas fa-ruler-horizontal"></i> Khoảng cách từ năm gốc:</strong>
                                <div>${result.distance} năm</div>
                            </div>
                            <div class="result-detail-item">
                                <strong><i class="fas fa-history"></i> Hướng thời gian:</strong>
                                <div>${result.year < baseYear ? 'Quá khứ' : 'Tương lai'}</div>
                            </div>
                        </div>
                    `;
                    
                    resultsContainer.appendChild(resultElement);
                });
                
                // Thêm thống kê
                const statsElement = document.createElement('div');
                statsElement.className = 'result-item';
                statsElement.style.backgroundColor = '#f0f8ff';
                statsElement.style.borderLeftColor = '#2196F3';
                
                const earliestYear = Math.min(...results.map(r => r.year));
                const latestYear = Math.max(...results.map(r => r.year));
                const avgDistance = results.reduce((sum, r) => sum + r.distance, 0) / results.length;
                
                statsElement.innerHTML = `
                    <div class="result-header">
                        <i class="fas fa-chart-bar"></i> Thống kê kết quả
                    </div>
                    <div class="result-details">
                        <div class="result-detail-item">
                            <strong><i class="fas fa-calculator"></i> Tổng số kết quả:</strong>
                            <div>${results.length}</div>
                        </div>
                        <div class="result-detail-item">
                            <strong><i class="fas fa-footstep"></i> Bước nhảy:</strong>
                            <div>${step} năm</div>
                        </div>
                        <div class="result-detail-item">
                            <strong><i class="fas fa-calendar"></i> Năm gốc:</strong>
                            <div>${baseYear} (${baseCanChi})</div>
                        </div>
                        <div class="result-detail-item">
                            <strong><i class="fas fa-arrows-alt-h"></i> Khoảng cách trung bình:</strong>
                            <div>${Math.round(avgDistance)} năm</div>
                        </div>
                        <div class="result-detail-item">
                            <strong><i class="fas fa-angle-double-left"></i> Năm sớm nhất:</strong>
                            <div>${earliestYear}</div>
                        </div>
                        <div class="result-detail-item">
                            <strong><i class="fas fa-angle-double-right"></i> Năm muộn nhất:</strong>
                            <div>${latestYear}</div>
                        </div>
                    </div>
                `;
                
                resultsContainer.appendChild(statsElement);
            }
            
            // Đặt giá trị mẫu để demo
            function setSampleData() {
                document.getElementById('canchi-name').value = 'Giáp Tý';
                document.getElementById('base-year').value = '2024';
                document.getElementById('step').value = '12';
                
                const sampleCanChi = ['Giáp Tý', 'Bính Dần', 'Mậu Thìn', 'Canh Ngọ', 'Nhâm Thân', 'Giáp Tuất', 'Bính Tý', 'Mậu Dần', 'Canh Thìn'];
                
                for (let i = 1; i <= 9; i++) {
                    document.getElementById(`target-${i}`).value = sampleCanChi[i-1] || '';
                }
            }
            
            // Gọi hàm đặt giá trị mẫu
            setSampleData();
        });
    </script>
</body>
</html>
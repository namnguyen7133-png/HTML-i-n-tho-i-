<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tính Toán & Tư Duy Tài Chính Cá Nhân Hoàn Chỉnh</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            padding: 0;
            background-color: #f4f7f6;
            color: #333;
        }
        .container {
            max-width: 900px;
            margin: 0 auto;
            background-color: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.1);
        }
        h2 {
            color: #007bff;
            border-bottom: 2px solid #007bff;
            padding-bottom: 10px;
            margin-top: 25px;
        }
        h3 {
            color: #28a745;
            margin-top: 20px;
        }
        label {
            display: block;
            margin-top: 10px;
            font-weight: bold;
        }
        input[type="number"] {
            padding: 10px;
            margin: 5px 0 15px 0;
            border: 1px solid #ccc;
            border-radius: 4px;
            width: 95%;
            box-sizing: border-box;
            font-size: 16px;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
        }
        th, td {
            border: 1px solid #ddd;
            padding: 12px;
            text-align: left;
        }
        th {
            background-color: #28a745;
            color: white;
        }
        tr:nth-child(even) {
            background-color: #f2f2f2;
        }
        ul {
            list-style: none;
            padding-left: 0;
        }
        ul li {
            background: #e9ecef;
            margin-bottom: 10px;
            padding: 10px;
            border-left: 4px solid #007bff;
            border-radius: 4px;
        }
        .note {
            font-style: italic;
            color: #6c757d;
            margin-top: 15px;
        }
        .result-box {
            background-color: #fff3cd;
            border: 1px solid #ffc107;
            padding: 15px;
            margin-top: 15px;
            border-radius: 4px;
        }
    </style>
</head>
<body>

<div class="container">
    <h2>CÔNG CỤ TÍNH TOÁN VÀ TƯ DUY TÀI CHÍNH CÁ NHÂN</h2>

    <label for="thuNhap">Nhập Thu Nhập Hàng Tháng (VNĐ):</label>
    <input type="number" id="thuNhap" value="20000000" min="0" oninput="tinhToan()">

    ---

    <h3>1. Phương pháp Quản lý Tài chính 6 Lọ</h3>
    <table id="ketQua6Lo">
        </table>
    <div class="note">* Nguồn: Video "Chi tiêu thông minh: 6 Lọ Tiết Kiệm".</div>

    ---
    
    <h3>2. Công thức Tự do Tài chính & ROI (Cashflow Game)</h3>

    <h4>2.1. Tính Tỷ lệ Lợi nhuận trên Vốn Đầu tư (ROI)</h4>
    <label for="vonDauTu">Vốn Đầu tư Ban đầu (Down Payment/Price - VNĐ):</label>
    <input type="number" id="vonDauTu" value="50000000" min="0" oninput="tinhToan()">
    <label for="loiNhuanThuan">Lợi nhuận Thuần/Dòng tiền hàng tháng (Cashflow - VNĐ):</label>
    <input type="number" id="loiNhuanThuan" value="200000" min="0" oninput="tinhToan()">
    <div id="ketQuaROI" class="result-box"></div>

    <h4>2.2. Vốn Cần Thiết để Đạt Tự do Tài chính</h4>
    <p>Sử dụng "Chi tiêu Cần thiết" (Lọ 1 - 55%) làm Thu nhập Thụ động Cần thiết.</p>
    <label for="roiMongMuon">Tỷ lệ Lợi nhuận Mong muốn (ROI, %/năm):</label>
    <input type="number" id="roiMongMuon" value="5" min="0.1" max="100" step="0.1" oninput="tinhToan()">
    <div id="ketQuaTdtc" class="result-box"></div>

    ---
    
    <h3>3. Kế hoạch Tích lũy Vốn Tự do Tài chính</h3>
    <p>Thời gian cần thiết để đạt được số vốn cần thiết ở mục 2.2, chỉ dùng Lọ 5 (Quỹ Tự do Tài chính) mà chưa tính lãi kép/lợi nhuận đầu tư.</p>
    <div id="ketQuaThoiGian" class="result-box"></div>

    ---

    <h3>4. Tư duy Cốt lõi về Tiền bạc (Từ video "3 Bí Quyết Làm Giàu")</h3>
    <p>Ba Bí quyết Làm giàu Đơn giản mà người Do Thái áp dụng:</p>
    <ul>
        <li>**Trân trọng Điều nhỏ bé:** Quản lý tốt 1000 đồng trước khi nghĩ đến 1 tỷ đồng.</li>
        <li>**Kỷ luật Tích lũy (Giữ lại 10%):** Bắt buộc phải giữ lại một phần tiền kiếm được.</li>
        <li>**Đặt Mục tiêu lên trên Cảm xúc:** Mục tiêu là kim chỉ nam.</li>
    </ul>
    <p style="font-weight: bold; margin-top: 15px;">4 Khoản Tiền Nên Hào Phóng Chi Tiêu (Đầu tư giá trị):</p>
    <ul>
        <li>Tiền dành cho **Cha mẹ**.</li>
        <li>Tiền dành cho **Vợ/Chồng**.</li>
        <li>Tiền dành cho **Con cái** (Giáo dục).</li>
        <li>Tiền dành cho **Chính mình** (Sức khỏe/Phát triển bản thân).</li>
    </ul>
</div>

<script>
    function tinhToan() {
        // Lấy giá trị input
        const thuNhapEl = document.getElementById('thuNhap');
        const roiEl = document.getElementById('roiMongMuon');
        const vonDauTuEl = document.getElementById('vonDauTu');
        const loiNhuanThuanEl = document.getElementById('loiNhuanThuan');
        
        const thuNhap = parseFloat(thuNhapEl.value);
        const roiPhanTram = parseFloat(roiEl.value);
        const vonDauTu = parseFloat(vonDauTuEl.value);
        const loiNhuanThuan = parseFloat(loiNhuanThuanEl.value);

        // Thiết lập định dạng tiền tệ
        const formatter = new Intl.NumberFormat('vi-VN', { 
            style: 'currency', 
            currency: 'VND', 
            minimumFractionDigits: 0 
        });

        if (isNaN(thuNhap) || thuNhap <= 0) {
            document.getElementById('ketQua6Lo').innerHTML = '<tr><td colspan="3">Vui lòng nhập thu nhập hợp lệ.</td></tr>';
            document.getElementById('ketQuaTdtc').innerHTML = '';
            document.getElementById('ketQuaROI').innerHTML = '';
            document.getElementById('ketQuaThoiGian').innerHTML = '';
            return;
        }

        const percentages = {
            'Lọ 1: Chi tiêu Cần thiết (55%)': { tyLe: 0.55, mucDich: 'Chi tiêu thiết yếu, trả nợ.' },
            'Lọ 5: Quỹ Tự do Tài chính (10%)': { tyLe: 0.10, mucDich: 'Đầu tư, kinh doanh để tạo thu nhập thụ động.' },
            'Lọ 2: Tiết kiệm Dài hạn (10%)': { tyLe: 0.10, mucDich: 'Mục tiêu lớn (nhà, xe, hưu trí).' },
            'Lọ 3: Quỹ Giáo dục (10%)': { tyLe: 0.10, mucDich: 'Phát triển bản thân, học tập.' },
            'Lọ 4: Quỹ Hưởng thụ (10%)': { tyLe: 0.10, mucDich: 'Cải thiện đời sống tinh thần.' },
            'Lọ 6: Quỹ Từ thiện (5%)': { tyLe: 0.05, mucDich: 'Giúp đỡ người khác.' }
        };

        let chiPhiCanThiet = 0;
        let contributionFFJar = 0;
        
        // --- 1. Tính toán 6 Lọ ---
        let html6Lo = '<tr><th>Lọ Số</th><th>Tên Quỹ</th><th>Mức Phân bổ (VNĐ)</th></tr>';
        for (const [tenLo, data] of Object.entries(percentages)) {
            const soTien = thuNhap * data.tyLe;
            const tenLoNgan = tenLo.split(':')[1].split('(')[0].trim();
            const soLo = tenLo.split(':')[0].replace('Lọ ', '');

            html6Lo += `<tr>
                <td>${soLo}</td>
                <td>${tenLoNgan} (${data.tyLe * 100}%)</td>
                <td><span style="font-weight: bold;">${formatter.format(soTien)}</span><br><span style="font-size: 0.9em; font-style: italic;">(${data.mucDich})</span></td>
            </tr>`;
            
            if (soLo === '1') {
                chiPhiCanThiet = soTien;
            } else if (soLo === '5') {
                contributionFFJar = soTien; // Lọ 5 cho mục đích tích lũy vốn
            }
        }
        
        const tongSoTien = thuNhap; 
        html6Lo += `<tr style="font-weight: bold; background-color: #ffe0b2;"><td>TỔNG</td><td></td><td>${formatter.format(tongSoTien)}</td></tr>`;
        document.getElementById('ketQua6Lo').innerHTML = html6Lo;

        // --- 2.1. Tính ROI của một Deal ---
        let htmlROI = '';
        if (vonDauTu > 0 && loiNhuanThuan >= 0) {
            const loiNhuanNam = loiNhuanThuan * 12; 
            const roi = (loiNhuanNam / vonDauTu) * 100;
            
            let phanLoai = '';
            if (roi >= 10) { phanLoai = 'ĐẶC BIỆT (>10%)'; }
            else if (roi > 5) { phanLoai = 'TỐT HƠN (5% - 10%)'; }
            else if (roi >= 4) { phanLoai = 'TỐT (4% - 5%)'; }
            else if (roi > 0) { phanLoai = 'TRUNG BÌNH (0% - <4%)'; }
            else { phanLoai = 'XẤU/Không có lợi nhuận'; }

            htmlROI = `
                <p><strong>Lợi nhuận Năm (Dòng tiền):</strong> ${formatter.format(loiNhuanNam)}</p>
                <p style="font-size: 1.1em; font-weight: bold;">
                    Tỷ lệ ROI = <span style="color: #007bff;">${roi.toFixed(2)}%</span>
                </p>
                <p><strong>Phân loại Deal:</strong> <span style="color: darkred; font-weight: bold;">${phanLoai}</span></p>
            `;
        } else {
            htmlROI = '<p>Vui lòng nhập Vốn đầu tư và Lợi nhuận thuần hợp lệ.</p>';
        }
        document.getElementById('ketQuaROI').innerHTML = htmlROI;


        // --- 2.2. Tính Vốn Cần Thiết để Đạt TDTTC ---
        let tienMatCanThietNam = 0;
        if (chiPhiCanThiet > 0 && roiPhanTram > 0) {
            const roiThapPhan = roiPhanTram / 100;
            const tndtCanThietNam = chiPhiCanThiet * 12;
            tienMatCanThietNam = tndtCanThietNam / roiThapPhan; // Vốn Cần Thiết
            
            let ketQuaTdtcHtml = `
                <p><strong>Chi phí Cần thiết (Lọ 1/tháng):</strong> ${formatter.format(chiPhiCanThiet)}</p>
                <p><strong>Tỷ lệ Lợi nhuận Mong muốn (ROI/năm):</strong> ${roiPhanTram}%</p>
                <p style="font-size: 1.1em; font-weight: bold;">
                    Vốn Tối thiểu Cần Thiết: 
                    <br>
                    = ${formatter.format(tndtCanThietNam)} / ${roiPhanTram}%
                    <br>
                    = <span style="font-size: 1.3em; color: darkred;">${formatter.format(tienMatCanThietNam)}</span> VNĐ
                </p>
            `;
            document.getElementById('ketQuaTdtc').innerHTML = ketQuaTdtcHtml;
        } else {
            document.getElementById('ketQuaTdtc').innerHTML = '<p>Vui lòng nhập đủ Thu nhập và ROI mong muốn.</p>';
        }

        // --- 3. Kế hoạch Tích lũy Vốn TDTTC ---
        let htmlThoiGian = '';
        if (tienMatCanThietNam > 0 && contributionFFJar > 0) {
            const thoiGianThang = tienMatCanThietNam / contributionFFJar;
            const thoiGianNam = thoiGianThang / 12;
            
            htmlThoiGian = `
                <p><strong>Vốn cần tích lũy (A):</strong> ${formatter.format(tienMatCanThietNam)}</p>
                <p><strong>Tiết kiệm/Đầu tư hàng tháng (Lọ 5 - B):</strong> ${formatter.format(contributionFFJar)}</p>
                <p style="font-size: 1.1em; font-weight: bold;">
                    Thời gian để tích lũy (A/B):
                    <br>
                    <span style="color: darkred; font-size: 1.2em;">${Math.ceil(thoiGianThang)} tháng</span> 
                    (khoảng ${thoiGianNam.toFixed(1)} năm)
                </p>
                <p class="note">
                    *Lưu ý: Tính toán này **chưa bao gồm lãi kép/lợi nhuận** từ việc đầu tư Lọ 5 trong quá trình tích lũy. Nếu bạn đầu tư hiệu quả, thời gian thực tế sẽ ngắn hơn.
                </p>
            `;
        } else {
            htmlThoiGian = '<p>Không thể tính toán. Vốn cần thiết hoặc khoản đóng góp hàng tháng không hợp lệ.</p>';
        }
        document.getElementById('ketQuaThoiGian').innerHTML = htmlThoiGian;

    }

    // Tự động tính toán khi trang được tải lần đầu tiên
    document.addEventListener('DOMContentLoaded', tinhToan);
</script>

</body>
</html>

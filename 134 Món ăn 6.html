<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tra Cứu Món Ăn Theo Bệnh & Thực Đơn 7 Ngày</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: #f5f9f7;
            color: #333;
            line-height: 1.6;
            padding: 20px;
            max-width: 1200px;
            margin: 0 auto;
        }

        header {
            text-align: center;
            padding: 30px 20px;
            background: linear-gradient(135deg, #2c7a5e 0%, #3a9e7a 100%);
            color: white;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 10px 20px rgba(44, 122, 94, 0.2);
        }

        header h1 {
            font-size: 2.4rem;
            margin-bottom: 10px;
        }

        header p {
            font-size: 1.1rem;
            max-width: 900px;
            margin: 0 auto;
            opacity: 0.95;
        }

        .search-container {
            background-color: white;
            border-radius: 12px;
            padding: 25px;
            margin-bottom: 30px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.08);
        }

        .search-box {
            margin-bottom: 20px;
        }

        .search-box label {
            display: block;
            margin-bottom: 10px;
            font-weight: 600;
            color: #2c7a5e;
            font-size: 1.1rem;
        }

        .disease-options {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 12px;
            margin-top: 10px;
        }

        .disease-option {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            background-color: #f0f7f4;
            border: 2px solid #d1e7dd;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .disease-option:hover {
            background-color: #e2f1eb;
            border-color: #2c7a5e;
        }

        .disease-option.selected {
            background-color: #2c7a5e;
            color: white;
            border-color: #2c7a5e;
        }

        .disease-option i {
            margin-right: 10px;
            font-size: 1.2rem;
        }

        .button {
            background-color: #2c7a5e;
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 8px;
        }

        .button:hover {
            background-color: #23664f;
            transform: translateY(-2px);
            box-shadow: 0 5px 12px rgba(35, 102, 79, 0.3);
        }

        .button-clear {
            background-color: #6c757d;
            margin-left: 15px;
        }

        .button-clear:hover {
            background-color: #5a6268;
        }

        .results-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-top: 30px;
        }

        @media (max-width: 900px) {
            .results-container {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background-color: white;
            border-radius: 12px;
            padding: 25px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
            height: fit-content;
        }

        .card h2 {
            color: #2c7a5e;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #e9f5ef;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .card h2 i {
            font-size: 1.4rem;
        }

        .dishes-list {
            max-height: 500px;
            overflow-y: auto;
            padding-right: 10px;
        }

        /* Custom scrollbar */
        .dishes-list::-webkit-scrollbar {
            width: 8px;
        }

        .dishes-list::-webkit-scrollbar-track {
            background: #f1f1f1;
            border-radius: 10px;
        }

        .dishes-list::-webkit-scrollbar-thumb {
            background: #b8d5c9;
            border-radius: 10px;
        }

        .dish-item {
            background-color: #f9fdfb;
            border-left: 5px solid #3a9e7a;
            margin-bottom: 18px;
            padding: 20px;
            border-radius: 8px;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .dish-item h3 {
            color: #2c7a5e;
            margin-bottom: 10px;
            font-size: 1.2rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .dish-item p {
            margin-bottom: 8px;
            color: #555;
            font-size: 0.95rem;
        }

        .calorie-badge {
            background-color: #e6f4ee;
            color: #2c7a5e;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.85rem;
            font-weight: 600;
        }

        .property {
            display: inline-block;
            background-color: #e9f5ef;
            color: #2c7a5e;
            padding: 4px 10px;
            border-radius: 20px;
            font-size: 0.85rem;
            margin-right: 8px;
            margin-top: 5px;
            font-weight: 500;
        }

        /* Menu styles */
        .menu-day {
            background-color: #f9fdfb;
            border-radius: 10px;
            padding: 20px;
            margin-bottom: 20px;
            border: 1px solid #e2f1eb;
        }

        .menu-day h3 {
            color: #2c7a5e;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px dashed #d1e7dd;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .meal-time {
            margin-bottom: 15px;
        }

        .meal-time h4 {
            color: #3a9e7a;
            margin-bottom: 8px;
            font-size: 1.1rem;
        }

        .meal-details {
            background-color: white;
            padding: 12px;
            border-radius: 8px;
            border-left: 3px solid #b8d5c9;
        }

        .ingredients {
            font-size: 0.9rem;
            color: #666;
            margin-top: 8px;
            padding-left: 15px;
        }

        .menu-note {
            background-color: #fff9e6;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #e6b400;
            margin-top: 20px;
            grid-column: 1 / -1;
        }

        .menu-note h3 {
            color: #b58900;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .warning {
            background-color: #ffeaea;
            padding: 20px;
            border-radius: 10px;
            border-left: 5px solid #e63946;
            margin-top: 30px;
            grid-column: 1 / -1;
        }

        .warning h3 {
            color: #e63946;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        footer {
            text-align: center;
            margin-top: 40px;
            padding-top: 20px;
            color: #666;
            font-size: 0.9rem;
            border-top: 1px solid #ddd;
        }

        .no-results {
            text-align: center;
            padding: 40px 20px;
            color: #888;
            font-style: italic;
        }

        .total-calories {
            background-color: #e6f4ee;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            text-align: center;
            font-weight: 600;
            color: #2c7a5e;
        }
    </style>
</head>
<body>
    <header>
        <h1><i class="fas fa-stethoscope"></i> Tra Cứu Món Ăn Theo Bệnh & Thực Đơn 7 Ngày</h1>
        <p>Chọn bệnh/tình trạng sức khỏe để xem các món ăn phù hợp và thực đơn 7 ngày chi tiết với định lượng, calo và lưu ý cụ thể.</p>
    </header>

    <div class="search-container">
        <div class="search-box">
            <label for="diseaseSearch"><i class="fas fa-heartbeat"></i> Chọn bệnh/tình trạng sức khỏe của bạn:</label>
            <div class="disease-options" id="diseaseOptions">
                <div class="disease-option" data-disease="tieu-duong">
                    <i class="fas fa-syringe"></i> Tiểu đường
                </div>
                <div class="disease-option" data-disease="tieu-duong-beo-phi">
                    <i class="fas fa-weight"></i> Tiểu đường + Béo phì
                </div>
                <div class="disease-option" data-disease="tieu-duong-gay-yeu">
                    <i class="fas fa-user-injured"></i> Tiểu đường + Gầy yếu
                </div>
                <div class="disease-option" data-disease="cao-huyet-ap">
                    <i class="fas fa-heart"></i> Cao huyết áp
                </div>
                <div class="disease-option" data-disease="mo-mau">
                    <i class="fas fa-tint"></i> Mỡ máu cao
                </div>
                <div class="disease-option" data-disease="mat-ngu">
                    <i class="fas fa-bed"></i> Mất ngủ
                </div>
                <div class="disease-option" data-disease="suy-nhuoc">
                    <i class="fas fa-procedures"></i> Suy nhược cơ thể
                </div>
                <div class="disease-option" data-disease="khat-nuoc">
                    <i class="fas fa-tint"></i> Khát nước nhiều (Âm hư)
                </div>
            </div>
        </div>
        
        <div class="search-box">
            <label for="customSearch"><i class="fas fa-search"></i> Hoặc tìm kiếm theo triệu chứng/món ăn:</label>
            <input type="text" id="customSearch" placeholder="Ví dụ: hạ đường huyết, thanh nhiệt, món cháo..." style="width: 100%; padding: 15px; border: 2px solid #d1e7dd; border-radius: 8px; font-size: 1rem;">
        </div>
        
        <div style="display: flex; justify-content: center; margin-top: 20px;">
            <button class="button" id="searchButton">
                <i class="fas fa-search"></i> Tìm Kiếm & Hiện Thực Đơn
            </button>
            <button class="button button-clear" id="clearButton">
                <i class="fas fa-eraser"></i> Xóa Tìm
            </button>
        </div>
    </div>

    <div class="results-container" id="resultsContainer" style="display: none;">
        <!-- Cột 1: Món ăn phù hợp -->
        <div class="card">
            <h2><i class="fas fa-utensils"></i> Món Ăn Phù Hợp</h2>
            <div class="dishes-list" id="dishesList">
                <!-- Danh sách món ăn sẽ được điền bởi JavaScript -->
            </div>
        </div>

        <!-- Cột 2: Thực đơn 7 ngày chi tiết -->
        <div class="card">
            <h2><i class="fas fa-calendar-alt"></i> Thực Đơn 7 Ngày Chi Tiết</h2>
            <div id="weeklyMenu">
                <!-- Thực đơn 7 ngày sẽ được điền bởi JavaScript -->
            </div>
        </div>

        <!-- Lưu ý chung -->
        <div class="menu-note">
            <h3><i class="fas fa-info-circle"></i> Nguyên Tắc Chung Khi Áp Dụng Thực Đơn</h3>
            <ul>
                <li><strong>Thực đơn tính cho 1 người trưởng thành</strong> (~55-70kg), có thể điều chỉnh tăng giảm 10-20% tùy nhu cầu.</li>
                <li><strong>Calo là ước tính gần đúng</strong> (±10-15%), phù hợp cho kiểm soát bệnh mạn tính.</li>
                <li><strong>Uống đủ nước</strong> (1.5-2 lít/ngày), có thể dùng trà thảo mộc không đường.</li>
                <li><strong>Ăn chậm, nhai kỹ</strong>, chia nhỏ bữa nếu cần (5-6 bữa/ngày).</li>
            </ul>
        </div>

        <!-- Cảnh báo về thuốc Tây -->
        <div class="warning">
            <h3><i class="fas fa-exclamation-triangle"></i> Lưu Ý Quan Trọng Với Thuốc Tây</h3>
            <ul>
                <li><strong>Đang dùng Metformin/Insulin</strong>: Không ăn quá nhiều khổ qua, trà râu bắp, đậu xanh trong cùng ngày để tránh tụt đường huyết.</li>
                <li><strong>Đang dùng thuốc huyết áp</strong>: Tránh uống trà râu bắp liên tục quá 5 ngày.</li>
                <li><strong>Đang dùng Statin (hạ mỡ máu)</strong>: Không ăn bưởi, không uống rượu.</li>
                <li><strong>Món ăn chỉ hỗ trợ, không thay thế thuốc</strong>: Luôn tham vấn bác sĩ trước khi thay đổi chế độ ăn khi đang điều trị.</li>
            </ul>
        </div>
    </div>

    <footer>
        <p>Công cụ được xây dựng dựa trên nguyên tắc Đông - Tây y kết hợp, ưu tiên nguyên liệu dễ tìm, giá cả phải chăng.</p>
        <p>© 2025 - Thông tin mang tính chất tham khảo, không thay thế tư vấn y tế chuyên nghiệp.</p>
    </footer>

    <script>
        // ========== CƠ SỞ DỮ LIỆU MÓN ĂN THEO BỆNH ==========
        const dishesByDisease = {
            "tieu-duong": [
                {
                    name: "Cháo gạo lứt hạt sen",
                    description: "Cháo ngũ cốc nguyên hạt, dễ tiêu hóa, ổn định đường huyết.",
                    calories: "~230 kcal",
                    effects: ["Ổn định đường huyết", "An thần", "Bổ tỳ vị"],
                    ingredients: ["Gạo lứt: 40g", "Hạt sen: 30g", "Nước: 600ml"]
                },
                {
                    name: "Canh khổ qua nhồi thịt",
                    description: "Món canh thanh mát, giúp hạ đường huyết tự nhiên.",
                    calories: "~220 kcal",
                    effects: ["Hạ đường huyết", "Thanh nhiệt", "Giải độc"],
                    ingredients: ["Khổ qua: 200g", "Thịt heo nạc: 80g", "Gia vị nhạt"]
                },
                {
                    name: "Cá lóc hấp gừng",
                    description: "Cá đồng hấp với gừng, giàu đạm chất lượng cao.",
                    calories: "~240 kcal",
                    effects: ["Bổ tỳ vị", "Kháng khuẩn", "Ổn định đường"],
                    ingredients: ["Cá lóc: 120g", "Gừng: 5g", "Hành lá"]
                },
                {
                    name: "Rau luộc chấm nước mắm nhạt",
                    description: "Các loại rau xanh luộc, cung cấp chất xơ và vitamin.",
                    calories: "~50-80 kcal",
                    effects: ["Bổ sung chất xơ", "Thanh nhiệt", "Hỗ trợ tiêu hóa"],
                    ingredients: ["Rau cải/xà lách: 150g", "Nước mắm pha loãng"]
                }
            ],
            "tieu-duong-beo-phi": [
                {
                    name: "Canh bí đao nấu tôm",
                    description: "Món canh thanh mát, ít calo, giúp giảm cân lành mạnh.",
                    calories: "~150 kcal",
                    effects: ["Thanh nhiệt", "Lợi tiểu", "Hỗ trợ giảm cân"],
                    ingredients: ["Bí đao: 200g", "Tôm tươi: 50g", "Hành ngò"]
                },
                {
                    name: "Salad rau sống không dầu",
                    description: "Rau tươi trộn giấm táo hoặc chanh, ít calo.",
                    calories: "~60 kcal",
                    effects: ["Giàu chất xơ", "Thanh nhiệt", "Hỗ trợ giảm béo"],
                    ingredients: ["Xà lách, dưa leo, cà chua: 200g", "Giấm táo/chanh"]
                },
                {
                    name: "Ức gà hấp",
                    description: "Thịt gà không da, hấp cách thủy với ít gia vị.",
                    calories: "~180 kcal",
                    effects: ["Cung cấp đạm nạc", "Ít chất béo", "Giảm cảm giác thèm ăn"],
                    ingredients: ["Ức gà: 120g", "Gừng, sả", "Gia vị nhạt"]
                },
                {
                    name: "Súp lơ luộc",
                    description: "Súp lơ trắng hoặc xanh luộc chín tới.",
                    calories: "~70 kcal",
                    effects: ["Giàu chất xơ", "Chống oxy hóa", "Hỗ trợ giảm cân"],
                    ingredients: ["Súp lơ: 200g", "Muối (rất ít)"]
                }
            ],
            "tieu-duong-gay-yeu": [
                {
                    name: "Cháo gà ta hầm hạt sen",
                    description: "Cháo bổ dưỡng, giúp tăng cân lành mạnh cho người tiểu đường.",
                    calories: "~320 kcal",
                    effects: ["Bổ khí huyết", "An thần", "Tăng cường dinh dưỡng"],
                    ingredients: ["Gà ta: 100g", "Gạo lứt: 40g", "Hạt sen: 30g"]
                },
                {
                    name: "Trứng gà hấp nấm",
                    description: "Trứng hấp với nấm rơm, mềm dễ ăn, giàu dinh dưỡng.",
                    calories: "~200 kcal",
                    effects: ["Bổ sung đạm chất lượng", "Dễ tiêu hóa", "Tăng cường sức khỏe"],
                    ingredients: ["Trứng gà: 2 quả", "Nấm rơm: 50g", "Hành lá"]
                },
                {
                    name: "Cá chép hấp gừng",
                    description: "Cá chép hấp với gừng, bổ tỳ vị, dễ hấp thu.",
                    calories: "~280 kcal",
                    effects: ["Bổ tỳ vị", "Tăng cường dinh dưỡng", "Dễ tiêu"],
                    ingredients: ["Cá chép: 150g", "Gừng: 10g", "Nấm hương"]
                },
                {
                    name: "Đậu hũ sốt cà chua",
                    description: "Đậu hũ non sốt với cà chua, mềm dễ ăn.",
                    calories: "~180 kcal",
                    effects: ["Bổ sung đạm thực vật", "Dễ tiêu hóa", "Cung cấp năng lượng"],
                    ingredients: ["Đậu hũ non: 150g", "Cà chua: 100g", "Hành tỏi (ít)"]
                }
            ],
            "cao-huyet-ap": [
                {
                    name: "Canh cần tây nấu tôm",
                    description: "Cần tây có tác dụng hạ huyết áp tự nhiên.",
                    calories: "~140 kcal",
                    effects: ["Hạ huyết áp", "Lợi tiểu", "Thanh nhiệt"],
                    ingredients: ["Cần tây: 150g", "Tôm tươi: 60g", "Nước dùng nhạt"]
                },
                {
                    name: "Cá hồi áp chảo không dầu",
                    description: "Cá hồi giàu Omega-3 tốt cho tim mạch.",
                    calories: "~250 kcal",
                    effects: ["Tốt cho tim mạch", "Giảm viêm", "Ổn định huyết áp"],
                    ingredients: ["Cá hồi phi-lê: 120g", "Chanh, tiêu", "Rau thơm"]
                },
                {
                    name: "Cháo yến mạch",
                    description: "Yến mạch giúp giảm cholesterol và huyết áp.",
                    calories: "~180 kcal",
                    effects: ["Hạ cholesterol", "Ổn định huyết áp", "Giàu chất xơ"],
                    ingredients: ["Yến mạch cán: 50g", "Nước: 500ml", "Mè đen: 5g"]
                },
                {
                    name: "Nước ép cần tây",
                    description: "Nước ép cần tây tươi, uống trước bữa ăn.",
                    calories: "~30 kcal",
                    effects: ["Hạ huyết áp", "Lợi tiểu", "Thanh nhiệt"],
                    ingredients: ["Cần tây: 200g", "Nước lọc: 100ml"]
                }
            ]
        };

        // ========== THỰC ĐƠN 7 NGÀY THEO BỆNH ==========
        const weeklyMenus = {
            "tieu-duong": [
                {
                    day: "Ngày 1",
                    meals: {
                        morning: { name: "Cháo gạo lứt hạt sen", details: "Gạo lứt: 40g, Hạt sen: 30g, Nước: 600ml", calories: "~230 kcal" },
                        lunch: { name: "Canh khổ qua nhồi thịt", details: "Khổ qua: 200g, Thịt heo nạc: 80g, Gia vị nhạt", calories: "~220 kcal" },
                        dinner: { name: "Cá lóc hấp gừng + Rau luộc", details: "Cá lóc: 120g, Rau cải: 150g, Gừng: 5g", calories: "~240 kcal" }
                    },
                    totalCalories: "~690 kcal",
                    note: "Ngày đầu tiên nhẹ nhàng, dễ tiêu hóa. Uống trà râu bắp sau bữa trưa 30 phút."
                },
                {
                    day: "Ngày 2",
                    meals: {
                        morning: { name: "Yến mạch + mè đen", details: "Yến mạch cán: 40g, Mè đen: 10g, Nước: 400ml", calories: "~260 kcal" },
                        lunch: { name: "Gà ta hầm nấm rơm", details: "Gà ta bỏ da: 120g, Nấm rơm: 100g, Gừng: 5g", calories: "~280 kcal" },
                        dinner: { name: "Canh rau ngót thịt băm", details: "Rau ngót: 150g, Thịt nạc: 50g, Nước dùng", calories: "~160 kcal" }
                    },
                    totalCalories: "~700 kcal",
                    note: "Hôm nay có thịt gà, cung cấp đạm chất lượng cao. Không uống trà râu bắp nếu đang dùng Metformin."
                },
                {
                    day: "Ngày 3",
                    meals: {
                        morning: { name: "Khoai lang luộc", details: "Khoai lang: 100g (khoảng 1 củ vừa)", calories: "~90 kcal" },
                        lunch: { name: "Cá chép nấu cà chua", details: "Cá chép: 120g, Cà chua: 100g, Hành lá", calories: "~250 kcal" },
                        dinner: { name: "Đậu hũ hấp + Canh bí đao", details: "Đậu hũ: 120g, Bí đao: 200g, Nấm: 30g", calories: "~150 kcal" }
                    },
                    totalCalories: "~490 kcal",
                    note: "Ngày nhẹ nhàng, thanh đạm. Có thể thêm 1 quả chuối chín vừa vào buổi chiều nếu đói."
                },
                {
                    day: "Ngày 4",
                    meals: {
                        morning: { name: "Cháo gạo lứt + đậu xanh", details: "Gạo lứt: 40g, Đậu xanh: 30g, Nước: 600ml", calories: "~240 kcal" },
                        lunch: { name: "Canh cá lóc + bí đao", details: "Cá lóc: 120g, Bí đao: 200g, Hành ngò", calories: "~260 kcal" },
                        dinner: { name: "Đậu hũ hấp + rau luộc", details: "Đậu hũ: 120g, Rau cải/ngót: 150g", calories: "~160 kcal" }
                    },
                    totalCalories: "~660 kcal",
                    note: "Lặp lại ngày 1 với biến tấu nhẹ. Uống đủ nước trong ngày."
                },
                {
                    day: "Ngày 5",
                    meals: {
                        morning: { name: "Yến mạch + mè đen", details: "Yến mạch cán: 40g, Mè đen: 10g, Nước: 400ml", calories: "~260 kcal" },
                        lunch: { name: "Gà ta hầm nấm rơm", details: "Gà ta bỏ da: 120g, Nấm rơm: 100g, Gừng: 5g", calories: "~280 kcal" },
                        dinner: { name: "Canh khổ qua", details: "Khổ qua: 150g, Nước dùng trong", calories: "~40 kcal" }
                    },
                    totalCalories: "~580 kcal",
                    note: "Ngày ít calo, phù hợp nếu ít vận động. Không ăn thêm trái cây ngọt."
                },
                {
                    day: "Ngày 6",
                    meals: {
                        morning: { name: "Khoai lang luộc", details: "Khoai lang: 100g (khoảng 1 củ vừa)", calories: "~90 kcal" },
                        lunch: { name: "Cá chép kho nhạt", details: "Cá chép: 120g, Gừng, hành, nước mắm nhạt", calories: "~240 kcal" },
                        dinner: { name: "Canh rau ngót", details: "Rau ngót: 200g, Nước dùng trong", calories: "~60 kcal" }
                    },
                    totalCalories: "~390 kcal",
                    note: "Ngày nhẹ nhất trong tuần. Có thể ăn thêm 1 hộp sữa chua không đường vào buổi tối."
                },
                {
                    day: "Ngày 7",
                    meals: {
                        morning: { name: "Cháo gạo lứt hạt sen", details: "Gạo lứt: 40g, Hạt sen: 30g, Nước: 600ml", calories: "~230 kcal" },
                        lunch: { name: "Cá lóc hấp gừng + rau", details: "Cá lóc: 120g, Rau luộc: 150g, Gừng: 5g", calories: "~240 kcal" },
                        dinner: { name: "Canh bí đao nấu tôm", details: "Bí đao: 200g, Tôm tươi: 50g, Hành ngò", calories: "~150 kcal" }
                    },
                    totalCalories: "~620 kcal",
                    note: "Kết thúc tuần với thực đơn cân bằng. Chuẩn bị đi chợ cho tuần mới."
                }
            ],
            "tieu-duong-beo-phi": [
                {
                    day: "Ngày 1",
                    meals: {
                        morning: { name: "Cháo yến mạch loãng", details: "Yến mạch: 30g, Nước: 500ml", calories: "~120 kcal" },
                        lunch: { name: "Canh bí đao nấu tôm", details: "Bí đao: 250g, Tôm: 50g", calories: "~150 kcal" },
                        dinner: { name: "Salad rau sống không dầu", details: "Rau tươi các loại: 200g, Giấm táo", calories: "~60 kcal" }
                    },
                    totalCalories: "~330 kcal",
                    note: "Ngày đầu tiên ít calo, thanh lọc cơ thể. Uống nhiều nước."
                },
                // Các ngày tiếp theo có cấu trúc tương tự
            ]
        };

        // ========== KHỞI TẠO TRANG ==========
        let selectedDisease = null;
        const diseaseOptions = document.querySelectorAll('.disease-option');
        
        // Gán sự kiện click cho các lựa chọn bệnh
        diseaseOptions.forEach(option => {
            option.addEventListener('click', function() {
                // Bỏ chọn tất cả
                diseaseOptions.forEach(opt => opt.classList.remove('selected'));
                // Chọn option được click
                this.classList.add('selected');
                selectedDisease = this.getAttribute('data-disease');
                // Điền vào ô tìm kiếm
                document.getElementById('customSearch').value = this.textContent.trim();
            });
        });

        // Gán sự kiện cho nút tìm kiếm
        document.getElementById('searchButton').addEventListener('click', function() {
            performSearch();
        });

        // Gán sự kiện cho nút xóa
        document.getElementById('clearButton').addEventListener('click', function() {
            clearSearch();
        });

        // Cho phép tìm kiếm bằng Enter
        document.getElementById('customSearch').addEventListener('keyup', function(event) {
            if (event.key === 'Enter') {
                performSearch();
            }
        });

        // ========== HÀM TÌM KIẾM ==========
        function performSearch() {
            const customSearch = document.getElementById('customSearch').value.toLowerCase().trim();
            let searchDisease = selectedDisease;
            
            // Nếu có tìm kiếm tùy chỉnh, ưu tiên nó
            if (customSearch) {
                // Tìm bệnh phù hợp với từ khóa tùy chỉnh
                const matchedDisease = findDiseaseByKeyword(customSearch);
                if (matchedDisease) {
                    searchDisease = matchedDisease;
                    // Cập nhật giao diện để hiển thệ bệnh được chọn
                    diseaseOptions.forEach(opt => {
                        opt.classList.remove('selected');
                        if (opt.getAttribute('data-disease') === matchedDisease) {
                            opt.classList.add('selected');
                        }
                    });
                } else {
                    // Nếu không tìm thấy bệnh cụ thể, tìm món ăn chung
                    searchDisease = "general";
                }
            }
            
            // Nếu không có gì được chọn
            if (!searchDisease && !customSearch) {
                alert("Vui lòng chọn một bệnh/tình trạng sức khỏe hoặc nhập từ khóa tìm kiếm.");
                return;
            }
            
            // Hiển thị kết quả
            displayResults(searchDisease, customSearch);
        }

        // Hàm tìm bệnh theo từ khóa
        function findDiseaseByKeyword(keyword) {
            const keywordToDisease = {
                "tiểu đường": "tieu-duong",
                "đái tháo đường": "tieu-duong",
                "đường huyết": "tieu-duong",
                "béo phì": "tieu-duong-beo-phi",
                "thừa cân": "tieu-duong-beo-phi",
                "giảm cân": "tieu-duong-beo-phi",
                "gầy yếu": "tieu-duong-gay-yeu",
                "suy nhược": "tieu-duong-gay-yeu",
                "huyết áp": "cao-huyet-ap",
                "tăng huyết áp": "cao-huyet-ap",
                "mỡ máu": "mo-mau",
                "cholesterol": "mo-mau",
                "mất ngủ": "mat-ngu",
                "khó ngủ": "mat-ngu",
                "khát nước": "khat-nuoc",
                "âm hư": "khat-nuoc"
            };
            
            for (const [key, disease] of Object.entries(keywordToDisease)) {
                if (keyword.includes(key)) {
                    return disease;
                }
            }
            
            return null;
        }

        // Hàm hiển thị kết quả
        function displayResults(disease, customSearch) {
            const resultsContainer = document.getElementById('resultsContainer');
            const dishesList = document.getElementById('dishesList');
            const weeklyMenu = document.getElementById('weeklyMenu');
            
            // Hiển thị container kết quả
            resultsContainer.style.display = 'grid';
            
            // Hiển thị món ăn phù hợp
            dishesList.innerHTML = '';
            
            let dishesToShow = [];
            if (dishesByDisease[disease]) {
                dishesToShow = dishesByDisease[disease];
            } else if (customSearch) {
                // Tìm món ăn theo từ khóa tùy chỉnh
                dishesToShow = searchDishesByKeyword(customSearch);
            }
            
            if (dishesToShow.length > 0) {
                dishesToShow.forEach(dish => {
                    const dishElement = document.createElement('div');
                    dishElement.className = 'dish-item';
                    
                    const effectsHtml = dish.effects.map(effect => `<span class="property">${effect}</span>`).join(' ');
                    
                    dishElement.innerHTML = `
                        <h3>${dish.name} <span class="calorie-badge">${dish.calories}</span></h3>
                        <p>${dish.description}</p>
                        <div class="ingredients"><strong>Nguyên liệu:</strong> ${dish.ingredients.join(', ')}</div>
                        <div style="margin-top: 10px;">${effectsHtml}</div>
                    `;
                    dishesList.appendChild(dishElement);
                });
            } else {
                dishesList.innerHTML = '<p class="no-results">Không tìm thấy món ăn nào phù hợp. Vui lòng thử từ khóa khác.</p>';
            }
            
            // Hiển thị thực đơn 7 ngày
            weeklyMenu.innerHTML = '';
            
            if (weeklyMenus[disease]) {
                weeklyMenus[disease].forEach(dayMenu => {
                    const dayElement = document.createElement('div');
                    dayElement.className = 'menu-day';
                    
                    dayElement.innerHTML = `
                        <h3><i class="far fa-calendar"></i> ${dayMenu.day}</h3>
                        <div class="meal-time">
                            <h4><i class="fas fa-sun"></i> Bữa sáng</h4>
                            <div class="meal-details">
                                <strong>${dayMenu.meals.morning.name}</strong>
                                <p>${dayMenu.meals.morning.details}</p>
                                <div><em>Calo: ${dayMenu.meals.morning.calories}</em></div>
                            </div>
                        </div>
                        <div class="meal-time">
                            <h4><i class="fas fa-utensils"></i> Bữa trưa</h4>
                            <div class="meal-details">
                                <strong>${dayMenu.meals.lunch.name}</strong>
                                <p>${dayMenu.meals.lunch.details}</p>
                                <div><em>Calo: ${dayMenu.meals.lunch.calories}</em></div>
                            </div>
                        </div>
                        <div class="meal-time">
                            <h4><i class="fas fa-moon"></i> Bữa tối</h4>
                            <div class="meal-details">
                                <strong>${dayMenu.meals.dinner.name}</strong>
                                <p>${dayMenu.meals.dinner.details}</p>
                                <div><em>Calo: ${dayMenu.meals.dinner.calories}</em></div>
                            </div>
                        </div>
                        <div class="total-calories">
                            <i class="fas fa-fire"></i> Tổng calo trong ngày: ${dayMenu.totalCalories}
                        </div>
                        <div style="margin-top: 10px; padding: 10px; background-color: #f0f7f4; border-radius: 5px;">
                            <strong><i class="fas fa-lightbulb"></i> Lưu ý:</strong> ${dayMenu.note}
                        </div>
                    `;
                    
                    weeklyMenu.appendChild(dayElement);
                });
            } else {
                weeklyMenu.innerHTML = `
                    <div class="no-results">
                        <p>Thực đơn 7 ngày chi tiết cho tình trạng này đang được cập nhật.</p>
                        <p>Bạn có thể tham khảo thực đơn mẫu cho bệnh tiểu đường ở trên.</p>
                        <p>Để có thực đơn cá nhân hóa, vui lòng tham vấn chuyên gia dinh dưỡng.</p>
                    </div>
                `;
            }
            
            // Cuộn đến kết quả
            resultsContainer.scrollIntoView({ behavior: 'smooth' });
        }

        // Hàm tìm món ăn theo từ khóa (cho tìm kiếm tùy chỉnh)
        function searchDishesByKeyword(keyword) {
            let results = [];
            
            // Tìm trong tất cả các món ăn của tất cả bệnh
            for (const disease in dishesByDisease) {
                const dishes = dishesByDisease[disease];
                dishes.forEach(dish => {
                    // Tìm trong tên, mô tả, công dụng
                    const searchText = (dish.name + ' ' + dish.description + ' ' + dish.effects.join(' ')).toLowerCase();
                    if (searchText.includes(keyword.toLowerCase())) {
                        results.push(dish);
                    }
                });
            }
            
            // Giới hạn kết quả
            return results.slice(0, 8);
        }

        // Hàm xóa tìm kiếm
        function clearSearch() {
            selectedDisease = null;
            diseaseOptions.forEach(opt => opt.classList.remove('selected'));
            document.getElementById('customSearch').value = '';
            document.getElementById('resultsContainer').style.display = 'none';
        }

        // Hiển thị mặc định khi trang được tải
        window.addEventListener('DOMContentLoaded', function() {
            // Không hiển thị gì mặc định, chờ người dùng tìm kiếm
        });
    </script>
</body>
</html>